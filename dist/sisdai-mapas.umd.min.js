(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e(require("vue")):"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["sisdai-mapas"]=e(require("vue")):t["sisdai-mapas"]=e(t["Vue"])})("undefined"!==typeof self?self:this,(function(t){return function(){var e={905:function(t,e,i){"use strict";i.r(e);var o=i(481),n=i.n(o),r=i(400),s=i.n(r),a=s()(n());a.push([t.id,".sisdai-mapa-contenedor[data-v-51ced022]{min-height:200px;min-width:200px;position:relative;display:grid;grid-template-columns:repeat(1,1fr);grid-gap:0;grid-template-rows:auto 40vh 40px}.sisdai-mapa-contenedor .sisdai-mapa-encabezado[data-v-51ced022]{grid-column:1;grid-row:1}.sisdai-mapa-contenedor .sisdai-mapa[data-v-51ced022],.sisdai-mapa-contenedor .sisdai-mapa-vista-carga[data-v-51ced022]{grid-column:1;grid-row:2}.sisdai-mapa-contenedor .boton-conacyt[data-v-51ced022]{grid-column:1;grid-row:3}.sisdai-mapa-contenedor .sisdai-mapa[data-v-51ced022]{width:100%;background-color:#e9e9e9}",""]),e["default"]=a},366:function(t,e,i){"use strict";i.r(e);var o=i(481),n=i.n(o),r=i(400),s=i.n(r),a=s()(n());a.push([t.id,".sisdai-mapa-encabezado[data-v-8615f578]{padding:16px}",""]),e["default"]=a},629:function(t,e,i){"use strict";i.r(e);var o=i(481),n=i.n(o),r=i(400),s=i.n(r),a=s()(n());a.push([t.id,".boton.boton-conacyt[data-v-7f6aef72]{min-height:40px;height:40px;max-height:40px}",""]),e["default"]=a},123:function(t,e,i){"use strict";i.r(e);var o=i(481),n=i.n(o),r=i(400),s=i.n(r),a=s()(n());a.push([t.id,".sisdai-mapa-vista-carga[data-v-6af7c961]{background:rgba(0,0,0,.2);z-index:2;display:flex;justify-content:center;align-items:center}",""]),e["default"]=a},764:function(t,e,i){"use strict";var o=i(481),n=i.n(o),r=i(400),s=i.n(r),a=s()(n());a.push([t.id,'@font-face{font-family:sisdai-iconos;src:url(https://file.myfontastic.com/JS4TgqY9L4s8WsKQDkt5qA/fonts/1665440470.eot);src:url(https://file.myfontastic.com/JS4TgqY9L4s8WsKQDkt5qA/fonts/1665440470.eot?#iefix) format("embedded-opentype"),url(https://file.myfontastic.com/JS4TgqY9L4s8WsKQDkt5qA/fonts/1665440470.woff) format("woff"),url(https://file.myfontastic.com/JS4TgqY9L4s8WsKQDkt5qA/fonts/1665440470.ttf) format("truetype"),url(https://file.myfontastic.com/JS4TgqY9L4s8WsKQDkt5qA/fonts/1665440470.svg#1665440470) format("svg");font-weight:400;font-style:normal}[data-icon]:before{content:attr(data-icon)}[class*=" icono-"]:before,[class^=icono-]:before,[data-icon]:before{font-family:sisdai-iconos!important;font-style:normal!important;font-weight:400!important;font-variant:normal!important;text-transform:none!important;speak:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icono-actualizar:before{content:"a"}.icono-agregar:before{content:"b"}.icono-angulo-abajo:before{content:"c"}.icono-angulo-arriba:before{content:"d"}.icono-angulo-derecho:before{content:"e"}.icono-angulo-doble-abajo:before{content:"f"}.icono-angulo-doble-arriba:before{content:"g"}.icono-angulo-doble-derecha:before{content:"h"}.icono-angulo-doble-izquierda:before{content:"i"}.icono-angulo-izquierdo:before{content:"j"}.icono-aprobado:before{content:"k"}.icono-archivo-descargar:before{content:"l"}.icono-archivo-subir:before{content:"m"}.icono-arrastrar:before{content:"n"}.icono-ayuda:before{content:"o"}.icono-buscar:before{content:"p"}.icono-calendario:before{content:"q"}.icono-cambio-tipografia:before{content:"r"}.icono-capa-lineas:before{content:"s"}.icono-capa-puntos:before{content:"t"}.icono-casilla:before{content:"u"}.icono-casilla-verificada:before{content:"v"}.icono-cerrar:before{content:"w"}.icono-colaborar:before{content:"x"}.icono-compartir:before{content:"y"}.icono-contraste:before{content:"z"}.icono-control-comenzar:before{content:"A"}.icono-control-detener:before{content:"B"}.icono-control-final:before{content:"C"}.icono-control-inicio:before{content:"D"}.icono-control-pausa:before{content:"E"}.icono-copiar:before{content:"F"}.icono-documento:before{content:"G"}.icono-documento-csv:before{content:"H"}.icono-documento-geojson:before{content:"I"}.icono-documento-geopaquete:before{content:"J"}.icono-documento-pdf:before{content:"K"}.icono-documento-png:before{content:"L"}.icono-documento-ppt:before{content:"M"}.icono-documento-word:before{content:"N"}.icono-editar:before{content:"O"}.icono-eliminar:before{content:"P"}.icono-enlace-subrayado:before{content:"Q"}.icono-estrella:before{content:"R"}.icono-flecha-abajo:before{content:"S"}.icono-flecha-abajo-derecha:before{content:"T"}.icono-flecha-abajo-izquierda:before{content:"U"}.icono-flecha-arriba:before{content:"V"}.icono-flecha-arriba-derecha:before{content:"W"}.icono-flecha-arriba-izquierda:before{content:"X"}.icono-flecha-derecha:before{content:"Y"}.icono-flecha-izquierda:before{content:"Z"}.icono-flechas-horizontales:before{content:"0"}.icono-flkt:before{content:"1"}.icono-groupo:before{content:"2"}.icono-social-facebook:before{content:"3"}.icono-social-github:before{content:"4"}.icono-social-instagram:before{content:"5"}.icono-social-twitter:before{content:"6"}.icono-social-youtube:before{content:"7"}.icono-informacion:before{content:"8"}.icono-inicio:before{content:"9"}.icono-mapa-centro:before{content:"!"}.icono-mapa-generador:before{content:\'"\'}.icono-maximizar:before{content:"#"}.icono-menu:before{content:"$"}.icono-mexico:before{content:"%"}.icono-minimizar:before{content:"&"}.icono-nivel:before{content:"\'"}.icono-numerales:before{content:"("}.icono-ojo-ocultar:before{content:")"}.icono-ojo-ver:before{content:"*"}.icono-ordenar-alfabetico-asc:before{content:"+"}.icono-ordenar-alfabetico-desc:before{content:","}.icono-ordenar-asc:before{content:"-"}.icono-ordenar-desc:before{content:"."}.icono-persona:before{content:"/"}.icono-capa-poligono:before{content:":"}.icono-reloj:before{content:";"}.icono-restar:before{content:"<"}.icono-teclado:before{content:"="}.icono-ubicacion:before{content:">"}.icono-vista-simplificada:before{content:"?"}.icono-voto-no:before{content:"@"}.icono-voto-si:before{content:"["}.icono-accesibilidad:before{content:"^"}.icono-restablecer:before{content:"`"}',""]),e["Z"]=a},84:function(t,e,i){"use strict";i.r(e);var o=i(481),n=i.n(o),r=i(400),s=i.n(r),a=i(764),l=i(806),h=i.n(l),d=new URL(i(130),i.b),c=s()(n());c.i(a.Z);var u=h()(d);c.push([t.id,'.sisdai-mapa-control{position:absolute;display:flex;flex-direction:column;margin:12px}.sisdai-mapa-control-zoom>button{margin:0}.sisdai-mapa-control-zoom>button:not(:last-child){margin-bottom:6px;margin-right:0}.sisdai-mapa-control-vista-inicial{bottom:0}.sisdai-mapa-control-escala-grafica{bottom:0;left:46px!important}.sisdai-mapa-control-escala-grafica .ol-scale-bar-inner .ol-scale-step-marker{height:10px;top:0!important}.sisdai-mapa-control-escala-grafica .ol-scale-bar-inner .ol-scale-singlebar{height:3px;top:8px}.sisdai-mapa-control-escala-grafica .ol-scale-bar-inner .ol-scale-step-text{bottom:10px;font-size:11px}.sisdai-mapa-control-escala-grafica .ol-scale-bar-inner div>.ol-scale-step-marker{top:-2px!important}:root{--pagina-fondo:#fff;--tipografia-color:#141414;--tipografia-color-1:#fff;--tipografia-color-2:#6f7271;--tipografia-color-3:#404041;--tabla-fondo-impar:#f6f6f6;--tabla-fondo-notas:#a9a8a9;--detalle-fondo:#f6f6f6;--detalle-focus-sombra:#005dff;--sombra:#0000001a;--sombra-focus:#005dff;--sombra-hover:#00000033;--label-color:#6f7271;--input-fondo:transparent;--input-color:#141414;--input-borde:#a9a8a9;--input-controles-color:#14a634;--input-deshabilitado-fondo:#f6f6f6;--input-deshabilitado-color:#a9a8a9;--input-hover-borde:#6f7271;--input-focus-sombra:#005dff;--acciones-informativo:#1256c4;--acciones-error:#c51228;--acciones-advertencia:#feb301;--acciones-correcto:#069165;--borde-color-1:#141414;--borde-color-2:#6f7271;--borde-color-3:#a9a8a9;--borde-color-4:#fff;--tipografia-familia:"Montserrat",sans-serif;--tipografia-tamanio:16px;--boton-primario-fondo:#141414;--boton-primario-borde:#141414;--boton-primario-color:#fff;--boton-primario-sombra:transparent;--boton-primario-deshabilitado-fondo:#ddd;--boton-primario-deshabilitado-borde:#ddd;--boton-primario-deshabilitado-color:#a9a8a9;--boton-primario-deshabilitado-sombra:transparent;--boton-primario-hover-fondo:#404041;--boton-primario-hover-borde:#404041;--boton-primario-hover-color:#fff;--boton-primario-hover-sombra:#00000033;--boton-primario-focus-fondo:#141414;--boton-primario-focus-borde:#005dff;--boton-primario-focus-color:#fff;--boton-primario-focus-sombra:#005dff;--boton-secundario-fondo:#fff;--boton-secundario-borde:#141414;--boton-secundario-color:#141414;--boton-secundario-sombra:transparent;--boton-secundario-deshabilitado-fondo:#fff;--boton-secundario-deshabilitado-borde:#ddd;--boton-secundario-deshabilitado-color:#a9a8a9;--boton-secundario-deshabilitado-sombra:transparent;--boton-secundario-hover-fondo:#fff;--boton-secundario-hover-borde:#141414;--boton-secundario-hover-color:#141414;--boton-secundario-hover-sombra:#00000033;--boton-secundario-focus-fondo:#fff;--boton-secundario-focus-borde:#005dff;--boton-secundario-focus-color:#141414;--boton-secundario-focus-sombra:#005dff;--boton-terciario-fondo:transparent;--boton-terciario-borde:transparent;--boton-terciario-color:#141414;--boton-terciario-sombra:transparent;--boton-terciario-deshabilitado-fondo:transparent;--boton-terciario-deshabilitado-borde:transparent;--boton-terciario-deshabilitado-color:#a9a8a9;--boton-terciario-deshabilitado-sombra:transparent;--boton-terciario-hover-fondo:transparent;--boton-terciario-hover-borde:transparent;--boton-terciario-hover-color:#141414;--boton-terciario-hover-sombra:#00000033;--boton-terciario-focus-fondo:transparent;--boton-terciario-focus-borde:#005dff;--boton-terciario-focus-color:#141414;--boton-terciario-focus-sombra:#005dff;--hipervinculo-color:#005dff;--hipervinculo-sombra:transparent;--hipervinculo-deshabilitado-color:#a9a8a980;--hipervinculo-deshabilitado-sombra:transparent;--hipervinculo-hover-color:#356ccc;--hipervinculo-hover-sombra:transparent;--hipervinculo-focus-color:#005dff;--hipervinculo-focus-sombra:#005dff;--navegacion-fondo:#eef;--navegacion-sombra:0 1px 0 0 #ccf,0 8px 8px -4px rgba(0,0,0,.2);--navegacion-redondeado:0 0 8px 8px;--navegacion-color:#00f;--navegacion-fondo-hover:#ddf;--navegacion-sombra-hover:0 1px 0 0 #ccf,0 8px 8px -4px rgba(0,0,0,.2);--navegacion-color-hover:#00f;--navegacion-fondo-active:#00f;--navegacion-sombra-active:0 0 0 0;--navegacion-color-active:#fff}html{line-height:1.3;scroll-behavior:smooth;text-rendering:optimizeLegibility;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{padding:0;margin:0}body *{box-sizing:border-box}iframe,main{display:block}iframe{border:none}progress{vertical-align:baseline}abbr{cursor:help;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}abbr,ins{border:none}ins{-webkit-text-decoration:underline dashed;text-decoration:underline dashed}b,strong{font-weight:600}sub,sup{line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border:none}.borde{border:1px solid var(--borde-color-1)}.borde-t{border-top:1px solid var(--borde-color-1)}.borde-r{border-right:1px solid var(--borde-color-1)}.borde-b{border-bottom:1px solid var(--borde-color-1)}.borde-l,.borde-x{border-left:1px solid var(--borde-color-1)}.borde-x{border-right:1px solid var(--borde-color-1)}.borde-y{border-top:1px solid var(--borde-color-1);border-bottom:1px solid var(--borde-color-1)}.border-redondeado-t-0{border-top-left-radius:0;border-top-right-radius:0}.border-redondeado-b-0{border-bottom-left-radius:0;border-bottom-right-radius:0}.border-redondeado-l-0{border-bottom-left-radius:0;border-top-right-radius:0;border-bottom-right-radius:0}.borde-redondeado-t-l-0,.border-redondeado-l-0{border-top-left-radius:0}.borde-redondeado-t-r-0{border-top-right-radius:0}.borde-redondeado-b-l-0{border-bottom-left-radius:0}.borde-redondeado-b-r-0{border-bottom-right-radius:0}.borde-redondeado-minimo{border-radius:4px}.border-redondeado-t-minimo{border-top-left-radius:4px;border-top-right-radius:4px}.border-redondeado-b-minimo{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.border-redondeado-l-minimo{border-top-left-radius:4px;border-bottom-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:4px}.borde-redondeado-t-l-minimo{border-top-left-radius:4px}.borde-redondeado-t-r-minimo{border-top-right-radius:4px}.borde-redondeado-b-l-minimo{border-bottom-left-radius:4px}.borde-redondeado-b-r-minimo{border-bottom-right-radius:4px}.borde-redondeado-1{border-radius:8px}.border-redondeado-t-1{border-top-left-radius:8px;border-top-right-radius:8px}.border-redondeado-b-1{border-bottom-left-radius:8px;border-bottom-right-radius:8px}.border-redondeado-l-1{border-bottom-left-radius:8px;border-top-right-radius:8px;border-bottom-right-radius:8px}.borde-redondeado-t-l-1,.border-redondeado-l-1{border-top-left-radius:8px}.borde-redondeado-t-r-1{border-top-right-radius:8px}.borde-redondeado-b-l-1{border-bottom-left-radius:8px}.borde-redondeado-b-r-1{border-bottom-right-radius:8px}.borde-redondeado-2{border-radius:16px}.border-redondeado-t-2{border-top-left-radius:16px;border-top-right-radius:16px}.border-redondeado-b-2{border-bottom-left-radius:16px;border-bottom-right-radius:16px}.border-redondeado-l-2{border-bottom-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:16px}.borde-redondeado-t-l-2,.border-redondeado-l-2{border-top-left-radius:16px}.borde-redondeado-t-r-2{border-top-right-radius:16px}.borde-redondeado-b-l-2{border-bottom-left-radius:16px}.borde-redondeado-b-r-2{border-bottom-right-radius:16px}.borde-redondeado-3{border-radius:24px}.border-redondeado-t-3{border-top-left-radius:24px;border-top-right-radius:24px}.border-redondeado-b-3{border-bottom-left-radius:24px;border-bottom-right-radius:24px}.border-redondeado-l-3{border-bottom-left-radius:24px;border-top-right-radius:24px;border-bottom-right-radius:24px}.borde-redondeado-t-l-3,.border-redondeado-l-3{border-top-left-radius:24px}.borde-redondeado-t-r-3{border-top-right-radius:24px}.borde-redondeado-b-l-3{border-bottom-left-radius:24px}.borde-redondeado-b-r-3{border-bottom-right-radius:24px}.borde-redondeado-4{border-radius:32px}.border-redondeado-t-4{border-top-left-radius:32px;border-top-right-radius:32px}.border-redondeado-b-4{border-bottom-left-radius:32px;border-bottom-right-radius:32px}.border-redondeado-l-4{border-bottom-left-radius:32px;border-top-right-radius:32px;border-bottom-right-radius:32px}.borde-redondeado-t-l-4,.border-redondeado-l-4{border-top-left-radius:32px}.borde-redondeado-t-r-4{border-top-right-radius:32px}.borde-redondeado-b-l-4{border-bottom-left-radius:32px}.borde-redondeado-b-r-4{border-bottom-right-radius:32px}.borde-redondeado-5{border-radius:40px}.border-redondeado-t-5{border-top-left-radius:40px;border-top-right-radius:40px}.border-redondeado-b-5{border-bottom-left-radius:40px;border-bottom-right-radius:40px}.border-redondeado-l-5{border-bottom-left-radius:40px;border-top-right-radius:40px;border-bottom-right-radius:40px}.borde-redondeado-t-l-5,.border-redondeado-l-5{border-top-left-radius:40px}.borde-redondeado-t-r-5{border-top-right-radius:40px}.borde-redondeado-b-l-5{border-bottom-left-radius:40px}.borde-redondeado-b-r-5{border-bottom-right-radius:40px}.borde-redondeado-6{border-radius:48px}.border-redondeado-t-6{border-top-left-radius:48px;border-top-right-radius:48px}.border-redondeado-b-6{border-bottom-left-radius:48px;border-bottom-right-radius:48px}.border-redondeado-l-6{border-bottom-left-radius:48px;border-top-right-radius:48px;border-bottom-right-radius:48px}.borde-redondeado-t-l-6,.border-redondeado-l-6{border-top-left-radius:48px}.borde-redondeado-t-r-6{border-top-right-radius:48px}.borde-redondeado-b-l-6{border-bottom-left-radius:48px}.borde-redondeado-b-r-6{border-bottom-right-radius:48px}.borde-redondeado-7{border-radius:56px}.border-redondeado-t-7{border-top-left-radius:56px;border-top-right-radius:56px}.border-redondeado-b-7{border-bottom-left-radius:56px;border-bottom-right-radius:56px}.border-redondeado-l-7{border-bottom-left-radius:56px;border-top-right-radius:56px;border-bottom-right-radius:56px}.borde-redondeado-t-l-7,.border-redondeado-l-7{border-top-left-radius:56px}.borde-redondeado-t-r-7{border-top-right-radius:56px}.borde-redondeado-b-l-7{border-bottom-left-radius:56px}.borde-redondeado-b-r-7{border-bottom-right-radius:56px}.borde-redondeado-8{border-radius:64px}.border-redondeado-t-8{border-top-left-radius:64px;border-top-right-radius:64px}.border-redondeado-b-8{border-bottom-left-radius:64px;border-bottom-right-radius:64px}.border-redondeado-l-8{border-bottom-left-radius:64px;border-top-right-radius:64px;border-bottom-right-radius:64px}.borde-redondeado-t-l-8,.border-redondeado-l-8{border-top-left-radius:64px}.borde-redondeado-t-r-8{border-top-right-radius:64px}.borde-redondeado-b-l-8{border-bottom-left-radius:64px}.borde-redondeado-b-r-8{border-bottom-right-radius:64px}.borde-redondeado-9{border-radius:72px}.border-redondeado-t-9{border-top-left-radius:72px;border-top-right-radius:72px}.border-redondeado-b-9{border-bottom-left-radius:72px;border-bottom-right-radius:72px}.border-redondeado-l-9{border-bottom-left-radius:72px;border-top-right-radius:72px;border-bottom-right-radius:72px}.borde-redondeado-t-l-9,.border-redondeado-l-9{border-top-left-radius:72px}.borde-redondeado-t-r-9{border-top-right-radius:72px}.borde-redondeado-b-l-9{border-bottom-left-radius:72px}.borde-redondeado-b-r-9{border-bottom-right-radius:72px}.borde-redondeado-10{border-radius:80px}.border-redondeado-t-10{border-top-left-radius:80px;border-top-right-radius:80px}.border-redondeado-b-10{border-bottom-left-radius:80px;border-bottom-right-radius:80px}.border-redondeado-l-10{border-bottom-left-radius:80px;border-top-right-radius:80px;border-bottom-right-radius:80px}.borde-redondeado-t-l-10,.border-redondeado-l-10{border-top-left-radius:80px}.borde-redondeado-t-r-10{border-top-right-radius:80px}.borde-redondeado-b-l-10{border-bottom-left-radius:80px}.borde-redondeado-b-r-10{border-bottom-right-radius:80px}.borde-redondeado-extra{border-radius:96px}.border-redondeado-t-extra{border-top-left-radius:96px;border-top-right-radius:96px}.border-redondeado-b-extra{border-bottom-left-radius:96px;border-bottom-right-radius:96px}.border-redondeado-l-extra{border-bottom-left-radius:96px;border-top-right-radius:96px;border-bottom-right-radius:96px}.borde-redondeado-t-l-extra,.border-redondeado-l-extra{border-top-left-radius:96px}.borde-redondeado-t-r-extra{border-top-right-radius:96px}.borde-redondeado-b-l-extra{border-bottom-left-radius:96px}.borde-redondeado-b-r-extra{border-bottom-right-radius:96px}.borde-redondeado-maximo{border-radius:120px}.border-redondeado-t-maximo{border-top-left-radius:120px;border-top-right-radius:120px}.border-redondeado-b-maximo{border-bottom-left-radius:120px;border-bottom-right-radius:120px}.border-redondeado-l-maximo{border-bottom-left-radius:120px;border-top-right-radius:120px;border-bottom-right-radius:120px}.borde-redondeado-t-l-maximo,.border-redondeado-l-maximo{border-top-left-radius:120px}.borde-redondeado-t-r-maximo{border-top-right-radius:120px}.borde-redondeado-b-l-maximo{border-bottom-left-radius:120px}.borde-redondeado-b-r-maximo{border-bottom-right-radius:120px}.borde-redondeado-0{border-radius:0}.borde-t-redondeado-0{border-top-left-radius:0;border-top-right-radius:0}.borde-b-redondeado-0{border-bottom-left-radius:0;border-bottom-right-radius:0}.borde-r-redondeado-0{border-top-left-radius:0;border-bottom-left-radius:0}.borde-l-redondeado-0{border-top-right-radius:0;border-bottom-right-radius:0}.borde-t-l-redondeado-0{border-top-left-radius:0}.borde-t-r-redondeado-0{border-top-right-radius:0}.borde-b-l-redondeado-0{border-bottom-left-radius:0}.borde-b-r-redondeado-0{border-bottom-right-radius:0}.borde-redondeado-1{border-radius:1px}.borde-t-redondeado-1{border-top-left-radius:1px;border-top-right-radius:1px}.borde-b-redondeado-1{border-bottom-left-radius:1px;border-bottom-right-radius:1px}.borde-r-redondeado-1{border-top-left-radius:1px;border-bottom-left-radius:1px}.borde-l-redondeado-1{border-top-right-radius:1px;border-bottom-right-radius:1px}.borde-t-l-redondeado-1{border-top-left-radius:1px}.borde-t-r-redondeado-1{border-top-right-radius:1px}.borde-b-l-redondeado-1{border-bottom-left-radius:1px}.borde-b-r-redondeado-1{border-bottom-right-radius:1px}.borde-redondeado-2{border-radius:2px}.borde-t-redondeado-2{border-top-left-radius:2px;border-top-right-radius:2px}.borde-b-redondeado-2{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.borde-r-redondeado-2{border-top-left-radius:2px;border-bottom-left-radius:2px}.borde-l-redondeado-2{border-top-right-radius:2px;border-bottom-right-radius:2px}.borde-t-l-redondeado-2{border-top-left-radius:2px}.borde-t-r-redondeado-2{border-top-right-radius:2px}.borde-b-l-redondeado-2{border-bottom-left-radius:2px}.borde-b-r-redondeado-2{border-bottom-right-radius:2px}.borde-redondeado-4{border-radius:4px}.borde-t-redondeado-4{border-top-left-radius:4px;border-top-right-radius:4px}.borde-b-redondeado-4{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.borde-r-redondeado-4{border-top-left-radius:4px;border-bottom-left-radius:4px}.borde-l-redondeado-4{border-top-right-radius:4px;border-bottom-right-radius:4px}.borde-t-l-redondeado-4{border-top-left-radius:4px}.borde-t-r-redondeado-4{border-top-right-radius:4px}.borde-b-l-redondeado-4{border-bottom-left-radius:4px}.borde-b-r-redondeado-4{border-bottom-right-radius:4px}.borde-redondeado-8{border-radius:8px}.borde-t-redondeado-8{border-top-left-radius:8px;border-top-right-radius:8px}.borde-b-redondeado-8{border-bottom-left-radius:8px;border-bottom-right-radius:8px}.borde-r-redondeado-8{border-top-left-radius:8px;border-bottom-left-radius:8px}.borde-l-redondeado-8{border-top-right-radius:8px;border-bottom-right-radius:8px}.borde-t-l-redondeado-8{border-top-left-radius:8px}.borde-t-r-redondeado-8{border-top-right-radius:8px}.borde-b-l-redondeado-8{border-bottom-left-radius:8px}.borde-b-r-redondeado-8{border-bottom-right-radius:8px}.borde-redondeado-16{border-radius:16px}.borde-t-redondeado-16{border-top-left-radius:16px;border-top-right-radius:16px}.borde-b-redondeado-16{border-bottom-left-radius:16px;border-bottom-right-radius:16px}.borde-r-redondeado-16{border-top-left-radius:16px;border-bottom-left-radius:16px}.borde-l-redondeado-16{border-top-right-radius:16px;border-bottom-right-radius:16px}.borde-t-l-redondeado-16{border-top-left-radius:16px}.borde-t-r-redondeado-16{border-top-right-radius:16px}.borde-b-l-redondeado-16{border-bottom-left-radius:16px}.borde-b-r-redondeado-16{border-bottom-right-radius:16px}.borde-color-1{border-color:var(--borde-color-1)}.borde-t-color-1{border-top-color:var(--borde-color-1)}.borde-r-color-1{border-right-color:var(--borde-color-1)}.borde-b-color-1{border-bottom-color:var(--borde-color-1)}.borde-l-color-1,.borde-x-color-1{border-left-color:var(--borde-color-1)}.borde-x-color-1{border-right-color:var(--borde-color-1)}.borde-y-color-1{border-top-color:var(--borde-color-1);border-bottom-color:var(--borde-color-1)}.borde-color-2{border-color:var(--borde-color-2)}.borde-t-color-2{border-top-color:var(--borde-color-2)}.borde-r-color-2{border-right-color:var(--borde-color-2)}.borde-b-color-2{border-bottom-color:var(--borde-color-2)}.borde-l-color-2,.borde-x-color-2{border-left-color:var(--borde-color-2)}.borde-x-color-2{border-right-color:var(--borde-color-2)}.borde-y-color-2{border-top-color:var(--borde-color-2);border-bottom-color:var(--borde-color-2)}.borde-color-3{border-color:var(--borde-color-3)}.borde-t-color-3{border-top-color:var(--borde-color-3)}.borde-r-color-3{border-right-color:var(--borde-color-3)}.borde-b-color-3{border-bottom-color:var(--borde-color-3)}.borde-l-color-3,.borde-x-color-3{border-left-color:var(--borde-color-3)}.borde-x-color-3{border-right-color:var(--borde-color-3)}.borde-y-color-3{border-top-color:var(--borde-color-3);border-bottom-color:var(--borde-color-3)}.borde-color-4{border-color:var(--borde-color-4)}.borde-t-color-4{border-top-color:var(--borde-color-4)}.borde-r-color-4{border-right-color:var(--borde-color-4)}.borde-b-color-4{border-bottom-color:var(--borde-color-4)}.borde-l-color-4,.borde-x-color-4{border-left-color:var(--borde-color-4)}.borde-x-color-4{border-right-color:var(--borde-color-4)}.borde-y-color-4{border-top-color:var(--borde-color-4);border-bottom-color:var(--borde-color-4)}.borde-grosor-0{border-width:0}.borde-t-grosor-0{border-top-width:0}.borde-r-grosor-0{border-right-width:0}.borde-b-grosor-0{border-bottom-width:0}.borde-l-grosor-0,.borde-x-grosor-0{border-left-width:0}.borde-x-grosor-0{border-right-width:0}.borde-y-grosor-0{border-top-width:0;border-bottom-width:0}.borde-grosor-1{border-width:1px}.borde-t-grosor-1{border-top-width:1px}.borde-r-grosor-1{border-right-width:1px}.borde-b-grosor-1{border-bottom-width:1px}.borde-l-grosor-1,.borde-x-grosor-1{border-left-width:1px}.borde-x-grosor-1{border-right-width:1px}.borde-y-grosor-1{border-top-width:1px;border-bottom-width:1px}.borde-grosor-2{border-width:2px}.borde-t-grosor-2{border-top-width:2px}.borde-r-grosor-2{border-right-width:2px}.borde-b-grosor-2{border-bottom-width:2px}.borde-l-grosor-2,.borde-x-grosor-2{border-left-width:2px}.borde-x-grosor-2{border-right-width:2px}.borde-y-grosor-2{border-top-width:2px;border-bottom-width:2px}.borde-grosor-4{border-width:4px}.borde-t-grosor-4{border-top-width:4px}.borde-r-grosor-4{border-right-width:4px}.borde-b-grosor-4{border-bottom-width:4px}.borde-l-grosor-4,.borde-x-grosor-4{border-left-width:4px}.borde-x-grosor-4{border-right-width:4px}.borde-y-grosor-4{border-top-width:4px;border-bottom-width:4px}.borde-grosor-8{border-width:8px}.borde-t-grosor-8{border-top-width:8px}.borde-r-grosor-8{border-right-width:8px}.borde-b-grosor-8{border-bottom-width:8px}.borde-l-grosor-8,.borde-x-grosor-8{border-left-width:8px}.borde-x-grosor-8{border-right-width:8px}.borde-y-grosor-8{border-top-width:8px;border-bottom-width:8px}.borde-grosor-16{border-width:16px}.borde-t-grosor-16{border-top-width:16px}.borde-r-grosor-16{border-right-width:16px}.borde-b-grosor-16{border-bottom-width:16px}.borde-l-grosor-16,.borde-x-grosor-16{border-left-width:16px}.borde-x-grosor-16{border-right-width:16px}.borde-y-grosor-16{border-top-width:16px;border-bottom-width:16px}hr{border-top:1px solid var(--borde-color-1);box-sizing:content-box;height:0;overflow:visible;margin-top:16px;margin-bottom:16px}h1+hr,h2+hr,h3+hr,h4+hr,h5+hr,h6+hr{margin-top:-8px}ol+hr,ul+hr{margin-top:0;margin-bottom:0}.separador,.separador-primario{border-top-color:var(--borde-color-1)}.separador-secundario{border-top-color:var(--borde-color-2)}.boton,button,input[type=button],input[type=reset],input[type=submit]{border-style:solid;border-width:1px;border-radius:4px;box-shadow:3px 3px 4px transparent;box-sizing:border-box;font-family:var(--tipografia-familia,"sans-serif");font-size:1rem;font-weight:500;line-height:1.3em;padding:16px 24px;text-decoration:none;text-align:center;display:inline-flex;align-items:center}.boton:not(:disabled),button:not(:disabled),input[type=button]:not(:disabled),input[type=reset]:not(:disabled),input[type=submit]:not(:disabled){cursor:pointer;transition:all .27s ease-in-out}.boton:disabled,button:disabled,input[type=button]:disabled,input[type=reset]:disabled,input[type=submit]:disabled{pointer-events:none}.boton:not(:last-child),button:not(:last-child),input[type=button]:not(:last-child),input[type=reset]:not(:last-child),input[type=submit]:not(:last-child){margin-right:8px}.boton-descarga,.boton-icono,.boton-info,.boton-primario{background-color:var(--boton-primario-fondo);border-color:var(--boton-primario-borde);color:var(--boton-primario-color)}.boton-descarga:disabled,.boton-icono:disabled,.boton-info:disabled,.boton-primario:disabled{background-color:var(--boton-primario-deshabilitado-fondo);border-color:var(--boton-primario-deshabilitado-borde);box-shadow:3px 3px 4px var(--boton-primario-deshabilitado-sombra);color:var(--boton-primario-deshabilitado-color)}.boton-descarga:not(:disabled):hover,.boton-icono:not(:disabled):hover,.boton-info:not(:disabled):hover,.boton-primario:not(:disabled):hover{background-color:var(--boton-primario-hover-fondo);border-color:var(--boton-primario-hover-borde);box-shadow:3px 3px 4px var(--boton-primario-hover-sombra);color:var(--boton-primario-hover-color)}.boton-descarga:not(:disabled):focus,.boton-icono:not(:disabled):focus,.boton-info:not(:disabled):focus,.boton-primario:not(:disabled):focus{background-color:var(--boton-primario-focus-fondo);border-color:var(--boton-primario-focus-borde);box-shadow:0 0 8px var(--boton-primario-focus-sombra);color:var(--boton-primario-focus-color);outline:none}.boton-secundario{background-color:var(--boton-secundario-fondo);border-color:var(--boton-secundario-borde);color:var(--boton-secundario-color)}.boton-secundario:disabled{background-color:var(--boton-secundario-deshabilitado-fondo);border-color:var(--boton-secundario-deshabilitado-borde);box-shadow:3px 3px 4px var(--boton-secundario-deshabilitado-sombra);color:var(--boton-secundario-deshabilitado-color)}.boton-secundario:not(:disabled):hover{background-color:var(--boton-secundario-hover-fondo);border-color:var(--boton-secundario-hover-borde);box-shadow:3px 3px 4px var(--boton-secundario-hover-sombra);color:var(--boton-secundario-hover-color)}.boton-secundario:not(:disabled):focus{background-color:var(--boton-secundario-focus-fondo);border-color:var(--boton-secundario-focus-borde);box-shadow:0 0 8px var(--boton-secundario-focus-sombra);color:var(--boton-secundario-focus-color);outline:none}.boton-terciario{background-color:var(--boton-terciario-fondo);border-color:var(--boton-terciario-borde);color:var(--boton-terciario-color)}.boton-terciario:disabled{background-color:var(--boton-terciario-deshabilitado-fondo);border-color:var(--boton-terciario-deshabilitado-borde);box-shadow:3px 3px 4px var(--boton-terciario-deshabilitado-sombra);color:var(--boton-terciario-deshabilitado-color)}.boton-terciario:not(:disabled):hover{background-color:var(--boton-terciario-hover-fondo);border-color:var(--boton-terciario-hover-borde);box-shadow:3px 3px 4px var(--boton-terciario-hover-sombra);color:var(--boton-terciario-hover-color)}.boton-terciario:not(:disabled):focus{background-color:var(--boton-terciario-focus-fondo);border-color:var(--boton-terciario-focus-borde);box-shadow:0 0 8px var(--boton-terciario-focus-sombra);color:var(--boton-terciario-focus-color);outline:none}.boton-chico{font-size:.875rem;padding:8px 16px}.boton-grande{font-size:1.125rem;padding:24px}.boton [class*=" icono-"],.boton [class^=icono-],[class*=" boton-"] [class*=" icono-"],[class*=" boton-"] [class^=icono-],[class^=boton-] [class*=" icono-"],[class^=boton-] [class^=icono-]{display:inline-flex;align-items:center;padding-left:8px}.boton-icono{font-size:1.5rem;line-height:0;padding:4px}.boton-icono [class*=" icono-"],.boton-icono [class^=icono-]{padding-left:0}.boton-icono.boton-chico{font-size:1rem}.boton-icono.boton-grande{font-size:2rem}.boton-descarga{border-radius:8px;display:block;padding:32px;text-align:left;width:100%}.boton-descarga .titulo{font-weight:600;line-height:1.2em;margin:0 0 8px}.boton-descarga .descripcion{display:flex;font-weight:300;line-height:1.2em;margin:0;align-items:center;justify-content:space-around}.boton-descarga .descripcion .texto{flex:1;margin:0;font-size:.875rem}.boton-descarga .descripcion [class*=" icono-"],.boton-descarga .descripcion [class^=icono-]{font-size:2rem;padding-left:32px}.boton-info{border-radius:0;border-width:0;font-size:.875rem;display:block;padding:8px;width:100%}.boton-conacyt{background-color:#f6f6f6;border-radius:0 0 8px 8px;border-width:0;box-shadow:3px 3px 4px transparent;display:flex;color:#003384;filter:grayscale(100%);padding:4px 8px;text-align:left;width:100%;cursor:pointer}.boton-conacyt img{height:28px;opacity:.5;transition:all .25s ease-in-out}.boton-conacyt:focus,.boton-conacyt:hover{filter:grayscale(0)}.boton-conacyt:focus img,.boton-conacyt:hover img{opacity:1}fieldset{background-color:var(--input-fondo);border:1px solid var(--input-borde);border-radius:4px;padding:16px;margin-top:8px;margin-bottom:24px}legend{color:var(--tipografia-color);padding:0 16px;font-family:var(--tipografia-familia,"sans-serif");font-size:1rem;font-weight:500}label{color:var(--label-color)}input:not([type=checkbox]):not([type=radio]):not([type=range]):not([type=button]):not([type=submit]):not([type=reset]),select,textarea{background-color:var(--input-fondo);border:1px solid var(--input-borde);border-radius:4px;box-sizing:border-box;color:var(--input-color);font-family:var(--tipografia-familia,"sans-serif");font-size:1rem;font-weight:400;padding:8px 16px;margin-top:8px;margin-bottom:24px;width:100%;touch-action:manipulation}input:not([type=checkbox]):not([type=radio]):not([type=range]):not([type=button]):not([type=submit]):not([type=reset])::-moz-placeholder,select::-moz-placeholder,textarea::-moz-placeholder{color:var(--tipografia-color-2)}input:not([type=checkbox]):not([type=radio]):not([type=range]):not([type=button]):not([type=submit]):not([type=reset])::placeholder,select::placeholder,textarea::placeholder{color:var(--tipografia-color-2)}input:not([type=checkbox]):not([type=radio]):not([type=range]):not([type=button]):not([type=submit]):not([type=reset]):disabled,select:disabled,textarea:disabled{background-color:var(--input-deshabilitado-fondo);color:var(--input-deshabilitado-color)}input:not([type=checkbox]):not([type=radio]):not([type=range]):not([type=button]):not([type=submit]):not([type=reset]):-moz-read-only:not(select):not([type=file]),select:-moz-read-only:not(select):not([type=file]),textarea:-moz-read-only:not(select):not([type=file]){background-color:var(--input-deshabilitado-fondo)}input:not([type=checkbox]):not([type=radio]):not([type=range]):not([type=button]):not([type=submit]):not([type=reset]):read-only:not(select):not([type=file]),select:read-only:not(select):not([type=file]),textarea:read-only:not(select):not([type=file]){background-color:var(--input-deshabilitado-fondo)}input:not([type=checkbox]):not([type=radio]):not([type=range]):not([type=button]):not([type=submit]):not([type=reset]):not(:disabled),select:not(:disabled),textarea:not(:disabled){transition:all .27s ease-in-out}input:not([type=checkbox]):not([type=radio]):not([type=range]):not([type=button]):not([type=submit]):not([type=reset]):not(:disabled):hover,select:not(:disabled):hover,textarea:not(:disabled):hover{border-color:var(--input-hover-borde)}input:not([type=checkbox]):not([type=radio]):not([type=range]):not([type=button]):not([type=submit]):not([type=reset]):not(:disabled):focus,select:not(:disabled):focus,textarea:not(:disabled):focus{border-color:var(--input-focus-sombra);box-shadow:0 0 8px var(--input-focus-sombra);outline:none}[type=checkbox],[type=radio]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}[type=checkbox]+label,[type=radio]+label{background-color:var(--input-fondo);border:1px solid transparent;border-radius:4px;color:var(--label-color);cursor:pointer;display:inline-flex;position:relative;margin-top:8px;margin-bottom:8px;margin-right:8px;padding-left:calc(1.25rem + 8px);padding-right:16px;padding-top:4px;padding-bottom:4px}[type=checkbox]:focus+label,[type=radio]:focus+label{border-color:var(--input-focus-sombra);box-shadow:0 0 8px var(--input-focus-sombra);color:var(--input-color);outline:none}[type=checkbox]:checked+label,[type=checkbox]:hover+label,[type=radio]:checked+label,[type=radio]:hover+label{color:var(--input-color)}[type=checkbox]:hover+label:before,[type=radio]:hover+label:before{box-shadow:inset 0 0 0 1px var(--input-color)}[type=checkbox]+label:before,[type=radio]+label:before{box-sizing:border-box;box-shadow:inset 0 0 0 1px var(--input-borde);content:"";height:1.25rem;width:1.25rem;left:4px;background-color:var(--input-fondo);position:absolute}[type=checkbox]+label:before{border:2px solid var(--pagina-fondo);border-radius:4px}[type=checkbox]:checked+label:before,[type=radio]:checked+label:before{box-shadow:inset 0 0 0 1px var(--input-controles-color);background:var(--input-controles-color)}[type=checkbox]:checked+label:after{font-family:dai-iconos;content:"k";color:var(--pagina-fondo);position:absolute;left:calc(.125rem + 4px)}[type=radio]+label:before{border-radius:50%}[type=radio]:checked+label:before{background-color:var(--pagina-fondo);box-shadow:inset 0 0 0 .375rem var(--input-controles-color)}select{appearance:none;-moz-appearance:none;-webkit-appearance:none;background-image:url('+u+");background-position:calc(100% - 16px),50%;background-size:24px;background-repeat:no-repeat;padding-right:32px}[type=file]{padding-top:6px!important}[type=range]{box-sizing:border-box!important;border:1px solid transparent;width:100%;margin-top:8px;margin-bottom:24px;background-color:transparent;-webkit-appearance:none}[type=range]:focus{border-color:var(--input-focus-sombra);box-shadow:0 0 8px var(--input-focus-sombra);border-radius:4px;outline:none}[type=range]::-webkit-slider-runnable-track{background:var(--input-color);border:0;border-radius:.25rem;width:100%;height:.25rem;cursor:pointer}[type=range]::-webkit-slider-thumb{margin-top:-.625rem;width:1.5rem;height:1.5rem;background:var(--input-color);border:0;border-radius:.75rem;cursor:pointer;-webkit-appearance:none}[type=range]:focus::-webkit-slider-runnable-track{background:var(--input-color)}[type=range]::-moz-range-track{background:var(--input-color);border:0;border-radius:.25rem;width:100%;height:.25rem;cursor:pointer}[type=range]::-moz-range-thumb{width:1.5rem;height:1.5rem;background:var(--input-color);border:0;border-radius:.75rem;cursor:pointer}[type=range]::-ms-track{background:transparent;border-color:transparent;border-width:8px 0;color:transparent;width:100%;height:8px;cursor:pointer}[type=range]::-ms-fill-lower,[type=range]::-ms-fill-upper{background:var(--input-color);border:0;border-radius:1.5rem}[type=range]::-ms-thumb{width:1.5rem;height:1.5rem;border:0;border-radius:.75rem;cursor:pointer;margin-top:0}[type=range]::-ms-thumb,[type=range]:focus::-ms-fill-lower{background:var(--input-color)}[type=range]:focus::-ms-fill-upper{background:var(--input-color)}.formulario-horizontal label{margin-right:4px}.formulario-horizontal input:not([type=checkbox]):not([type=radio]):not([type=range]):not([type=button]):not([type=submit]):not([type=reset]),.formulario-horizontal select,.formulario-horizontal textarea{width:inherit}.formulario-horizontal input:not([type=checkbox]):not([type=radio]):not([type=range]):not([type=button]):not([type=submit]):not([type=reset]):not(:last-child),.formulario-horizontal select:not(:last-child),.formulario-horizontal textarea:not(:last-child){margin-right:24px}.formulario-horizontal .input-correcto,.formulario-horizontal .input-error{display:inline-flex}.formulario-horizontal .input-correcto:not(:last-child),.formulario-horizontal .input-error:not(:last-child){margin-right:24px}",""]),e["default"]=c},651:function(t,e,i){"use strict";i.r(e);var o=i(481),n=i.n(o),r=i(400),s=i.n(r),a=s()(n());a.push([t.id,':host,:root{--ol-background-color:#fff;--ol-accent-background-color:#f5f5f5;--ol-subtle-background-color:hsla(0,0%,50%,.25);--ol-partial-background-color:hsla(0,0%,100%,.75);--ol-foreground-color:#333;--ol-subtle-foreground-color:#666;--ol-brand-color:#0af}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{bottom:-5px;font-size:10px;z-index:11}.ol-scale-step-text,.ol-scale-text{position:absolute;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{font-size:12px;text-align:center;bottom:25px}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-unselectable,.ol-viewport{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:grabbing}.ol-grab{cursor:move;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:focus,.ol-control button:hover{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}',""]),e["default"]=a},400:function(t){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",o="undefined"!==typeof e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),o&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),o&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,o,n,r){"string"===typeof t&&(t=[[null,t,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var h=0;h<t.length;h++){var d=[].concat(t[h]);o&&s[d[0]]||("undefined"!==typeof r&&("undefined"===typeof d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),i&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=i):d[2]=i),n&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=n):d[4]="".concat(n)),e.push(d))}},e}},806:function(t){"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},481:function(t){"use strict";t.exports=function(t){return t[1]}},582:function(t){!function(e,i){t.exports=i()}(0,(function(){"use strict";function t(t,o,n,r,s){!function t(i,o,n,r,s){for(;r>n;){if(r-n>600){var a=r-n+1,l=o-n+1,h=Math.log(a),d=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*d*(a-d)/a)*(l-a/2<0?-1:1),u=Math.max(n,Math.floor(o-l*d/a+c)),g=Math.min(r,Math.floor(o+(a-l)*d/a+c));t(i,o,u,g,s)}var p=i[o],f=n,m=r;for(e(i,n,o),s(i[r],p)>0&&e(i,n,r);f<m;){for(e(i,f,m),f++,m--;s(i[f],p)<0;)f++;for(;s(i[m],p)>0;)m--}0===s(i[n],p)?e(i,n,m):e(i,++m,r),m<=o&&(n=m+1),o<=m&&(r=m-1)}}(t,o,n||0,r||t.length-1,s||i)}function e(t,e,i){var o=t[e];t[e]=t[i],t[i]=o}function i(t,e){return t<e?-1:t>e?1:0}var o=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function n(t,e,i){if(!i)return e.indexOf(t);for(var o=0;o<e.length;o++)if(i(t,e[o]))return o;return-1}function r(t,e){s(t,0,t.children.length,e,t)}function s(t,e,i,o,n){n||(n=p(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var r=e;r<i;r++){var s=t.children[r];a(n,t.leaf?o(s):s)}return n}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function d(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function f(e,i,o,n,r){for(var s=[i,o];s.length;)if(!((o=s.pop())-(i=s.pop())<=n)){var a=i+Math.ceil((o-i)/n/2)*n;t(e,a,i,o,r),s.push(i,a,a,o)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(t){var e=this.data,i=[];if(!g(t,e))return i;for(var o=this.toBBox,n=[];e;){for(var r=0;r<e.children.length;r++){var s=e.children[r],a=e.leaf?o(s):s;g(t,a)&&(e.leaf?i.push(s):u(t,a)?this._all(s,i):n.push(s))}e=n.pop()}return i},o.prototype.collides=function(t){var e=this.data;if(!g(t,e))return!1;for(var i=[];e;){for(var o=0;o<e.children.length;o++){var n=e.children[o],r=e.leaf?this.toBBox(n):n;if(g(t,r)){if(e.leaf||u(t,r))return!0;i.push(n)}}e=i.pop()}return!1},o.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var o=this.data;this.data=i,i=o}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},o.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},o.prototype.clear=function(){return this.data=p([]),this},o.prototype.remove=function(t,e){if(!t)return this;for(var i,o,r,s=this.data,a=this.toBBox(t),l=[],h=[];s||l.length;){if(s||(s=l.pop(),o=l[l.length-1],i=h.pop(),r=!0),s.leaf){var d=n(t,s.children,e);if(-1!==d)return s.children.splice(d,1),l.push(s),this._condense(l),this}r||s.leaf||!u(s,a)?o?(i++,s=o.children[i],r=!1):s=null:(l.push(s),h.push(i),i=0,o=s,s=s.children[0])}return this},o.prototype.toBBox=function(t){return t},o.prototype.compareMinX=function(t,e){return t.minX-e.minX},o.prototype.compareMinY=function(t,e){return t.minY-e.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(t){return this.data=t,this},o.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},o.prototype._build=function(t,e,i,o){var n,s=i-e+1,a=this._maxEntries;if(s<=a)return r(n=p(t.slice(e,i+1)),this.toBBox),n;o||(o=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,o-1))),(n=p([])).leaf=!1,n.height=o;var l=Math.ceil(s/a),h=l*Math.ceil(Math.sqrt(a));f(t,e,i,h,this.compareMinX);for(var d=e;d<=i;d+=h){var c=Math.min(d+h-1,i);f(t,d,c,l,this.compareMinY);for(var u=d;u<=c;u+=l){var g=Math.min(u+l-1,c);n.children.push(this._build(t,u,g,o-1))}}return r(n,this.toBBox),n},o.prototype._chooseSubtree=function(t,e,i,o){for(;o.push(e),!e.leaf&&o.length-1!==i;){for(var n=1/0,r=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],h=d(l),c=(u=t,g=l,(Math.max(g.maxX,u.maxX)-Math.min(g.minX,u.minX))*(Math.max(g.maxY,u.maxY)-Math.min(g.minY,u.minY))-h);c<r?(r=c,n=h<n?h:n,s=l):c===r&&h<n&&(n=h,s=l)}e=s||e.children[0]}var u,g;return e},o.prototype._insert=function(t,e,i){var o=i?t:this.toBBox(t),n=[],r=this._chooseSubtree(o,this.data,e,n);for(r.children.push(t),a(r,o);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(o,n,e)},o.prototype._split=function(t,e){var i=t[e],o=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,o);var s=this._chooseSplitIndex(i,n,o),a=p(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,r(i,this.toBBox),r(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},o.prototype._splitRoot=function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(t,e,i){for(var o,n,r,a,l,h,c,u=1/0,g=1/0,p=e;p<=i-e;p++){var f=s(t,0,p,this.toBBox),m=s(t,p,i,this.toBBox),_=(n=f,r=m,a=void 0,l=void 0,h=void 0,c=void 0,a=Math.max(n.minX,r.minX),l=Math.max(n.minY,r.minY),h=Math.min(n.maxX,r.maxX),c=Math.min(n.maxY,r.maxY),Math.max(0,h-a)*Math.max(0,c-l)),b=d(f)+d(m);_<u?(u=_,o=p,g=b<g?b:g):_===u&&b<g&&(g=b,o=p)}return o||i-e},o.prototype._chooseSplitAxis=function(t,e,i){var o=t.leaf?this.compareMinX:l,n=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,i,o)<this._allDistMargin(t,e,i,n)&&t.children.sort(o)},o.prototype._allDistMargin=function(t,e,i,o){t.children.sort(o);for(var n=this.toBBox,r=s(t,0,e,n),l=s(t,i-e,i,n),h=c(r)+c(l),d=e;d<i-e;d++){var u=t.children[d];a(r,t.leaf?n(u):u),h+=c(r)}for(var g=i-e-1;g>=e;g--){var p=t.children[g];a(l,t.leaf?n(p):p),h+=c(l)}return h},o.prototype._adjustParentBBoxes=function(t,e,i){for(var o=i;o>=0;o--)a(e[o],t)},o.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():r(t[e],this.toBBox)},o}))},784:function(t,e,i){var o=i(905);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(402).Z;n("3f4891b6",o,!0,{sourceMap:!1,shadowMode:!1})},132:function(t,e,i){var o=i(366);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(402).Z;n("b2d93ab6",o,!0,{sourceMap:!1,shadowMode:!1})},757:function(t,e,i){var o=i(629);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(402).Z;n("679e7aa9",o,!0,{sourceMap:!1,shadowMode:!1})},915:function(t,e,i){var o=i(123);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(402).Z;n("717cdbc0",o,!0,{sourceMap:!1,shadowMode:!1})},251:function(t,e,i){var o=i(84);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(402).Z;n("40544fd4",o,!0,{sourceMap:!1,shadowMode:!1})},153:function(t,e,i){var o=i(651);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(402).Z;n("30a00869",o,!0,{sourceMap:!1,shadowMode:!1})},402:function(t,e,i){"use strict";function o(t,e){for(var i=[],o={},n=0;n<e.length;n++){var r=e[n],s=r[0],a=r[1],l=r[2],h=r[3],d={id:t+":"+n,css:a,media:l,sourceMap:h};o[s]?o[s].parts.push(d):i.push(o[s]={id:s,parts:[d]})}return i}i.d(e,{Z:function(){return p}});var n="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},s=n&&(document.head||document.getElementsByTagName("head")[0]),a=null,l=0,h=!1,d=function(){},c=null,u="data-vue-ssr-id",g="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(t,e,i,n){h=i,c=n||{};var s=o(t,e);return f(s),function(e){for(var i=[],n=0;n<s.length;n++){var a=s[n],l=r[a.id];l.refs--,i.push(l)}e?(s=o(t,e),f(s)):s=[];for(n=0;n<i.length;n++){l=i[n];if(0===l.refs){for(var h=0;h<l.parts.length;h++)l.parts[h]();delete r[l.id]}}}}function f(t){for(var e=0;e<t.length;e++){var i=t[e],o=r[i.id];if(o){o.refs++;for(var n=0;n<o.parts.length;n++)o.parts[n](i.parts[n]);for(;n<i.parts.length;n++)o.parts.push(_(i.parts[n]));o.parts.length>i.parts.length&&(o.parts.length=i.parts.length)}else{var s=[];for(n=0;n<i.parts.length;n++)s.push(_(i.parts[n]));r[i.id]={id:i.id,refs:1,parts:s}}}}function m(){var t=document.createElement("style");return t.type="text/css",s.appendChild(t),t}function _(t){var e,i,o=document.querySelector("style["+u+'~="'+t.id+'"]');if(o){if(h)return d;o.parentNode.removeChild(o)}if(g){var n=l++;o=a||(a=m()),e=x.bind(null,o,n,!1),i=x.bind(null,o,n,!0)}else o=m(),e=v.bind(null,o),i=function(){o.parentNode.removeChild(o)};return e(t),function(o){if(o){if(o.css===t.css&&o.media===t.media&&o.sourceMap===t.sourceMap)return;e(t=o)}else i()}}var b=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}();function x(t,e,i,o){var n=i?"":o.css;if(t.styleSheet)t.styleSheet.cssText=b(e,n);else{var r=document.createTextNode(n),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function v(t,e){var i=e.css,o=e.media,n=e.sourceMap;if(o&&t.setAttribute("media",o),c.ssrId&&t.setAttribute(u,e.id),n&&(i+="\n/*# sourceURL="+n.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),t.styleSheet)t.styleSheet.cssText=i;else{while(t.firstChild)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}},130:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZGF0YS1uYW1lPSJUcmF6YWRvIDI4ODgyIiBkPSJNMTIuMjUgMTUuMyA3IDEwLjA1IDguMDUgOWw0LjIgNC4yIDQuMi00LjIgMS4wNSAxLjA1WiIvPjxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMjR2MjRIMHoiLz48L3N2Zz4="},203:function(e){"use strict";e.exports=t}},i={};function o(t){var n=i[t];if(void 0!==n)return n.exports;var r=i[t]={id:t,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.p=""}(),function(){o.b=document.baseURI||self.location.href}();var n={};return function(){"use strict";o.r(n),o.d(n,{default:function(){return fg},install:function(){return pg}});var t={};o.r(t),o.d(t,{GeoJSON:function(){return Bd},OSM:function(){return fu},WMS:function(){return Zu},XYZ:function(){return yu}});var e={};if(o.r(e),o.d(e,{Capas:function(){return Qu},Encabezado:function(){return rg},Leyenda:function(){return gg}}),"undefined"!==typeof window){var i=window.document.currentScript,r=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);r&&(o.p=r[1])}o(251);var s=function(){var t=this,e=t._self._c,i=t._self._setupProxy;return e("div",{staticClass:"sisdai-mapa-contenedor borde borde-redondeado-8"},[e("div",{ref:"refMapa",staticClass:"sisdai-mapa"}),e(i.VistaCarga,{directives:[{name:"show",rawName:"v-show",value:i.verCargador,expression:"verCargador"}]}),t._t("default"),e(i.BotonConacyt)],2)},a=[],l=o(203);o(153);class h{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}var d=h,c={PROPERTYCHANGE:"propertychange"};class u{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}var g=u;function p(t,e,i){let o,n;i=i||f;let r=0,s=t.length,a=!1;while(r<s)o=r+(s-r>>1),n=+i(t[o],e),n<0?r=o+1:(s=o,a=!n);return a?r:~r}function f(t,e){return t>e?1:t<e?-1:0}function m(t,e,i){const o=t.length;if(t[0]<=e)return 0;if(e<=t[o-1])return o-1;{let n;if(i>0){for(n=1;n<o;++n)if(t[n]<e)return n-1}else if(i<0){for(n=1;n<o;++n)if(t[n]<=e)return n}else for(n=1;n<o;++n){if(t[n]==e)return n;if(t[n]<e)return"function"===typeof i?i(e,t[n-1],t[n])>0?n-1:n:t[n-1]-e<e-t[n]?n-1:n}return o-1}}function _(t,e,i){while(e<i){const o=t[e];t[e]=t[i],t[i]=o,++e,--i}}function b(t,e){const i=Array.isArray(e)?e:[e],o=i.length;for(let n=0;n<o;n++)t[t.length]=i[n]}function x(t,e){const i=t.length;if(i!==e.length)return!1;for(let o=0;o<i;o++)if(t[o]!==e[o])return!1;return!0}function v(t,e,i){const o=e||f;return t.every((function(e,n){if(0===n)return!0;const r=o(t[n-1],e);return!(r>0||i&&0===r)}))}function y(){return!0}function E(){return!1}function C(){}function S(t){let e,i,o,n=!1;return function(){const r=Array.prototype.slice.call(arguments);return n&&this===o&&x(r,i)||(n=!0,o=this,i=r,e=t.apply(this,arguments)),e}}function w(t){for(const e in t)delete t[e]}function R(t){let e;for(e in t)return!1;return!e}class T extends g{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),o=i[t]||(i[t]=[]);o.includes(e)||o.push(e)}dispatchEvent(t){const e="string"===typeof t,i=e?t:t.type,o=this.listeners_&&this.listeners_[i];if(!o)return;const n=e?new d(t):t;n.target||(n.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});let a;i in r||(r[i]=0,s[i]=0),++r[i];for(let l=0,h=o.length;l<h;++l)if(a="handleEvent"in o[l]?o[l].handleEvent(n):o[l].call(this,n),!1===a||n.propagationStopped){a=!1;break}if(0===--r[i]){let t=s[i];delete s[i];while(t--)this.removeEventListener(i,C);delete r[i]}return a}disposeInternal(){this.listeners_&&w(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const i=this.listeners_&&this.listeners_[t];if(i){const o=i.indexOf(e);-1!==o&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[o]=C,++this.pendingRemovals_[t]):(i.splice(o,1),0===i.length&&delete this.listeners_[t]))}}}var I=T,M={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function L(t,e,i,o,n){if(o&&o!==t&&(i=i.bind(o)),n){const o=i;i=function(){t.removeEventListener(e,i),o.apply(this,arguments)}}const r={target:t,type:e,listener:i};return t.addEventListener(e,i),r}function O(t,e,i,o){return L(t,e,i,o,!0)}function A(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),w(t))}class P extends I{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(M.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,o=new Array(i);for(let n=0;n<i;++n)o[n]=L(this,t[n],e);return o}return L(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const o=t.length;i=new Array(o);for(let n=0;n<o;++n)i[n]=O(this,t[n],e)}else i=O(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)D(i);else if(Array.isArray(t))for(let o=0,n=t.length;o<n;++o)this.removeEventListener(t[o],e);else this.removeEventListener(t,e)}}function D(t){if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)A(t[e]);else A(t)}P.prototype.on,P.prototype.once,P.prototype.un;var F=P;function k(){throw new Error("Unimplemented abstract method.")}let N=0;function G(t){return t.ol_uid||(t.ol_uid=String(++N))}class z extends d{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class j extends F{constructor(t){super(),this.on,this.once,this.un,G(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new z(i,t,e)),i=c.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new z(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const o=this.values_||(this.values_={});if(i)o[t]=e;else{const i=o[t];o[t]=e,i!==e&&this.notify(t,i)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],R(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}var W=j;const Y={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class X extends Error{constructor(t){const e=Y[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}var B=X,V={ADD:"add",REMOVE:"remove"};const U={LENGTH:"length"};class Z extends d{constructor(t,e,i){super(t),this.element=e,this.index=i}}class K extends W{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,o=this.array_.length;i<o;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){while(this.getLength()>0)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,o=e.length;i<o;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(U.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Z(V.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,o=e.length;i<o;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Z(V.REMOVE,e,t)),e}setAt(t,e){const i=this.getLength();if(t>=i)return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const o=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Z(V.REMOVE,o,t)),this.dispatchEvent(new Z(V.ADD,e,t))}updateLength_(){this.set(U.LENGTH,this.array_.length)}assertUnique_(t,e){for(let i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===t&&i!==e)throw new B(58)}}var H=K;const q="undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent?navigator.userAgent.toLowerCase():"",J=q.includes("firefox"),$=q.includes("safari")&&!q.includes("chrom"),Q=($&&(q.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(q)),q.includes("webkit")&&!q.includes("edge")),tt=q.includes("macintosh"),et="undefined"!==typeof devicePixelRatio?devicePixelRatio:1,it="undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,ot="undefined"!==typeof Image&&Image.prototype.decode,nt=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(e){}return t}();function rt(t,e){if(!t)throw new B(e)}new Array(6);function st(){return[1,0,0,1,0,0]}function at(t,e,i,o,n,r,s){return t[0]=e,t[1]=i,t[2]=o,t[3]=n,t[4]=r,t[5]=s,t}function lt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function ht(t,e){const i=e[0],o=e[1];return e[0]=t[0]*i+t[2]*o+t[4],e[1]=t[1]*i+t[3]*o+t[5],e}function dt(t,e,i){return at(t,e,0,0,i,0,0)}function ct(t,e,i,o,n,r,s,a){const l=Math.sin(r),h=Math.cos(r);return t[0]=o*h,t[1]=n*l,t[2]=-o*l,t[3]=n*h,t[4]=s*o*h-a*o*l+e,t[5]=s*n*l+a*n*h+i,t}function ut(t,e){const i=gt(e);rt(0!==i,32);const o=e[0],n=e[1],r=e[2],s=e[3],a=e[4],l=e[5];return t[0]=s/i,t[1]=-n/i,t[2]=-r/i,t[3]=o/i,t[4]=(r*l-s*a)/i,t[5]=-(o*l-n*a)/i,t}function gt(t){return t[0]*t[3]-t[1]*t[2]}let pt;function ft(t){const e="matrix("+t.join(", ")+")";if(it)return e;const i=pt||(pt=document.createElement("div"));return i.style.transform=e,i.style.transform}var mt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function _t(t){const e=Rt();for(let i=0,o=t.length;i<o;++i)Pt(e,t[i]);return e}function bt(t,e,i){const o=Math.min.apply(null,t),n=Math.min.apply(null,e),r=Math.max.apply(null,t),s=Math.max.apply(null,e);return Tt(o,n,r,s,i)}function xt(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function vt(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function yt(t,e,i){let o,n;return o=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,n=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0,o*o+n*n}function Et(t,e){return St(t,e[0],e[1])}function Ct(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function St(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function wt(t,e){const i=t[0],o=t[1],n=t[2],r=t[3],s=e[0],a=e[1];let l=mt.UNKNOWN;return s<i?l|=mt.LEFT:s>n&&(l|=mt.RIGHT),a<o?l|=mt.BELOW:a>r&&(l|=mt.ABOVE),l===mt.UNKNOWN&&(l=mt.INTERSECTING),l}function Rt(){return[1/0,1/0,-1/0,-1/0]}function Tt(t,e,i,o,n){return n?(n[0]=t,n[1]=e,n[2]=i,n[3]=o,n):[t,e,i,o]}function It(t){return Tt(1/0,1/0,-1/0,-1/0,t)}function Mt(t,e){const i=t[0],o=t[1];return Tt(i,o,i,o,e)}function Lt(t,e,i,o,n){const r=It(n);return Dt(r,t,e,i,o)}function Ot(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function At(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Pt(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Dt(t,e,i,o,n){for(;i<o;i+=n)Ft(t,e[i],e[i+1]);return t}function Ft(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function kt(t,e){let i;return i=e(Gt(t)),i||(i=e(zt(t)),i||(i=e(Zt(t)),i||(i=e(Ut(t)),i||!1)))}function Nt(t){let e=0;return qt(t)||(e=Kt(t)*Bt(t)),e}function Gt(t){return[t[0],t[1]]}function zt(t){return[t[2],t[1]]}function jt(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Wt(t,e){let i;return"bottom-left"===e?i=Gt(t):"bottom-right"===e?i=zt(t):"top-left"===e?i=Ut(t):"top-right"===e?i=Zt(t):rt(!1,13),i}function Yt(t,e,i,o,n){const[r,s,a,l,h,d,c,u]=Xt(t,e,i,o);return Tt(Math.min(r,a,h,c),Math.min(s,l,d,u),Math.max(r,a,h,c),Math.max(s,l,d,u),n)}function Xt(t,e,i,o){const n=e*o[0]/2,r=e*o[1]/2,s=Math.cos(i),a=Math.sin(i),l=n*s,h=n*a,d=r*s,c=r*a,u=t[0],g=t[1];return[u-l+c,g-h-d,u-l-c,g-h+d,u+l-c,g+h+d,u+l+c,g+h-d,u-l+c,g-h-d]}function Bt(t){return t[3]-t[1]}function Vt(t,e,i){const o=i||Rt();return Ht(t,e)?(t[0]>e[0]?o[0]=t[0]:o[0]=e[0],t[1]>e[1]?o[1]=t[1]:o[1]=e[1],t[2]<e[2]?o[2]=t[2]:o[2]=e[2],t[3]<e[3]?o[3]=t[3]:o[3]=e[3]):It(o),o}function Ut(t){return[t[0],t[3]]}function Zt(t){return[t[2],t[3]]}function Kt(t){return t[2]-t[0]}function Ht(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function qt(t){return t[2]<t[0]||t[3]<t[1]}function Jt(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function $t(t,e,i){let o=!1;const n=wt(t,e),r=wt(t,i);if(n===mt.INTERSECTING||r===mt.INTERSECTING)o=!0;else{const s=t[0],a=t[1],l=t[2],h=t[3],d=e[0],c=e[1],u=i[0],g=i[1],p=(g-c)/(u-d);let f,m;r&mt.ABOVE&&!(n&mt.ABOVE)&&(f=u-(g-h)/p,o=f>=s&&f<=l),o||!(r&mt.RIGHT)||n&mt.RIGHT||(m=g-(u-l)*p,o=m>=a&&m<=h),o||!(r&mt.BELOW)||n&mt.BELOW||(f=u-(g-a)/p,o=f>=s&&f<=l),o||!(r&mt.LEFT)||n&mt.LEFT||(m=g-(u-s)*p,o=m>=a&&m<=h)}return o}function Qt(t,e,i,o){let n=[];if(o>1){const e=t[2]-t[0],i=t[3]-t[1];for(let r=0;r<o;++r)n.push(t[0]+e*r/o,t[1],t[2],t[1]+i*r/o,t[2]-e*r/o,t[3],t[0],t[3]-i*r/o)}else n=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(n,n,2);const r=[],s=[];for(let a=0,l=n.length;a<l;a+=2)r.push(n[a]),s.push(n[a+1]);return bt(r,s,i)}function te(t,e){const i=e.getExtent(),o=jt(t);if(e.canWrapX()&&(o[0]<i[0]||o[0]>=i[2])){const e=Kt(i),n=Math.floor((o[0]-i[0])/e),r=n*e;t[0]-=r,t[2]-=r}return t}function ee(t,e){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];te(t,e);const o=Kt(i);if(Kt(t)>o)return[[i[0],t[1],i[2],t[3]]];if(t[0]<i[0])return[[t[0]+o,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-o,t[3]]]}return[t]}function ie(t,e,i){return Math.min(Math.max(t,e),i)}function oe(t,e,i,o,n,r){const s=n-i,a=r-o;if(0!==s||0!==a){const l=((t-i)*s+(e-o)*a)/(s*s+a*a);l>1?(i=n,o=r):l>0&&(i+=s*l,o+=a*l)}return ne(t,e,i,o)}function ne(t,e,i,o){const n=i-t,r=o-e;return n*n+r*r}function re(t){const e=t.length;for(let o=0;o<e;o++){let i=o,n=Math.abs(t[o][o]);for(let s=o+1;s<e;s++){const e=Math.abs(t[s][o]);e>n&&(n=e,i=s)}if(0===n)return null;const r=t[i];t[i]=t[o],t[o]=r;for(let s=o+1;s<e;s++){const i=-t[s][o]/t[o][o];for(let n=o;n<e+1;n++)o==n?t[s][n]=0:t[s][n]+=i*t[o][n]}}const i=new Array(e);for(let o=e-1;o>=0;o--){i[o]=t[o][e]/t[o][o];for(let n=o-1;n>=0;n--)t[n][e]-=t[n][o]*i[o]}return i}function se(t){return t*Math.PI/180}function ae(t,e){const i=t%e;return i*e<0?i+e:i}function le(t,e,i){return t+i*(e-t)}function he(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}function de(t,e){return Math.round(he(t,e))}function ce(t,e){return Math.floor(he(t,e))}function ue(t,e){return Math.ceil(he(t,e))}const ge=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,pe=/^([a-z]*)$|^hsla?\(.*\)$/i;function fe(t){return"string"===typeof t?t:ye(t)}function me(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const _e=function(){const t=1024,e={};let i=0;return function(o){let n;if(e.hasOwnProperty(o))n=e[o];else{if(i>=t){let t=0;for(const o in e)0===(3&t++)&&(delete e[o],--i)}n=xe(o),e[o]=n,++i}return n}}();function be(t){return Array.isArray(t)?t:_e(t)}function xe(t){let e,i,o,n,r;if(pe.exec(t)&&(t=me(t)),ge.exec(t)){const s=t.length-1;let a;a=s<=4?1:2;const l=4===s||8===s;e=parseInt(t.substr(1+0*a,a),16),i=parseInt(t.substr(1+1*a,a),16),o=parseInt(t.substr(1+2*a,a),16),n=l?parseInt(t.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,i=(i<<4)+i,o=(o<<4)+o,l&&(n=(n<<4)+n)),r=[e,i,o,n/255]}else t.startsWith("rgba(")?(r=t.slice(5,-1).split(",").map(Number),ve(r)):t.startsWith("rgb(")?(r=t.slice(4,-1).split(",").map(Number),r.push(1),ve(r)):rt(!1,14);return r}function ve(t){return t[0]=ie(t[0]+.5|0,0,255),t[1]=ie(t[1]+.5|0,0,255),t[2]=ie(t[2]+.5|0,0,255),t[3]=ie(t[3],0,1),t}function ye(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let i=t[1];i!=(0|i)&&(i=i+.5|0);let o=t[2];o!=(0|o)&&(o=o+.5|0);const n=void 0===t[3]?1:Math.round(100*t[3])/100;return"rgba("+e+","+i+","+o+","+n+")"}class Ee{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];0!==(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){const o=Ce(t,e,i);return o in this.cache_?this.cache_[o]:null}set(t,e,i,o){const n=Ce(t,e,i);this.cache_[n]=o,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Ce(t,e,i){const o=i?fe(i):"null";return e+":"+t+":"+o}const Se=new Ee;var we={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Re extends W{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"===typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[we.OPACITY]=void 0!==t.opacity?t.opacity:1,rt("number"===typeof e[we.OPACITY],64),e[we.VISIBLE]=void 0===t.visible||t.visible,e[we.Z_INDEX]=t.zIndex,e[we.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[we.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[we.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[we.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=ie(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i||e.managed?i:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return k()}getLayerStatesArray(t){return k()}getExtent(){return this.get(we.EXTENT)}getMaxResolution(){return this.get(we.MAX_RESOLUTION)}getMinResolution(){return this.get(we.MIN_RESOLUTION)}getMinZoom(){return this.get(we.MIN_ZOOM)}getMaxZoom(){return this.get(we.MAX_ZOOM)}getOpacity(){return this.get(we.OPACITY)}getSourceState(){return k()}getVisible(){return this.get(we.VISIBLE)}getZIndex(){return this.get(we.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(we.EXTENT,t)}setMaxResolution(t){this.set(we.MAX_RESOLUTION,t)}setMinResolution(t){this.set(we.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(we.MAX_ZOOM,t)}setMinZoom(t){this.set(we.MIN_ZOOM,t)}setOpacity(t){rt("number"===typeof t,64),this.set(we.OPACITY,t)}setVisible(t){this.set(we.VISIBLE,t)}setZIndex(t){this.set(we.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}var Te=Re,Ie={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Me extends Te{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(we.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(we.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(A(this.sourceChangeKey_),this.sourceChangeKey_=null);const t=this.getSource();t&&(this.sourceChangeKey_=L(t,M.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise((t=>t([])))}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}render(t,e){const i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(we.MAP,t)}getMapInternal(){return this.get(we.MAP)}setMap(t){this.mapPrecomposeKey_&&(A(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(A(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=L(t,Ie.PRECOMPOSE,(function(t){const e=t,i=e.frameState.layerStatesArray,o=this.getLayerState(!1);rt(!i.some((function(t){return t.layer===o.layer})),67),i.push(o)}),this),this.mapRenderKey_=L(this,M.CHANGE,t.render,t),this.changed())}setSource(t){this.set(we.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Le(t,e){if(!t.visible)return!1;const i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;const o=e.zoom;return o>t.minZoom&&o<=t.maxZoom}var Oe=Me;function Ae(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function Pe(t,e){let i=!0;for(let o=t.length-1;o>=0;--o)if(t[o]!=e[o]){i=!1;break}return i}function De(t,e){const i=Math.cos(e),o=Math.sin(e),n=t[0]*i-t[1]*o,r=t[1]*i+t[0]*o;return t[0]=n,t[1]=r,t}function Fe(t,e){return t[0]*=e,t[1]*=e,t}function ke(t,e){if(e.canWrapX()){const i=Kt(e.getExtent()),o=Ne(t,e,i);o&&(t[0]-=o*i)}return t}function Ne(t,e,i){const o=e.getExtent();let n=0;return e.canWrapX()&&(t[0]<o[0]||t[0]>o[2])&&(i=i||Kt(o),n=Math.floor((t[0]-o[0])/i)),n}class Ge extends g{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){k()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;ct(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),ut(o,i)}forEachFeatureAtCoordinate(t,e,i,o,n,r,s,a){let l;const h=e.viewState;function d(t,e,i,o){return n.call(r,e,t?i:null,o)}const c=h.projection,u=ke(t.slice(),c),g=[[0,0]];if(c.canWrapX()&&o){const t=c.getExtent(),e=Kt(t);g.push([-e,0],[e,0])}const p=e.layerStatesArray,f=p.length,m=[],_=[];for(let x=0;x<g.length;x++)for(let o=f-1;o>=0;--o){const n=p[o],r=n.layer;if(r.hasRenderer()&&Le(n,h)&&s.call(a,r)){const o=r.getRenderer(),s=r.getSource();if(o&&s){const r=s.getWrapX()?u:t,a=d.bind(null,n.managed);_[0]=r[0]+g[x][0],_[1]=r[1]+g[x][1],l=o.forEachFeatureAtCoordinate(_,e,i,a,m)}if(l)return l}}if(0===m.length)return;const b=1/m.length;return m.forEach(((t,e)=>t.distanceSq+=e*b)),m.sort(((t,e)=>t.distanceSq-e.distanceSq)),m.some((t=>l=t.callback(t.feature,t.layer,t.geometry))),l}hasFeatureAtCoordinate(t,e,i,o,n,r){const s=this.forEachFeatureAtCoordinate(t,e,i,o,y,this,n,r);return void 0!==s}getMap(){return this.map_}renderFrame(t){k()}scheduleExpireIconCache(t){Se.canExpireCache()&&t.postRenderFunctions.push(ze)}}function ze(t,e){Se.expire()}var je=Ge;class We extends d{constructor(t,e,i,o){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=o}}var Ye=We;const Xe="ol-hidden",Be="ol-unselectable",Ve="ol-control",Ue="ol-collapsed",Ze=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Ke=["style","variant","weight","size","lineHeight","family"],He=function(t){const e=t.match(Ze);if(!e)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let o=0,n=Ke.length;o<n;++o){const t=e[o+1];void 0!==t&&(i[Ke[o]]=t)}return i.families=i.family.split(/,\s?/),i};function qe(t,e,i,o){let n;return n=i&&i.length?i.shift():it?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(n.width=t),e&&(n.height=e),n.getContext("2d",o)}function Je(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function $e(t,e){const i=e.parentNode;i&&i.replaceChild(t,e)}function Qe(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function ti(t){while(t.lastChild)t.removeChild(t.lastChild)}function ei(t,e){const i=t.childNodes;for(let o=0;1;++o){const n=i[o],r=e[o];if(!n&&!r)break;n!==r&&(n?r?t.insertBefore(r,n):(t.removeChild(n),--o):t.appendChild(r))}}const ii="10px sans-serif",oi="#000",ni="round",ri=[],si=0,ai="round",li=10,hi="#000",di="center",ci="middle",ui=[0,0,0,0],gi=1,pi=new W;let fi,mi=null;const _i={},bi=function(){const t=100,e="32px ",i=["monospace","serif"],o=i.length,n="wmytzilWMYTZIL@#/&?$%10";let r,s;function a(t,r,a){let l=!0;for(let h=0;h<o;++h){const o=i[h];if(s=yi(t+" "+r+" "+e+o,n),a!=o){const i=yi(t+" "+r+" "+e+a+","+o,n);l=l&&i!=s}}return!!l}function l(){let e=!0;const i=pi.getKeys();for(let o=0,n=i.length;o<n;++o){const n=i[o];pi.get(n)<t&&(a.apply(this,n.split("\n"))?(w(_i),mi=null,fi=void 0,pi.set(n,t)):(pi.set(n,pi.get(n)+1,!0),e=!1))}e&&(clearInterval(r),r=void 0)}return function(e){const i=He(e);if(!i)return;const o=i.families;for(let n=0,s=o.length;n<s;++n){const e=o[n],s=i.style+"\n"+i.weight+"\n"+e;void 0===pi.get(s)&&(pi.set(s,t,!0),a(i.style,i.weight,e)||(pi.set(s,0,!0),void 0===r&&(r=setInterval(l,32))))}}}(),xi=function(){let t;return function(e){let i=_i[e];if(void 0==i){if(it){const t=He(e),o=vi(e,"g"),n=isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight);i=n*(o.actualBoundingBoxAscent+o.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),i=t.offsetHeight,document.body.removeChild(t);_i[e]=i}return i}}();function vi(t,e){return mi||(mi=qe(1,1)),t!=fi&&(mi.font=t,fi=mi.font),mi.measureText(e)}function yi(t,e){return vi(t,e).width}function Ei(t,e,i){if(e in i)return i[e];const o=e.split("\n").reduce(((e,i)=>Math.max(e,yi(t,i))),0);return i[e]=o,o}function Ci(t,e){const i=[],o=[],n=[];let r=0,s=0,a=0,l=0;for(let h=0,d=e.length;h<=d;h+=2){const c=e[h];if("\n"===c||h===d){r=Math.max(r,s),n.push(s),s=0,a+=l;continue}const u=e[h+1]||t.font,g=yi(u,c);i.push(g),s+=g;const p=xi(u);o.push(p),l=Math.max(l,p)}return{width:r,height:a,widths:i,heights:o,lineWidths:n}}function Si(t,e,i,o,n,r,s,a,l,h,d){t.save(),1!==i&&(t.globalAlpha*=i),e&&t.setTransform.apply(t,e),o.contextInstructions?(t.translate(l,h),t.scale(d[0],d[1]),wi(o,t)):d[0]<0||d[1]<0?(t.translate(l,h),t.scale(d[0],d[1]),t.drawImage(o,n,r,s,a,0,0,s,a)):t.drawImage(o,n,r,s,a,l,h,s*d[0],a*d[1]),t.restore()}function wi(t,e){const i=t.contextInstructions;for(let o=0,n=i.length;o<n;o+=2)Array.isArray(i[o+1])?e[i[o]].apply(e,i[o+1]):e[i[o]]=i[o+1]}class Ri extends je{constructor(t){super(t),this.fontChangeListenerKey_=L(pi,c.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Be+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const o=new Ye(t,void 0,e);i.dispatchEvent(o)}}disposeInternal(){A(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(Ie.PRECOMPOSE,t);const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),i=t.viewState;this.children_.length=0;const o=[];let n=null;for(let r=0,s=e.length;r<s;++r){const s=e[r];t.layerIndex=r;const a=s.layer,l=a.getSourceState();if(!Le(s,i)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const h=a.render(t,n);h&&(h!==n&&(this.children_.push(h),n=h),"getDeclutter"in a&&o.push(a))}for(let r=o.length-1;r>=0;--r)o[r].renderDeclutter(t);ei(this.element_,this.children_),this.dispatchRenderEvent(Ie.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}}var Ti=Ri;class Ii extends d{constructor(t,e){super(t),this.layer=e}}const Mi={LAYERS:"layers"};class Li extends Te{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Mi.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new H(i.slice(),{unique:!0}):rt("function"===typeof i.getArray,43):i=new H(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(A),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(L(t,V.ADD,this.handleLayersAdd_,this),L(t,V.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(A);w(this.listenerKeys_);const e=t.getArray();for(let i=0,o=e.length;i<o;i++){const t=e[i];this.registerLayerListeners_(t),this.dispatchEvent(new Ii("addlayer",t))}this.changed()}registerLayerListeners_(t){const e=[L(t,c.PROPERTYCHANGE,this.handleLayerChange_,this),L(t,M.CHANGE,this.handleLayerChange_,this)];t instanceof Li&&e.push(L(t,"addlayer",this.handleLayerGroupAdd_,this),L(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[G(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Ii("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Ii("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Ii("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=G(e);this.listenerKeys_[i].forEach(A),delete this.listenerKeys_[i],this.dispatchEvent(new Ii("removelayer",e)),this.changed()}getLayers(){return this.get(Mi.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,i=t.length;e<i;++e)this.dispatchEvent(new Ii("removelayer",t[e]))}this.set(Mi.LAYERS,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],i=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const o=this.getLayerState();let n=o.zIndex;t||void 0!==o.zIndex||(n=0);for(let r=i,s=e.length;r<s;r++){const t=e[r];t.opacity*=o.opacity,t.visible=t.visible&&o.visible,t.maxResolution=Math.min(t.maxResolution,o.maxResolution),t.minResolution=Math.max(t.minResolution,o.minResolution),t.minZoom=Math.max(t.minZoom,o.minZoom),t.maxZoom=Math.min(t.maxZoom,o.maxZoom),void 0!==o.extent&&(void 0!==t.extent?t.extent=Vt(t.extent,o.extent):t.extent=o.extent),void 0===t.zIndex&&(t.zIndex=n)}return e}getSourceState(){return"ready"}}var Oi=Li;class Ai extends d{constructor(t,e,i){super(t),this.map=e,this.frameState=void 0!==i?i:null}}var Pi=Ai;class Di extends Pi{constructor(t,e,i,o,n,r){super(t,e,n),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==o&&o,this.activePointers=r}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}var Fi=Di,ki={SINGLECLICK:"singleclick",CLICK:M.CLICK,DBLCLICK:M.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ni={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Gi extends I{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=L(i,Ni.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=L(i,Ni.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(M.TOUCHMOVE,this.boundHandleTouchMove_,!!nt&&{passive:!1})}emulateClick_(t){let e=new Fi(ki.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Fi(ki.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const e=new Fi(ki.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==ki.POINTERUP||e.type==ki.POINTERCANCEL){delete this.trackedTouches_[i];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=ki.POINTERDOWN&&e.type!=ki.POINTERMOVE||(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Fi(ki.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(A),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new Fi(ki.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.down_={};for(const i in t){const e=t[i];this.down_[i]="function"===typeof e?C:e}if(0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(L(t,ki.POINTERMOVE,this.handlePointerMove_,this),L(t,ki.POINTERUP,this.handlePointerUp_,this),L(this.element_,ki.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push(L(this.element_.getRootNode(),ki.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Fi(ki.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Fi(ki.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"===typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(A(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(M.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(A(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(A),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var zi=Gi,ji={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Wi={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};const Yi=1/0;class Xi{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,w(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const o=this.keyFunction_(i);return delete this.queuedElements_[o],i}enqueue(t){rt(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=Yi&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,o=e.length,n=e[t],r=i[t],s=t;while(t<o>>1){const n=this.getLeftChildIndex_(t),r=this.getRightChildIndex_(t),s=r<o&&i[r]<i[n]?r:n;e[t]=e[s],i[t]=i[s],t=s}e[t]=n,i[t]=r,this.siftDown_(s,t)}siftDown_(t,e){const i=this.elements_,o=this.priorities_,n=i[e],r=o[e];while(e>t){const t=this.getParentIndex_(e);if(!(o[t]>r))break;i[e]=i[t],o[e]=o[t],e=t}i[e]=n,o[e]=r}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let o=0;const n=e.length;let r,s,a;for(s=0;s<n;++s)r=e[s],a=t(r),a==Yi?delete this.queuedElements_[this.keyFunction_(r)]:(i[o]=a,e[o++]=r);e.length=o,i.length=o,this.heapify_()}}var Bi=Xi,Vi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Ui extends Bi{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);if(e){const e=t[0];e.addEventListener(M.CHANGE,this.boundHandleTileChange_)}return e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(i===Vi.LOADED||i===Vi.ERROR||i===Vi.EMPTY){i!==Vi.ERROR&&e.removeEventListener(M.CHANGE,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i,o,n,r=0;while(this.tilesLoading_<t&&r<e&&this.getCount()>0)o=this.dequeue()[0],n=o.getKey(),i=o.getState(),i!==Vi.IDLE||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++r,o.load())}}var Zi=Ui;function Ki(t,e,i,o,n){if(!t||!(i in t.wantedTiles))return Yi;if(!t.wantedTiles[i][e.getKey()])return Yi;const r=t.viewState.center,s=o[0]-r[0],a=o[1]-r[1];return 65536*Math.log(n)+Math.sqrt(s*s+a*a)/n}var Hi={ANIMATING:0,INTERACTING:1},qi={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};const Ji=42,$i=256;const Qi={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class to{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Qi[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}var eo=to;const io=6378137,oo=Math.PI*io,no=[-oo,-oo,oo,oo],ro=[-180,-85,180,85],so=io*Math.log(Math.tan(Math.PI/2));class ao extends eo{constructor(t){super({code:t,units:"m",extent:no,global:!0,worldExtent:ro,getPointResolution:function(t,e){return t/Math.cosh(e[1]/io)}})}}const lo=[new ao("EPSG:3857"),new ao("EPSG:102100"),new ao("EPSG:102113"),new ao("EPSG:900913"),new ao("http://www.opengis.net/def/crs/EPSG/0/3857"),new ao("http://www.opengis.net/gml/srs/epsg.xml#3857")];function ho(t,e,i){const o=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(o));for(let n=0;n<o;n+=i){e[n]=oo*t[n]/180;let i=io*Math.log(Math.tan(Math.PI*(+t[n+1]+90)/360));i>so?i=so:i<-so&&(i=-so),e[n+1]=i}return e}function co(t,e,i){const o=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(o));for(let n=0;n<o;n+=i)e[n]=180*t[n]/oo,e[n+1]=360*Math.atan(Math.exp(t[n+1]/io))/Math.PI-90;return e}const uo=6378137,go=[-180,-90,180,90],po=Math.PI*uo/180;class fo extends eo{constructor(t,e){super({code:t,units:"degrees",extent:go,axisOrientation:e,global:!0,metersPerUnit:po,worldExtent:go})}}const mo=[new fo("CRS:84"),new fo("EPSG:4326","neu"),new fo("urn:ogc:def:crs:OGC:1.3:CRS84"),new fo("urn:ogc:def:crs:OGC:2:84"),new fo("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new fo("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new fo("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let _o={};function bo(t){return _o[t]||_o[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function xo(t,e){_o[t]=e}let vo={};function yo(t,e,i){const o=t.getCode(),n=e.getCode();o in vo||(vo[o]={}),vo[o][n]=i}function Eo(t,e){let i;return t in vo&&e in vo[t]&&(i=vo[t][e]),i}const Co=6371008.8;function So(t,e,i){i=i||Co;const o=se(t[1]),n=se(e[1]),r=(n-o)/2,s=se(e[0]-t[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(s)*Math.sin(s)*Math.cos(o)*Math.cos(n);return 2*i*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}let wo=!0;function Ro(t){const e=void 0===t||t;wo=!e}function To(t,e,i){if(void 0!==e)for(let o=0,n=t.length;o<n;++o)e[o]=t[o];else e=t.slice();return e}function Io(t,e,i){if(void 0!==e&&t!==e){for(let i=0,o=t.length;i<o;++i)e[i]=t[i];t=e}return t}function Mo(t){xo(t.getCode(),t),yo(t,t,To)}function Lo(t){t.forEach(Mo)}function Oo(t){return"string"===typeof t?bo(t):t||null}function Ao(t,e,i,o){let n;t=Oo(t);const r=t.getPointResolutionFunc();if(r){if(n=r(e,i),o&&o!==t.getUnits()){const e=t.getMetersPerUnit();e&&(n=n*e/Qi[o])}}else{const r=t.getUnits();if("degrees"==r&&!o||"degrees"==o)n=e;else{const s=No(t,Oo("EPSG:4326"));if(s===Io&&"degrees"!==r)n=e*t.getMetersPerUnit();else{let t=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];t=s(t,t,2);const o=So(t.slice(0,2),t.slice(2,4)),r=So(t.slice(4,6),t.slice(6,8));n=(o+r)/2}const a=o?Qi[o]:t.getMetersPerUnit();void 0!==a&&(n/=a)}}return n}function Po(t){Lo(t),t.forEach((function(e){t.forEach((function(t){e!==t&&yo(e,t,To)}))}))}function Do(t,e,i,o){t.forEach((function(t){e.forEach((function(e){yo(t,e,i),yo(e,t,o)}))}))}function Fo(t,e){return t?"string"===typeof t?Oo(t):t:Oo(e)}function ko(t,e){if(t===e)return!0;const i=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return i;{const o=No(t,e);return o===To&&i}}function No(t,e){const i=t.getCode(),o=e.getCode();let n=Eo(i,o);return n||(n=Io),n}function Go(t,e){const i=Oo(t),o=Oo(e);return No(i,o)}function zo(t,e,i){const o=Go(e,i);return o(t,void 0,t.length)}function jo(t,e,i,o){const n=Go(e,i);return Qt(t,n,void 0,o)}let Wo=null;function Yo(){return Wo}function Xo(t,e){return Wo?zo(t,e,Wo):t}function Bo(t,e){return Wo?zo(t,Wo,e):(wo&&!Pe(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(wo=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Vo(t,e){return Wo?jo(t,e,Wo):t}function Uo(t,e){return Wo?jo(t,Wo,e):t}function Zo(t,e){if(!Wo)return t;const i=Oo(e).getUnits(),o=Wo.getUnits();return i&&o?t*Qi[i]/Qi[o]:t}function Ko(){Po(lo),Po(mo),Do(mo,lo,ho,co)}function Ho(t,e,i){return function(o,n,r,s,a){if(!o)return;if(!n&&!e)return o;const l=e?0:r[0]*n,h=e?0:r[1]*n,d=a?a[0]:0,c=a?a[1]:0;let u=t[0]+l/2+d,g=t[2]-l/2+d,p=t[1]+h/2+c,f=t[3]-h/2+c;u>g&&(u=(g+u)/2,g=u),p>f&&(p=(f+p)/2,f=p);let m=ie(o[0],u,g),_=ie(o[1],p,f);if(s&&i&&n){const t=30*n;m+=-t*Math.log(1+Math.max(0,u-o[0])/t)+t*Math.log(1+Math.max(0,o[0]-g)/t),_+=-t*Math.log(1+Math.max(0,p-o[1])/t)+t*Math.log(1+Math.max(0,o[1]-f)/t)}return[m,_]}}function qo(t){return t}function Jo(t,e,i,o){const n=Kt(e)/i[0],r=Bt(e)/i[1];return o?Math.min(t,Math.max(n,r)):Math.min(t,Math.min(n,r))}function $o(t,e,i){let o=Math.min(t,e);const n=50;return o*=Math.log(1+n*Math.max(0,t/e-1))/n+1,i&&(o=Math.max(o,i),o/=Math.log(1+n*Math.max(0,i/t-1))/n+1),ie(o,i/2,2*e)}function Qo(t,e,i,o){return e=void 0===e||e,function(n,r,s,a){if(void 0!==n){const l=t[0],h=t[t.length-1],d=i?Jo(l,i,s,o):l;if(a)return e?$o(n,d,h):ie(n,h,d);const c=Math.min(d,n),u=Math.floor(m(t,c,r));return t[u]>d&&u<t.length-1?t[u+1]:t[u]}}}function tn(t,e,i,o,n,r){return o=void 0===o||o,i=void 0!==i?i:0,function(s,a,l,h){if(void 0!==s){const d=n?Jo(e,n,l,r):e;if(h)return o?$o(s,d,i):ie(s,i,d);const c=1e-9,u=Math.ceil(Math.log(e/d)/Math.log(t)-c),g=-a*(.5-c)+.5,p=Math.min(d,s),f=Math.floor(Math.log(e/p)/Math.log(t)+g),m=Math.max(u,f),_=e/Math.pow(t,m);return ie(_,i,d)}}}function en(t,e,i,o,n){return i=void 0===i||i,function(r,s,a,l){if(void 0!==r){const s=o?Jo(t,o,a,n):t;return i&&l?$o(r,s,e):ie(r,e,s)}}}function on(t){return void 0!==t?0:void 0}function nn(t){return void 0!==t?t:void 0}function rn(t){const e=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?(t=Math.floor(t/e+.5)*e,t):void 0}}function sn(t){return t=t||se(5),function(e,i){return i?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}function an(t){return Math.pow(t,3)}function ln(t){return 1-an(1-t)}function hn(t){return 3*t*t-2*t*t*t}function dn(t){return t}function cn(t,e,i,o,n,r){r=r||[];let s=0;for(let a=e;a<i;a+=o){const e=t[a],i=t[a+1];r[s++]=n[0]*e+n[2]*i+n[4],r[s++]=n[1]*e+n[3]*i+n[5]}return r&&r.length!=s&&(r.length=s),r}function un(t,e,i,o,n,r,s){s=s||[];const a=Math.cos(n),l=Math.sin(n),h=r[0],d=r[1];let c=0;for(let u=e;u<i;u+=o){const e=t[u]-h,i=t[u+1]-d;s[c++]=h+e*a-i*l,s[c++]=d+e*l+i*a;for(let n=u+2;n<u+o;++n)s[c++]=t[n]}return s&&s.length!=c&&(s.length=c),s}function gn(t,e,i,o,n,r,s,a){a=a||[];const l=s[0],h=s[1];let d=0;for(let c=e;c<i;c+=o){const e=t[c]-l,i=t[c+1]-h;a[d++]=l+n*e,a[d++]=h+r*i;for(let n=c+2;n<c+o;++n)a[d++]=t[n]}return a&&a.length!=d&&(a.length=d),a}function pn(t,e,i,o,n,r,s){s=s||[];let a=0;for(let l=e;l<i;l+=o){s[a++]=t[l]+n,s[a++]=t[l+1]+r;for(let e=l+2;e<l+o;++e)s[a++]=t[e]}return s&&s.length!=a&&(s.length=a),s}Ko();const fn=st();class mn extends W{constructor(){super(),this.extent_=Rt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=S((function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);const o=this.clone();return o.applyTransform(i),o.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return k()}closestPointXY(t,e,i,o){return k()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return k()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&It(t),this.extentRevision_=this.getRevision()}return Jt(this.extent_,t)}rotate(t,e){k()}scale(t,e,i){k()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return k()}getType(){return k()}applyTransform(t){k()}intersectsExtent(t){return k()}translate(t,e){k()}transform(t,e){const i=Oo(t),o="tile-pixels"==i.getUnits()?function(t,o,n){const r=i.getExtent(),s=i.getWorldExtent(),a=Bt(s)/Bt(r);return ct(fn,s[0],s[3],a,-a,0,0,0),cn(t,0,t.length,n,fn,o),Go(i,e)(t,o,n)}:Go(i,e);return this.applyTransform(o),this}}var _n=mn;class bn extends _n{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return Lt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return k()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t),i=e.getFlatCoordinates();return i.length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=vn(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){k()}setLayout(t,e,i){let o;if(t)o=vn(t);else{for(let t=0;t<i;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}o=e.length,t=xn(o)}this.layout=t,this.stride=o}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const o=this.getStride();un(i,0,i.length,o,t,e,i),this.changed()}}scale(t,e,i){void 0===e&&(e=t),i||(i=jt(this.getExtent()));const o=this.getFlatCoordinates();if(o){const n=this.getStride();gn(o,0,o.length,n,t,e,i,o),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const o=this.getStride();pn(i,0,i.length,o,t,e,i),this.changed()}}}function xn(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function vn(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function yn(t,e,i){const o=t.getFlatCoordinates();if(o){const n=t.getStride();return cn(o,0,o.length,n,e,i)}return null}var En=bn;function Cn(t,e,i,o,n,r,s){const a=t[e],l=t[e+1],h=t[i]-a,d=t[i+1]-l;let c;if(0===h&&0===d)c=e;else{const u=((n-a)*h+(r-l)*d)/(h*h+d*d);if(u>1)c=i;else{if(u>0){for(let n=0;n<o;++n)s[n]=le(t[e+n],t[i+n],u);return void(s.length=o)}c=e}}for(let u=0;u<o;++u)s[u]=t[c+u];s.length=o}function Sn(t,e,i,o,n){let r=t[e],s=t[e+1];for(e+=o;e<i;e+=o){const i=t[e],o=t[e+1],a=ne(r,s,i,o);a>n&&(n=a),r=i,s=o}return n}function wn(t,e,i,o,n){for(let r=0,s=i.length;r<s;++r){const s=i[r];n=Sn(t,e,s,o,n),e=s}return n}function Rn(t,e,i,o,n){for(let r=0,s=i.length;r<s;++r){const s=i[r];n=wn(t,e,s,o,n),e=s[s.length-1]}return n}function Tn(t,e,i,o,n,r,s,a,l,h,d){if(e==i)return h;let c,u;if(0===n){if(u=ne(s,a,t[e],t[e+1]),u<h){for(c=0;c<o;++c)l[c]=t[e+c];return l.length=o,u}return h}d=d||[NaN,NaN];let g=e+o;while(g<i)if(Cn(t,g-o,g,o,s,a,d),u=ne(s,a,d[0],d[1]),u<h){for(h=u,c=0;c<o;++c)l[c]=d[c];l.length=o,g+=o}else g+=o*Math.max((Math.sqrt(u)-Math.sqrt(h))/n|0,1);if(r&&(Cn(t,i-o,e,o,s,a,d),u=ne(s,a,d[0],d[1]),u<h)){for(h=u,c=0;c<o;++c)l[c]=d[c];l.length=o}return h}function In(t,e,i,o,n,r,s,a,l,h,d){d=d||[NaN,NaN];for(let c=0,u=i.length;c<u;++c){const u=i[c];h=Tn(t,e,u,o,n,r,s,a,l,h,d),e=u}return h}function Mn(t,e,i,o,n,r,s,a,l,h,d){d=d||[NaN,NaN];for(let c=0,u=i.length;c<u;++c){const u=i[c];h=In(t,e,u,o,n,r,s,a,l,h,d),e=u[u.length-1]}return h}function Ln(t,e,i,o){for(let n=0,r=i.length;n<r;++n)t[e++]=i[n];return e}function On(t,e,i,o){for(let n=0,r=i.length;n<r;++n){const r=i[n];for(let i=0;i<o;++i)t[e++]=r[i]}return e}function An(t,e,i,o,n){n=n||[];let r=0;for(let s=0,a=i.length;s<a;++s){const a=On(t,e,i[s],o);n[r++]=a,e=a}return n.length=r,n}function Pn(t,e,i,o,n){n=n||[];let r=0;for(let s=0,a=i.length;s<a;++s){const a=An(t,e,i[s],o,n[r]);0===a.length&&(a[0]=e),n[r++]=a,e=a[a.length-1]}return n.length=r,n}function Dn(t,e,i,o,n,r,s){const a=(i-e)/o;if(a<3){for(;e<i;e+=o)r[s++]=t[e],r[s++]=t[e+1];return s}const l=new Array(a);l[0]=1,l[a-1]=1;const h=[e,i-o];let d=0;while(h.length>0){const i=h.pop(),r=h.pop();let s=0;const a=t[r],c=t[r+1],u=t[i],g=t[i+1];for(let e=r+o;e<i;e+=o){const i=t[e],o=t[e+1],n=oe(i,o,a,c,u,g);n>s&&(d=e,s=n)}s>n&&(l[(d-e)/o]=1,r+o<d&&h.push(r,d),d+o<i&&h.push(d,i))}for(let c=0;c<a;++c)l[c]&&(r[s++]=t[e+c*o],r[s++]=t[e+c*o+1]);return s}function Fn(t,e,i,o,n,r,s,a){for(let l=0,h=i.length;l<h;++l){const h=i[l];s=Dn(t,e,h,o,n,r,s),a.push(s),e=h}return s}function kn(t,e){return e*Math.round(t/e)}function Nn(t,e,i,o,n,r,s){if(e==i)return s;let a,l,h=kn(t[e],n),d=kn(t[e+1],n);e+=o,r[s++]=h,r[s++]=d;do{if(a=kn(t[e],n),l=kn(t[e+1],n),e+=o,e==i)return r[s++]=a,r[s++]=l,s}while(a==h&&l==d);while(e<i){const i=kn(t[e],n),c=kn(t[e+1],n);if(e+=o,i==a&&c==l)continue;const u=a-h,g=l-d,p=i-h,f=c-d;u*f==g*p&&(u<0&&p<u||u==p||u>0&&p>u)&&(g<0&&f<g||g==f||g>0&&f>g)?(a=i,l=c):(r[s++]=a,r[s++]=l,h=a,d=l,a=i,l=c)}return r[s++]=a,r[s++]=l,s}function Gn(t,e,i,o,n,r,s,a){for(let l=0,h=i.length;l<h;++l){const h=i[l];s=Nn(t,e,h,o,n,r,s),a.push(s),e=h}return s}function zn(t,e,i,o,n,r,s,a){for(let l=0,h=i.length;l<h;++l){const h=i[l],d=[];s=Gn(t,e,h,o,n,r,s,d),a.push(d),e=h[h.length-1]}return s}function jn(t,e,i,o,n){n=void 0!==n?n:[];let r=0;for(let s=e;s<i;s+=o)n[r++]=t.slice(s,s+o);return n.length=r,n}function Wn(t,e,i,o,n){n=void 0!==n?n:[];let r=0;for(let s=0,a=i.length;s<a;++s){const a=i[s];n[r++]=jn(t,e,a,o,n[r]),e=a}return n.length=r,n}function Yn(t,e,i,o,n){n=void 0!==n?n:[];let r=0;for(let s=0,a=i.length;s<a;++s){const a=i[s];n[r++]=1===a.length&&a[0]===e?[]:Wn(t,e,a,o,n[r]),e=a[a.length-1]}return n.length=r,n}function Xn(t,e,i,o){let n=0,r=t[i-o],s=t[i-o+1];for(;e<i;e+=o){const i=t[e],o=t[e+1];n+=s*i-r*o,r=i,s=o}return n/2}function Bn(t,e,i,o){let n=0;for(let r=0,s=i.length;r<s;++r){const s=i[r];n+=Xn(t,e,s,o),e=s}return n}function Vn(t,e,i,o){let n=0;for(let r=0,s=i.length;r<s;++r){const s=i[r];n+=Bn(t,e,s,o),e=s[s.length-1]}return n}class Un extends En{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new Un(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,o){return o<yt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Sn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Tn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,o))}getArea(){return Xn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return jn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=Dn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Un(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=On(this.flatCoordinates,0,t,this.stride),this.changed()}}var Zn=Un;class Kn extends En{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Kn(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,o){const n=this.flatCoordinates,r=ne(t,e,n[0],n[1]);if(r<o){const t=this.stride;for(let e=0;e<t;++e)i[e]=n[e];return i.length=t,r}return o}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return Mt(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return St(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ln(this.flatCoordinates,0,t,this.stride),this.changed()}}var Hn=Kn;function qn(t,e,i,o,n){const r=kt(n,(function(n){return!Jn(t,e,i,o,n[0],n[1])}));return!r}function Jn(t,e,i,o,n,r){let s=0,a=t[i-o],l=t[i-o+1];for(;e<i;e+=o){const i=t[e],o=t[e+1];l<=r?o>r&&(i-a)*(r-l)-(n-a)*(o-l)>0&&s++:o<=r&&(i-a)*(r-l)-(n-a)*(o-l)<0&&s--,a=i,l=o}return 0!==s}function $n(t,e,i,o,n,r){if(0===i.length)return!1;if(!Jn(t,e,i[0],o,n,r))return!1;for(let s=1,a=i.length;s<a;++s)if(Jn(t,i[s-1],i[s],o,n,r))return!1;return!0}function Qn(t,e,i,o,n,r){if(0===i.length)return!1;for(let s=0,a=i.length;s<a;++s){const a=i[s];if($n(t,e,a,o,n,r))return!0;e=a[a.length-1]}return!1}function tr(t,e,i,o,n,r,s){let a,l,h,d,c,u,g;const p=n[r+1],m=[];for(let f=0,x=i.length;f<x;++f){const n=i[f];for(d=t[n-o],u=t[n-o+1],a=e;a<n;a+=o)c=t[a],g=t[a+1],(p<=u&&g<=p||u<=p&&p<=g)&&(h=(p-u)/(g-u)*(c-d)+d,m.push(h)),d=c,u=g}let _=NaN,b=-1/0;for(m.sort(f),d=m[0],a=1,l=m.length;a<l;++a){c=m[a];const n=Math.abs(c-d);n>b&&(h=(d+c)/2,$n(t,e,i,o,h,p)&&(_=h,b=n)),d=c}return isNaN(_)&&(_=n[r]),s?(s.push(_,p,b),s):[_,p,b]}function er(t,e,i,o,n){let r=[];for(let s=0,a=i.length;s<a;++s){const a=i[s];r=tr(t,e,a,o,n,2*s,r),e=a[a.length-1]}return r}function ir(t,e,i,o,n){let r;for(e+=o;e<i;e+=o)if(r=n(t.slice(e-o,e),t.slice(e,e+o)),r)return r;return!1}function or(t,e,i,o,n){const r=Dt(Rt(),t,e,i,o);return!!Ht(n,r)&&(!!Ct(n,r)||(r[0]>=n[0]&&r[2]<=n[2]||(r[1]>=n[1]&&r[3]<=n[3]||ir(t,e,i,o,(function(t,e){return $t(n,t,e)})))))}function nr(t,e,i,o,n){for(let r=0,s=i.length;r<s;++r){if(or(t,e,i[r],o,n))return!0;e=i[r]}return!1}function rr(t,e,i,o,n){return!!or(t,e,i,o,n)||(!!Jn(t,e,i,o,n[0],n[1])||(!!Jn(t,e,i,o,n[0],n[3])||(!!Jn(t,e,i,o,n[2],n[1])||!!Jn(t,e,i,o,n[2],n[3]))))}function sr(t,e,i,o,n){if(!rr(t,e,i[0],o,n))return!1;if(1===i.length)return!0;for(let r=1,s=i.length;r<s;++r)if(qn(t,i[r-1],i[r],o,n)&&!or(t,i[r-1],i[r],o,n))return!1;return!0}function ar(t,e,i,o,n){for(let r=0,s=i.length;r<s;++r){const s=i[r];if(sr(t,e,s,o,n))return!0;e=s[s.length-1]}return!1}function lr(t,e,i,o){while(e<i-o){for(let n=0;n<o;++n){const r=t[e+n];t[e+n]=t[i-o+n],t[i-o+n]=r}e+=o,i-=o}}function hr(t,e,i,o){let n=0,r=t[i-o],s=t[i-o+1];for(;e<i;e+=o){const i=t[e],o=t[e+1];n+=(i-r)*(o+s),r=i,s=o}return 0===n?void 0:n>0}function dr(t,e,i,o,n){n=void 0!==n&&n;for(let r=0,s=i.length;r<s;++r){const s=i[r],a=hr(t,e,s,o);if(0===r){if(n&&a||!n&&!a)return!1}else if(n&&!a||!n&&a)return!1;e=s}return!0}function cr(t,e,i,o,n){for(let r=0,s=i.length;r<s;++r){const s=i[r];if(!dr(t,e,s,o,n))return!1;s.length&&(e=s[s.length-1])}return!0}function ur(t,e,i,o,n){n=void 0!==n&&n;for(let r=0,s=i.length;r<s;++r){const s=i[r],a=hr(t,e,s,o),l=0===r?n&&a||!n&&!a:n&&!a||!n&&a;l&&lr(t,e,s,o),e=s}return e}function gr(t,e,i,o,n){for(let r=0,s=i.length;r<s;++r)e=ur(t,e,i[r],o,n);return e}class pr extends En{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?b(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new pr(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,o){return o<yt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wn(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),In(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,o))}containsXY(t,e){return $n(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return Bn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),ur(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Wn(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=jt(this.getExtent());this.flatInteriorPoint_=tr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Hn(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Zn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,o=[];let n=0;for(let r=0,s=i.length;r<s;++r){const s=i[r],a=new Zn(e.slice(n,s),t);o.push(a),n=s}return o}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;dr(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ur(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Gn(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new pr(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return sr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=An(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}var fr=pr;function mr(t){const e=t[0],i=t[1],o=t[2],n=t[3],r=[e,i,e,n,o,n,o,i,e,i];return new pr(r,"XY",[r.length])}const _r=0;class br extends W{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Fo(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Ro(),t.center&&(t.center=Bo(t.center,this.projection_)),t.extent&&(t.extent=Uo(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const s in qi)delete e[s];this.setProperties(e,!0);const i=yr(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const o=vr(t),n=i.constraint,r=Er(t);this.constraints_={center:o,resolution:n,rotation:r},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenter();if(i){const o=t||[0,0,0,0];e=e||[0,0,0,0];const n=this.getResolution(),r=n/2*(o[3]-e[3]+e[1]-o[1]),s=n/2*(o[0]-e[0]+e[2]-o[2]);this.setCenterInternal([i[0]+r,i[1]-s])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i<e.length;++i){let t=arguments[i];t.center&&(t=Object.assign({},t),t.center=Bo(t.center,this.getProjection())),t.anchor&&(t=Object.assign({},t),t.anchor=Bo(t.anchor,this.getProjection())),e[i]=t}this.animateInternal.apply(this,e)}animateInternal(t){let e,i=arguments.length;i>1&&"function"===typeof arguments[i-1]&&(e=arguments[i-1],--i);let o=0;for(;o<i&&!this.isDef();++o){const t=arguments[o];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(o===i)return void(e&&xr(e,!0));let n=Date.now(),r=this.targetCenter_.slice(),s=this.targetResolution_,a=this.targetRotation_;const l=[];for(;o<i;++o){const t=arguments[o],i={start:n,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||hn,callback:e};if(t.center&&(i.sourceCenter=r,i.targetCenter=t.center.slice(),r=i.targetCenter),void 0!==t.zoom?(i.sourceResolution=s,i.targetResolution=this.getResolutionForZoom(t.zoom),s=i.targetResolution):t.resolution&&(i.sourceResolution=s,i.targetResolution=t.resolution,s=i.targetResolution),void 0!==t.rotation){i.sourceRotation=a;const e=ae(t.rotation-a+Math.PI,2*Math.PI)-Math.PI;i.targetRotation=a+e,a=i.targetRotation}Cr(i)?i.complete=!0:n+=i.duration,l.push(i)}this.animations_.push(l),this.setHint(Hi.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Hi.ANIMATING]>0}getInteracting(){return this.hints_[Hi.INTERACTING]>0}cancelAnimations(){let t;this.setHint(Hi.ANIMATING,-this.hints_[Hi.ANIMATING]);for(let e=0,i=this.animations_.length;e<i;++e){const i=this.animations_[e];if(i[0].callback&&xr(i[0].callback,!1),!t)for(let e=0,o=i.length;e<o;++e){const o=i[e];if(!o.complete){t=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const o=this.animations_[i];let n=!0;for(let i=0,r=o.length;i<r;++i){const r=o[i];if(r.complete)continue;const s=t-r.start;let a=r.duration>0?s/r.duration:1;a>=1?(r.complete=!0,a=1):n=!1;const l=r.easing(a);if(r.sourceCenter){const t=r.sourceCenter[0],e=r.sourceCenter[1],i=r.targetCenter[0],o=r.targetCenter[1];this.nextCenter_=r.targetCenter;const n=t+l*(i-t),s=e+l*(o-e);this.targetCenter_=[n,s]}if(r.sourceResolution&&r.targetResolution){const t=1===l?r.targetResolution:r.sourceResolution+l*(r.targetResolution-r.sourceResolution);if(r.anchor){const e=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(i,r.anchor)}this.nextResolution_=r.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==r.sourceRotation&&void 0!==r.targetRotation){const t=1===l?ae(r.targetRotation+Math.PI,2*Math.PI)-Math.PI:r.sourceRotation+l*(r.targetRotation-r.sourceRotation);if(r.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,r.anchor)}this.nextRotation_=r.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!r.complete)break}if(n){this.animations_[i]=null,this.setHint(Hi.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=o[0].callback;t&&xr(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const o=this.getCenterInternal();return void 0!==o&&(i=[o[0]-e[0],o[1]-e[1]],De(i,t-this.getRotation()),Ae(i,e)),i}calculateCenterZoom(t,e){let i;const o=this.getCenterInternal(),n=this.getResolution();if(void 0!==o&&void 0!==n){const r=e[0]-t*(e[0]-o[0])/n,s=e[1]-t*(e[1]-o[1])/n;i=[r,s]}return i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],o=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(o*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?Xo(t,this.getProjection()):t}getCenterInternal(){return this.get(qi.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return Vo(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();rt(e,1);const i=this.getResolution();rt(void 0!==i,2);const o=this.getRotation();return rt(void 0!==o,3),Yt(e,i,o,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(qi.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Uo(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=Kt(t)/e[0],o=Bt(t)/e[1];return Math.max(i,o)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,o=Math.log(e/i)/Math.log(t);return function(i){const n=e/Math.pow(t,i*o);return n}}getRotation(){return this.get(qi.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,n=Math.log(i/o)/e;return function(t){const o=Math.log(i/t)/e/n;return o}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let o=this.getCenterInternal();const n=this.padding_;if(n){const t=this.getViewportSizeMinusPadding_();o=Sr(o,this.getViewportSize_(),[t[0]/2+n[3],t[1]/2+n[0]],e,i)}return{center:o.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,i,o=this.minZoom_||0;if(this.resolutions_){const n=m(this.resolutions_,t,1);o=n,e=this.resolutions_[n],i=n==this.resolutions_.length-1?2:e/this.resolutions_[n+1]}else e=this.maxResolution_,i=this.zoomFactor_;return o+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=ie(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,ie(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(rt(Array.isArray(t)||"function"===typeof t.getSimplifiedGeometry,24),Array.isArray(t)){rt(!qt(t),25);const e=Uo(t,this.getProjection());i=mr(e)}else if("Circle"===t.getType()){const e=Uo(t.getExtent(),this.getProjection());i=mr(e),i.rotate(this.getRotation(),jt(e))}else{const e=Yo();i=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),o=Math.sin(-e),n=t.getFlatCoordinates(),r=t.getStride();let s=1/0,a=1/0,l=-1/0,h=-1/0;for(let d=0,c=n.length;d<c;d+=r){const t=n[d]*i-n[d+1]*o,e=n[d]*o+n[d+1]*i;s=Math.min(s,t),a=Math.min(a,e),l=Math.max(l,t),h=Math.max(h,e)}return[s,a,l,h]}fitInternal(t,e){e=e||{};let i=e.size;i||(i=this.getViewportSizeMinusPadding_());const o=void 0!==e.padding?e.padding:[0,0,0,0],n=void 0!==e.nearest&&e.nearest;let r;r=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const s=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(s,[i[0]-o[1]-o[3],i[1]-o[0]-o[2]]);a=isNaN(a)?r:Math.max(a,r),a=this.getConstrainedResolution(a,n?0:1);const l=this.getRotation(),h=Math.sin(l),d=Math.cos(l),c=jt(s);c[0]+=(o[1]-o[3])/2*a,c[1]+=(o[0]-o[2])/2*a;const u=c[0]*d-c[1]*h,g=c[1]*d+c[0]*h,p=this.getConstrainedCenter([u,g],a),f=e.callback?e.callback:C;void 0!==e.duration?this.animateInternal({resolution:a,center:p,duration:e.duration,easing:e.easing},f):(this.targetResolution_=a,this.targetCenter_=p,this.applyTargetState_(!1,!0),xr(f,!0))}centerOn(t,e,i){this.centerOnInternal(Bo(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(Sr(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,o){let n;const r=this.padding_;if(r&&t){const s=this.getViewportSizeMinusPadding_(-i),a=Sr(t,o,[s[0]/2+r[3],s[1]/2+r[0]],e,i);n=[t[0]-a[0],t[1]-a[1]]}return n}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=Xo(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Bo(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(this.targetResolution_*t,0,o,i);e&&(this.targetCenter_=this.calculateCenterZoom(n,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Bo(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(o,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?Bo(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,o=this.constraints_.rotation(this.targetRotation_,i),n=this.getViewportSize_(o),r=this.constraints_.resolution(this.targetResolution_,0,n,i),s=this.constraints_.center(this.targetCenter_,r,n,i,this.calculateCenterShift(this.targetCenter_,r,o,n));this.get(qi.ROTATION)!==o&&this.set(qi.ROTATION,o),this.get(qi.RESOLUTION)!==r&&(this.set(qi.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),s&&this.get(qi.CENTER)&&Pe(this.get(qi.CENTER),s)||this.set(qi.CENTER,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=void 0!==t?t:200;const o=e||0,n=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(n),s=this.constraints_.resolution(this.targetResolution_,o,r),a=this.constraints_.center(this.targetCenter_,s,r,!1,this.calculateCenterShift(this.targetCenter_,s,n,r));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=n,this.targetCenter_=a,void this.applyTargetState_();i=i||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===n&&this.getCenterInternal()&&Pe(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:n,center:a,resolution:s,duration:t,easing:ln,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Hi.INTERACTING,1)}endInteraction(t,e,i){i=i&&Bo(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.setHint(Hi.INTERACTING,-1),this.resolveConstraints(t,e,i)}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function xr(t,e){setTimeout((function(){t(e)}),0)}function vr(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Ho(t.extent,t.constrainOnlyCenter,e)}const e=Fo(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Ho(t,!1,!1)}return qo}function yr(t){let e,i,o;const n=28,r=2;let s=void 0!==t.minZoom?t.minZoom:_r,a=void 0!==t.maxZoom?t.maxZoom:n;const l=void 0!==t.zoomFactor?t.zoomFactor:r,h=void 0!==t.multiWorld&&t.multiWorld,d=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,c=void 0!==t.showFullExtent&&t.showFullExtent,u=Fo(t.projection,"EPSG:3857"),g=u.getExtent();let p=t.constrainOnlyCenter,f=t.extent;if(h||f||!u.isGlobal()||(p=!1,f=g),void 0!==t.resolutions){const n=t.resolutions;i=n[s],o=void 0!==n[a]?n[a]:n[n.length-1],e=t.constrainResolution?Qo(n,d,!p&&f,c):en(i,o,d,!p&&f,c)}else{const h=g?Math.max(Kt(g),Bt(g)):360*Qi.degrees/u.getMetersPerUnit(),m=h/$i/Math.pow(r,_r),_=m/Math.pow(r,n-_r);i=t.maxResolution,void 0!==i?s=0:i=m/Math.pow(l,s),o=t.minResolution,void 0===o&&(o=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(l,a):m/Math.pow(l,a):_),a=s+Math.floor(Math.log(i/o)/Math.log(l)),o=i/Math.pow(l,a-s),e=t.constrainResolution?tn(l,i,o,d,!p&&f,c):en(i,o,d,!p&&f,c)}return{constraint:e,maxResolution:i,minResolution:o,minZoom:s,zoomFactor:l}}function Er(t){const e=void 0===t.enableRotation||t.enableRotation;if(e){const e=t.constrainRotation;return void 0===e||!0===e?sn():!1===e?nn:"number"===typeof e?rn(e):nn}return on}function Cr(t){return!(t.sourceCenter&&t.targetCenter&&!Pe(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function Sr(t,e,i,o,n){const r=Math.cos(-n);let s=Math.sin(-n),a=t[0]*r-t[1]*s,l=t[1]*r+t[0]*s;a+=(e[0]/2-i[0])*o,l+=(i[1]-e[1]/2)*o,s=-s;const h=a*r-l*s,d=l*r+a*s;return[h,d]}var wr=br;class Rr extends W{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Qe(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Qe(this.element);for(let e=0,i=this.listenerKeys.length;e<i;++e)A(this.listenerKeys[e]);if(this.listenerKeys.length=0,this.map_=t,t){const e=this.target_?this.target_:t.getOverlayContainerStopEvent();e.appendChild(this.element),this.render!==C&&this.listenerKeys.push(L(t,ji.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_="string"===typeof t?document.getElementById(t):t}}var Tr=Rr;class Ir extends Tr{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",i=void 0!==t.tipLabel?t.tipLabel:"Attributions",o=void 0!==t.expandClassName?t.expandClassName:e+"-expand",n=void 0!==t.collapseLabel?t.collapseLabel:"",r=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"===typeof n?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n,this.collapseLabel_.className=r):this.collapseLabel_=n;const s=void 0!==t.label?t.label:"i";"string"===typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s,this.label_.className=o):this.label_=s;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(M.CLICK,this.handleClick_.bind(this),!1);const l=e+" "+Be+" "+Ve+(this.collapsed_&&this.collapsible_?" "+Ue:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=l,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e={},i=[];let o=!0;const n=t.layerStatesArray;for(let r=0,s=n.length;r<s;++r){const s=n[r];if(!Le(s,t.viewState))continue;const a=s.layer.getSource();if(!a)continue;const l=a.getAttributions();if(!l)continue;const h=l(t);if(h)if(o=o&&!1!==a.getAttributionsCollapsible(),Array.isArray(h))for(let t=0,o=h.length;t<o;++t)h[t]in e||(i.push(h[t]),e[h[t]]=!0);else h in e||(i.push(h),e[h]=!0)}return this.overrideCollapsible_||this.setCollapsible(o),i}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!x(e,this.renderedAttributions_)){ti(this.ulElement_);for(let t=0,i=e.length;t<i;++t){const i=document.createElement("li");i.innerHTML=e[t],this.ulElement_.appendChild(i)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Ue),this.collapsed_?$e(this.collapseLabel_,this.label_):$e(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}var Mr=Ir;class Lr extends Tr{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",i=void 0!==t.label?t.label:"",o=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"===typeof i?(this.label_=document.createElement("span"),this.label_.className=o,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(o));const n=t.tipLabel?t.tipLabel:"Reset rotation",r=document.createElement("button");r.className=e+"-reset",r.setAttribute("type","button"),r.title=n,r.appendChild(this.label_),r.addEventListener(M.CLICK,this.handleClick_.bind(this),!1);const s=e+" "+Be+" "+Ve,a=this.element;a.className=s,a.appendChild(r),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Xe)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap(),e=t.getView();if(!e)return;const i=e.getRotation();void 0!==i&&(this.duration_>0&&i%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:ln}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const t="rotate("+i+"rad)";if(this.autoHide_){const t=this.element.classList.contains(Xe);t||0!==i?t&&0!==i&&this.element.classList.remove(Xe):this.element.classList.add(Xe)}this.label_.style.transform=t}this.rotation_=i}}var Or=Lr;class Ar extends Tr{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",i=void 0!==t.delta?t.delta:1,o=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",n=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",r=void 0!==t.zoomInLabel?t.zoomInLabel:"+",s=void 0!==t.zoomOutLabel?t.zoomOutLabel:"",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=o,h.setAttribute("type","button"),h.title=a,h.appendChild("string"===typeof r?document.createTextNode(r):r),h.addEventListener(M.CLICK,this.handleClick_.bind(this,i),!1);const d=document.createElement("button");d.className=n,d.setAttribute("type","button"),d.title=l,d.appendChild("string"===typeof s?document.createTextNode(s):s),d.addEventListener(M.CLICK,this.handleClick_.bind(this,-i),!1);const c=e+" "+Be+" "+Ve,u=this.element;u.className=c,u.appendChild(h),u.appendChild(d),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap(),i=e.getView();if(!i)return;const o=i.getZoom();if(void 0!==o){const e=i.getConstrainedZoom(o+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:e,duration:this.duration_,easing:ln})):i.setZoom(e)}}}var Pr=Ar;function Dr(t){t=t||{};const e=new H,i=void 0===t.zoom||t.zoom;i&&e.push(new Pr(t.zoomOptions));const o=void 0===t.rotate||t.rotate;o&&e.push(new Or(t.rotateOptions));const n=void 0===t.attribution||t.attribution;return n&&e.push(new Mr(t.attributionOptions)),e}var Fr={ACTIVE:"active"};class kr extends W{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Fr.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Fr.ACTIVE,t)}setMap(t){this.map_=t}}function Nr(t,e,i){const o=t.getCenterInternal();if(o){const n=[o[0]+e[0],o[1]+e[1]];t.animateInternal({duration:void 0!==i?i:250,easing:dn,center:t.getConstrainedCenter(n)})}}function Gr(t,e,i,o){const n=t.getZoom();if(void 0===n)return;const r=t.getConstrainedZoom(n+e),s=t.getResolutionForZoom(r);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:i,duration:void 0!==o?o:250,easing:ln})}var zr=kr;class jr extends zr{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==ki.DBLCLICK){const i=t.originalEvent,o=t.map,n=t.coordinate,r=i.shiftKey?-this.delta_:this.delta_,s=o.getView();Gr(s,r,n,this.duration_),i.preventDefault(),e=!0}return!e}}var Wr=jr;class Yr extends zr{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==ki.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==ki.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==ki.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==ki.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Xr(t){const e=t.length;let i=0,o=0;for(let n=0;n<e;n++)i+=t[n].clientX,o+=t[n].clientY;return[i/e,o/e]}var Br=Yr;function Vr(t){const e=arguments;return function(t){let i=!0;for(let o=0,n=e.length;o<n;++o)if(i=i&&e[o](t),!i)break;return i}}const Ur=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Zr=function(t){const e=t.map.getTargetElement(),i=t.map.getOwnerDocument().activeElement;return e.contains(i)},Kr=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||Zr(t)},Hr=y,qr=function(t){const e=t.originalEvent;return 0==e.button&&!(Q&&tt&&e.ctrlKey)},Jr=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},$r=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Qr=function(t){const e=t.originalEvent,i=e.target.tagName;return"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i&&!e.target.isContentEditable},ts=function(t){const e=t.originalEvent;return rt(void 0!==e,56),"mouse"==e.pointerType},es=function(t){const e=t.originalEvent;return rt(void 0!==e,56),e.isPrimary&&0===e.button};class is extends Br{constructor(t){super({stopDown:E}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Vr(Jr,es);this.condition_=t.onFocusOnly?Vr(Kr,e):e,this.noKinetic_=!1}handleDragEvent(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const e=this.targetPointers,i=Xr(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const e=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=t.map,n=o.getView();Fe(e,n.getResolution()),De(e,n.getRotation()),n.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),n=i.getCenterInternal(),r=e.getPixelFromCoordinateInternal(n),s=e.getCoordinateFromPixelInternal([r[0]-t*Math.cos(o),r[1]-t*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(s),duration:500,easing:ln})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map,i=e.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}var os=is;class ns extends Br{constructor(t){t=t||{},super({stopDown:E}),this.condition_=t.condition?t.condition:Ur,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!ts(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===on)return;const o=e.getSize(),n=t.pixel,r=Math.atan2(o[1]/2-n[1],n[0]-o[0]/2);if(void 0!==this.lastAngle_){const t=r-this.lastAngle_;i.adjustRotationInternal(-t)}this.lastAngle_=r}handleUpEvent(t){if(!ts(t))return!0;const e=t.map,i=e.getView();return i.endInteraction(this.duration_),!1}handleDownEvent(t){if(!ts(t))return!1;if(qr(t)&&this.condition_(t)){const e=t.map;return e.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}}var rs=ns;class ss extends g{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",o=this.element_.style;o.left=Math.min(t[0],e[0])+i,o.top=Math.min(t[1],e[1])+i,o.width=Math.abs(e[0]-t[0])+i,o.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]],o=i.map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new fr([o])}getGeometry(){return this.geometry_}}var as=ss;const ls={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class hs extends d{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}class ds extends Br{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new as(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:qr,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const o=i[0]-e[0],n=i[1]-e[1];return o*o+n*n>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new hs(ls.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new hs(e?ls.BOXEND:ls.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new hs(ls.BOXSTART,t.coordinate,t)),!0)}onBoxEnd(t){}}var cs=ds;class us extends cs{constructor(t){t=t||{};const e=t.condition?t.condition:$r;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap(),i=e.getView();let o=this.getGeometry();if(this.out_){const t=i.rotatedExtentForGeometry(o),e=i.getResolutionForExtentInternal(t),n=i.getResolution()/e;o=o.clone(),o.scale(n*n)}i.fitInternal(o,{duration:this.duration_,easing:ln})}}var gs=us,ps={LEFT:37,UP:38,RIGHT:39,DOWN:40};class fs extends zr{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return Jr(t)&&Qr(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==M.KEYDOWN){const i=t.originalEvent,o=i.keyCode;if(this.condition_(t)&&(o==ps.DOWN||o==ps.LEFT||o==ps.RIGHT||o==ps.UP)){const n=t.map,r=n.getView(),s=r.getResolution()*this.pixelDelta_;let a=0,l=0;o==ps.DOWN?l=-s:o==ps.LEFT?a=-s:o==ps.RIGHT?a=s:l=s;const h=[a,l];De(h,r.getRotation()),Nr(r,h,this.duration_),i.preventDefault(),e=!0}}return!e}}var ms=fs;class _s extends zr{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:Qr,this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==M.KEYDOWN||t.type==M.KEYPRESS){const i=t.originalEvent,o=i.charCode;if(this.condition_(t)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){const n=t.map,r=o=="+".charCodeAt(0)?this.delta_:-this.delta_,s=n.getView();Gr(s,r,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}}var bs=_s;class xs{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;while(i>0&&this.points_[i+2]>t)i-=3;const o=this.points_[e+2]-this.points_[i+2];if(o<1e3/60)return!1;const n=this.points_[e]-this.points_[i],r=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(r,n),this.initialVelocity_=Math.sqrt(n*n+r*r)/o,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}var vs=xs;class ys extends zr{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:Hr;this.condition_=t.onFocusOnly?Vr(Kr,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;const e=t.getView();e.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0;const e=t.type;if(e!==M.WHEEL)return!0;const i=t.map,o=t.originalEvent;let n;if(o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==M.WHEEL&&(n=o.deltaY,J&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=et),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.lastDelta_=n;const r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?"trackpad":"wheel");const s=i.getView();if("trackpad"===this.mode_&&!s.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-n/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=n;const a=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),a),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-ie(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Gr(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}var Es=ys;class Cs extends Br{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=E),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],o=this.targetPointers[1],n=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(void 0!==this.lastAngle_){const t=n-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=n;const r=t.map,s=r.getView();if(s.getConstraints().rotation===on)return;const a=r.getViewport().getBoundingClientRect(),l=Xr(this.targetPointers);l[0]-=a.left,l[1]-=a.top,this.anchor_=r.getCoordinateFromPixelInternal(l),this.rotating_&&(r.render(),s.adjustRotationInternal(e,this.anchor_))}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map,i=e.getView();return i.endInteraction(this.duration_),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}var Ss=Cs;class ws extends Br{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=E),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],o=this.targetPointers[1],n=i.clientX-o.clientX,r=i.clientY-o.clientY,s=Math.sqrt(n*n+r*r);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;const a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e);const h=a.getViewport().getBoundingClientRect(),d=Xr(this.targetPointers);d[0]-=h.left,d[1]-=h.top,this.anchor_=a.getCoordinateFromPixelInternal(d),a.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map,i=e.getView(),o=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,o),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}var Rs=ws;function Ts(t){t=t||{};const e=new H,i=new vs(-.005,.05,100),o=void 0===t.altShiftDragRotate||t.altShiftDragRotate;o&&e.push(new rs);const n=void 0===t.doubleClickZoom||t.doubleClickZoom;n&&e.push(new Wr({delta:t.zoomDelta,duration:t.zoomDuration}));const r=void 0===t.dragPan||t.dragPan;r&&e.push(new os({onFocusOnly:t.onFocusOnly,kinetic:i}));const s=void 0===t.pinchRotate||t.pinchRotate;s&&e.push(new Ss);const a=void 0===t.pinchZoom||t.pinchZoom;a&&e.push(new Rs({duration:t.zoomDuration}));const l=void 0===t.keyboard||t.keyboard;l&&(e.push(new ms),e.push(new bs({delta:t.zoomDelta,duration:t.zoomDuration})));const h=void 0===t.mouseWheelZoom||t.mouseWheelZoom;h&&e.push(new Es({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration}));const d=void 0===t.shiftDragZoom||t.shiftDragZoom;return d&&e.push(new gs({duration:t.zoomDuration})),e}function Is(t){return t[0]>0&&t[1]>0}function Ms(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function Ls(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}function Os(t){t instanceof Oe?t.setMapInternal(null):t instanceof Oi&&t.getLayers().forEach(Os)}function As(t,e){if(t instanceof Oe)t.setMapInternal(e);else if(t instanceof Oi){const i=t.getLayers().getArray();for(let t=0,o=i.length;t<o;++t)As(i[t],e)}}class Ps extends W{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=Ds(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:et,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=st(),this.pixelToCoordinateTransform_=st(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=e.controls||Dr(),this.interactions=e.interactions||Ts({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Zi(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Wi.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Wi.VIEW,this.handleViewChanged_),this.addChangeListener(Wi.SIZE,this.handleSizeChanged_),this.addChangeListener(Wi.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const i=this;!t.view||t.view instanceof wr||t.view.then((function(t){i.setView(new wr(t))})),this.controls.addEventListener(V.ADD,function(t){t.element.setMap(this)}.bind(this)),this.controls.addEventListener(V.REMOVE,function(t){t.element.setMap(null)}.bind(this)),this.interactions.addEventListener(V.ADD,function(t){t.element.setMap(this)}.bind(this)),this.interactions.addEventListener(V.REMOVE,function(t){t.element.setMap(null)}.bind(this)),this.overlays_.addEventListener(V.ADD,function(t){this.addOverlayInternal_(t.element)}.bind(this)),this.overlays_.addEventListener(V.REMOVE,function(t){const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(this)),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){const e=this.getLayerGroup().getLayers();e.push(t)}handleLayerAdd_(t){As(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const o=this.getCoordinateFromPixelInternal(t);i=void 0!==i?i:{};const n=void 0!==i.hitTolerance?i.hitTolerance:0,r=void 0!==i.layerFilter?i.layerFilter:y,s=!1!==i.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,n,s,e,null,r,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),e),i}getAllLayers(){const t=[];function e(i){i.forEach((function(i){i instanceof Oi?e(i.getLayers()):t.push(i)}))}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);e=void 0!==e?e:{};const o=void 0!==e.layerFilter?e.layerFilter:y,n=void 0!==e.hitTolerance?e.hitTolerance:0,r=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,n,r,o,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]}getTarget(){return this.get(Wi.TARGET)}getTargetElement(){const t=this.getTarget();return void 0!==t?"string"===typeof t?document.getElementById(t):t:null}getCoordinateFromPixel(t){return Xo(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?ht(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Wi.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof H)return void e.setLayers(t);const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){const t=this.getLayerGroup().getLayers();return t}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const i=t[e];if(!i.visible)continue;const o=i.layer.getRenderer();if(o&&!o.ready)return!0;const n=i.layer.getSource();if(n&&n.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Bo(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?ht(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Wi.SIZE)}getView(){return this.get(Wi.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,o){return Ki(this.frameState_,t,e,i,o)}handleBrowserEvent(t,e){e=e||t.type;const i=new Fi(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===Ni.POINTERDOWN||i===M.WHEEL||i===M.KEYDOWN){const t=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():t,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(i===t?t.documentElement:i).contains(o))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let i=e.length-1;i>=0;i--){const o=e[i];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;const n=o.handleEvent(t);if(!n||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let i=this.maxTilesLoading_,o=i;if(t){const e=t.viewHints;if(e[Hi.ANIMATING]||e[Hi.INTERACTING]){const e=Date.now()-t.time>8;i=e?0:8,o=e?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,o))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(Ie.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ie.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Pi(ji.LOADEND,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Pi(ji.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let o=0,n=i.length;o<n;++o)i[o](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)A(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(M.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(M.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Qe(this.viewport_)}const t=this.getTargetElement();if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Ti(this)),this.mapBrowserEventHandler_=new zi(this,this.moveTolerance_);for(const t in ki)this.mapBrowserEventHandler_.addEventListener(ki[t],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(M.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(M.WHEEL,this.boundHandleBrowserEvent_,!!nt&&{passive:!1});const e=this.getOwnerDocument().defaultView,i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[L(i,M.KEYDOWN,this.handleBrowserEvent,this),L(i,M.KEYPRESS,this.handleBrowserEvent,this),L(e,M.RESIZE,this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(A(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(A(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=L(t,c.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=L(t,M.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(A),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Ii("addlayer",t)),this.layerGroupPropertyListenerKeys_=[L(t,c.PROPERTYCHANGE,this.render,this),L(t,M.CHANGE,this.render,this),L(t,"addlayer",this.handleLayerAdd_,this),L(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const i=t[e].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){const e=this.getLayerGroup().getLayers();return e.remove(t)}handleLayerRemove_(t){Os(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),o=this.frameState_;let n=null;if(void 0!==e&&Is(e)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),r=i.getState();if(n={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Yt(r.center,r.resolution,r.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:r,viewHints:o,wantedTiles:{},mapId:G(this),renderTargets:{}},r.nextCenter&&r.nextResolution){const t=isNaN(r.nextRotation)?r.rotation:r.nextRotation;n.nextExtent=Yt(r.nextCenter,r.nextResolution,t,e)}}if(this.frameState_=n,this.renderer_.renderFrame(n),n){if(n.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,n.postRenderFunctions),o){const t=!this.previousExtent_||!qt(this.previousExtent_)&&!Ot(n.extent,this.previousExtent_);t&&(this.dispatchEvent(new Pi(ji.MOVESTART,this,o)),this.previousExtent_=It(this.previousExtent_))}const t=this.previousExtent_&&!n.viewHints[Hi.ANIMATING]&&!n.viewHints[Hi.INTERACTING]&&!Ot(n.extent,this.previousExtent_);t&&(this.dispatchEvent(new Pi(ji.MOVEEND,this,n)),vt(n.extent,this.previousExtent_))}this.dispatchEvent(new Pi(ji.POSTRENDER,this,n)),this.renderComplete_=this.hasListener(ji.LOADSTART)||this.hasListener(ji.LOADEND)||this.hasListener(Ie.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Ii("removelayer",e)),this.set(Wi.LAYERGROUP,t)}setSize(t){this.set(Wi.SIZE,t)}setTarget(t){this.set(Wi.TARGET,t)}setView(t){if(!t||t instanceof wr)return void this.set(Wi.VIEW,t);this.set(Wi.VIEW,new wr);const e=this;t.then((function(t){e.setView(new wr(t))}))}updateSize(){const t=this.getTargetElement();let e;if(t){const i=getComputedStyle(t),o=t.offsetWidth-parseFloat(i["borderLeftWidth"])-parseFloat(i["paddingLeft"])-parseFloat(i["paddingRight"])-parseFloat(i["borderRightWidth"]),n=t.offsetHeight-parseFloat(i["borderTopWidth"])-parseFloat(i["paddingTop"])-parseFloat(i["paddingBottom"])-parseFloat(i["borderBottomWidth"]);isNaN(o)||isNaN(n)||(e=[o,n],!Is(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(e),this.updateViewportSize_()}updateViewportSize_(){const t=this.getView();if(t){let e;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}}function Ds(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"===typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const i={},o=t.layers&&"function"===typeof t.layers.getLayers?t.layers:new Oi({layers:t.layers});let n,r,s;return i[Wi.LAYERGROUP]=o,i[Wi.TARGET]=t.target,i[Wi.VIEW]=t.view instanceof wr?t.view:new wr,void 0!==t.controls&&(Array.isArray(t.controls)?n=new H(t.controls.slice()):(rt("function"===typeof t.controls.getArray,47),n=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new H(t.interactions.slice()):(rt("function"===typeof t.interactions.getArray,48),r=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?s=new H(t.overlays.slice()):(rt("function"===typeof t.overlays.getArray,49),s=t.overlays):s=new H,{controls:n,interactions:r,keyboardEventTarget:e,overlays:s,values:i}}var Fs=Ps;function ks(t){return ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ks(t)}function Ns(t,e){if("object"!==ks(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!==ks(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Gs(t){var e=Ns(t,"string");return"symbol"===ks(e)?e:String(e)}function zs(t,e,i){return e=Gs(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const js="units",Ws=[1,2,5],Ys=25.4/.28;class Xs extends Tr{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;const i=void 0!==t.className?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+Be,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==t.minWidth?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(js,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(js)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(js,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=t.center,i=t.projection,o=this.getUnits(),n="degrees"==o?"degrees":"m";let r=Ao(i,t.resolution,e,n);const s=this.minWidth_*(this.dpi_||Ys)/Ys,a=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||Ys)/Ys:void 0;let l=s*r,h="";if("degrees"==o){const t=Qi.degrees;l*=t,l<t/60?(h="",r*=3600):l<t?(h="",r*=60):h=""}else"imperial"==o?l<.9144?(h="in",r/=.0254):l<1609.344?(h="ft",r/=.3048):(h="mi",r/=1609.344):"nautical"==o?(r/=1852,h="NM"):"metric"==o?l<.001?(h="m",r*=1e6):l<1?(h="mm",r*=1e3):l<1e3?h="m":(h="km",r/=1e3):"us"==o?l<.9144?(h="in",r*=39.37):l<1609.344?(h="ft",r/=.30480061):(h="mi",r/=1609.3472):rt(!1,33);let d,c,u,g,p,f,m=3*Math.floor(Math.log(s*r)/Math.log(10));while(1){u=Math.floor(m/3);const t=Math.pow(10,u);if(d=Ws[(m%3+3)%3]*t,c=Math.round(d/r),isNaN(c))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==a&&c>=a){d=g,c=p,u=f;break}if(c>=s)break;g=d,p=c,f=u,++m}const _=this.scaleBar_?this.createScaleBar(c,d,h):d.toFixed(u<0?-u:0)+" "+h;this.renderedHTML_!=_&&(this.innerElement_.innerHTML=_,this.renderedHTML_=_),this.renderedWidth_!=c&&(this.innerElement_.style.width=c+"px",this.renderedWidth_=c),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,i){const o=this.getScaleForResolution(),n=o<1?Math.round(1/o).toLocaleString()+" : 1":"1 : "+Math.round(o).toLocaleString(),r=this.scaleBarSteps_,s=t/r,a=[this.createMarker("absolute")];for(let h=0;h<r;++h){const o=h%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";a.push(`<div><div class="ol-scale-singlebar ${o}" style="width: ${s}px;"></div>`+this.createMarker("relative")+(h%2===0||2===r?this.createStepText(h,t,!1,e,i):"")+"</div>")}a.push(this.createStepText(r,t,!0,e,i));const l=this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+n+"</div>":"";return l+a.join("")}createMarker(t){const e="absolute"===t?3:-10;return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${e}px;"></div>`}createStepText(t,e,i,o,n){const r=0===t?0:Math.round(o/this.scaleBarSteps_*t*100)/100,s=r+(0===t?"":" "+n),a=0===t?-3:e/this.scaleBarSteps_*-1,l=0===t?0:e/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${a}px;text-align: ${0===t?"left":"center"};min-width: ${l}px;left: ${i?e+"px":"unset"};">`+s+"</div>"}getScaleForResolution(){const t=Ao(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),e=this.dpi_||Ys,i=1e3/25.4;return t*i*e}render(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}}var Bs=Xs;const Vs={units:"metric",bar:!0,steps:4,text:!1,minWidth:140,maxWidth:220},Us="escala-grafica";class Zs extends Bs{get nombre(){return Zs.nombre}constructor(){super(Vs),this._agregarClasesSisdai()}_agregarClasesSisdai(){this.element.classList.add("sisdai-mapa-control"),this.element.classList.add(`sisdai-mapa-control-${Us}`)}}function Ks(t){const e=document.createElement("div");return e.className=`sisdai-mapa-control sisdai-mapa-control-${t} ol-unselectable`,e}function Hs(t,e,i){const o=document.createElement("button");return o.className=`sisdai-mapa-control-${t}-boton boton-icono boton-secundario`,o.innerHTML=`<span class="icono-${e}" />`,o.addEventListener("click",i,!1),o}zs(Zs,"nombre","EscalaGrafica");const qs="vista-inicial";class Js extends Tr{get nombre(){return Js.nombre}constructor(t){const e=Ks(qs);super({element:e,target:void 0}),zs(this,"funcionesPorTipoDeVista",{centro:()=>this.getMap().getView().animate({zoom:this.zoom,center:this.centro}),extension:()=>this.getMap().getView().fit(this.extension,{padding:this.rellenoAlBordeDeLaExtension,duration:1e3})}),this.botonVistaInicial=Hs(qs,"mapa-centro",this.reiniciarVista.bind(this)),e.appendChild(this.botonVistaInicial),this.centro=t.centro,this.extension=t.extension,this.tipoDeVista=this.extensionEsValida()?"extension":"centro",this.rellenoAlBordeDeLaExtension=t.rellenoAlBordeDeLaExtension,this.zoom=t.zoom,"extension"===this.tipoDeVista&&new Promise((t=>{const e=this;function i(){e.getMap()?t():setTimeout(i,50)}i()})).then((()=>{this.reiniciarVista()}))}extensionEsValida(){return Boolean(0!==Number(this.extension[0])&&0!==Number(this.extension[3]))}reiniciarVista(){this.funcionesPorTipoDeVista[this.tipoDeVista](),this.dispatchEvent("reset")}}zs(Js,"nombre","VistaInicial");var $s={no:"indefinida",ini:"iniciada",error:"error",fin:"finalizada"};const Qs={},ta=(0,l.ref)(!1);function ea(){function t(t){for(const e in Qs)Qs[e]&&t.addLayer(Qs[e].value)}function e(t){return void 0!==Qs[t]&&(console.warn("La capa ya existe!"),!0)}function i(t){const i=t.get("id");e(i)||(Qs[i]=(0,l.ref)(t))}function o(t){const e=()=>Qs[t].value,i=(0,l.ref)(e().get("nombre")),o=(0,l.ref)(e().get("estatusCarga")),n=(0,l.ref)(e().getVisible());function r(t){void 0===t&&(t=!e().getVisible()),e().setVisible(t)}function s(t){e().set("nombre",t)}function a(t){o.value=t}return(0,l.watch)((()=>e().values_.visible),(t=>n.value=t)),(0,l.watch)(n,r),(0,l.watch)((()=>e().values_.nombre),(t=>i.value=t)),(0,l.watch)(o,(t=>e().set("estatusCarga",t))),{alternarVisibilidad:r,visibilidad:n,cambiarNombre:s,nombre:i,cambiarEstatusCarga:a}}return(0,l.watch)((()=>Object.values(Qs).filter((t=>t.value.get("verCargador"))).map((t=>t.value.get("estatusCarga"))).join()),(t=>ta.value=t.includes($s.ini))),{agregarTodoALMapa:t,registrarNuevaCapa:i,vincularCapa:o,hayCapasCargadorVisibleProcesando:ta}}const ia=(0,l.ref)(void 0),oa={centro:{type:Array,default:()=>[0,0]},extension:{type:Array,default:()=>[0,0,0,0]},iconoConacytVisible:{type:Boolean,default:!0},proyeccion:{type:String,default:"EPSG:4326"},tema:{type:String,default:""},zoom:{type:Number,default:1},escalaGrafica:{type:Boolean,default:!1,validator:t=>typeof t===typeof Boolean()}};function na(t){const{agregarTodoALMapa:e,hayCapasCargadorVisibleProcesando:i}=ea(),{centro:o,escalaGrafica:n,extension:r,zoom:s}=(0,l.toRefs)(t);function a(t){e(t),ia.value=t}function h(t){if(ia.value)return ia.value.getControls().getArray().find((e=>e.nombre===t))}function d(t){ia.value&&ia.value.addControl(t)}function c(t){ia.value&&ia.value.removeControl(t)}function u(t){ia.value&&ia.value.getView().setCenter(t)}function g(t){t?d(new Zs):c(h(Zs.nombre))}function p(t){const e=h(Js.nombre);e.extension=t,e.reiniciarVista()}function f(t){ia.value&&ia.value.getView().setZoom(t)}return(0,l.watch)(o,u),(0,l.watch)(n,g),(0,l.watch)(r,p),(0,l.watch)(s,f),{salvarInstancia:a,alternarEscalaGrafica:g,verCargador:i}}const ra="zoom";class sa extends Tr{get nombre(){return sa.nombre}constructor(){const t=Ks(ra);super({element:t,target:void 0}),this.botonAcercar=Hs(ra,"agregar",this.acercamiento.bind(this)),this.botonAlejar=Hs(ra,"restar",this.alejamiento.bind(this)),t.appendChild(this.botonAcercar),t.appendChild(this.botonAlejar)}acercamiento(){this.getMap().getView().animate({zoom:this.getMap().getView().getZoom()+1,duration:250})}alejamiento(){this.getMap().getView().animate({zoom:this.getMap().getView().getZoom()-1,duration:250})}}zs(sa,"nombre","ZoomPersonalizado");var aa=function(){var t=this;t._self._c;return t._m(0)},la=[function(){var t=this,e=t._self._c;return e("a",{staticClass:"boton boton-conacyt borde-t",attrs:{href:"https://conacyt.mx/",target:"_blank"}},[e("img",{attrs:{src:"https://conacyt.mx/wp-content/uploads/2021/10/logo_conacyt_con_sintagma_azul_completo.svg",alt:"Conacyt",height:"28px"}})])}];o(757);function ha(t,e,i,o,n,r,s,a){var l,h="function"===typeof t?t.options:t;if(e&&(h.render=e,h.staticRenderFns=i,h._compiled=!0),o&&(h.functional=!0),r&&(h._scopeId="data-v-"+r),s?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},h._ssrRegister=l):n&&(l=a?function(){n.call(this,(h.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(h.functional){h._injectStyles=l;var d=h.render;h.render=function(t,e){return l.call(e),d(t,e)}}else{var c=h.beforeCreate;h.beforeCreate=c?[].concat(c,l):[l]}return{exports:t,options:h}}var da={},ca=ha(da,aa,la,!1,null,"7f6aef72",null),ua=ca.exports,ga=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sisdai-mapa-vista-carga"},[e("svg",{attrs:{width:"55",height:"80",viewBox:"0 0 55 80",xmlns:"http://www.w3.org/2000/svg",fill:"#FFF"}},[e("g",{attrs:{transform:"matrix(1 0 0 -1 0 80)"}},[e("rect",{attrs:{width:"10",height:"20",rx:"3"}},[e("animate",{attrs:{attributeName:"height",begin:"0s",dur:"4.3s",values:"20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20",calcMode:"linear",repeatCount:"indefinite"}})]),e("rect",{attrs:{x:"15",width:"10",height:"80",rx:"3"}},[e("animate",{attrs:{attributeName:"height",begin:"0s",dur:"2s",values:"80;55;33;5;75;23;73;33;12;14;60;80",calcMode:"linear",repeatCount:"indefinite"}})]),e("rect",{attrs:{x:"30",width:"10",height:"50",rx:"3"}},[e("animate",{attrs:{attributeName:"height",begin:"0s",dur:"1.4s",values:"50;34;78;23;56;23;34;76;80;54;21;50",calcMode:"linear",repeatCount:"indefinite"}})]),e("rect",{attrs:{x:"45",width:"10",height:"30",rx:"3"}},[e("animate",{attrs:{attributeName:"height",begin:"0s",dur:"2s",values:"30;45;13;80;56;72;45;76;34;23;67;30",calcMode:"linear",repeatCount:"indefinite"}})])])])])},pa=[],fa=(o(915),{}),ma=ha(fa,ga,pa,!1,null,"6af7c961",null),_a=ma.exports,ba={__name:"SisdaiMapa",props:oa,setup(t){const e=t,i=[10,10,10,10],{salvarInstancia:o,alternarEscalaGrafica:n,verCargador:r}=na(e),s=(0,l.ref)(null);function a(t){return new Fs({target:t,layers:[],view:new wr({center:e.centro,zoom:e.zoom,projection:e.proyeccion}),controls:[new sa,new Js({centro:e.centro,extension:e.extension,rellenoAlBordeDeLaExtension:i,zoom:e.zoom}),new Mr({collapsible:!1})]})}return(0,l.onMounted)((()=>{o(a(s.value)),n(e.escalaGrafica)})),{__sfc:!0,rellenoAlBordeDeLaExtension:i,propsSetup:e,salvarInstancia:o,alternarEscalaGrafica:n,verCargador:r,refMapa:s,crearMapa:a,BotonConacyt:ua,VistaCarga:_a}}},xa=ba,va=(o(784),ha(xa,s,a,!1,null,"51ced022",null)),ya=va.exports,Ea=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("span")},Ca=[],Sa=o(582),wa={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Ra{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Ls(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Ra({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return k()}getImage(t){return k()}getHitDetectionImage(){return k()}getPixelRatio(t){return 1}getImageState(){return k()}getImageSize(){return k()}getOrigin(){return k()}getSize(){return k()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ls(t)}listenImageChange(t){k()}load(){k()}unlistenImageChange(t){k()}}var Ta=Ra;function Ia(t){return Array.isArray(t)?ye(t):t}class Ma extends Ta{constructor(t){const e=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:1,rotateWithView:e,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new Ma({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const i=this.renderOptions_,o=qe(i.size*t,i.size*t);this.draw_(i,o,t),e=o.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return wa.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let o=this.radius_,n=void 0===this.radius2_?o:this.radius2_;if(o<n){const t=o;o=n,n=t}const r=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/r,a=n*Math.sin(s),l=Math.sqrt(n*n-a*a),h=o-l,d=Math.sqrt(a*a+h*h),c=d/a;if("miter"===t&&c<=i)return c*e;const u=e/2/c,g=e/2*(h/d),p=Math.sqrt((o+u)*(o+u)+g*g),f=p-o;if(void 0===this.radius2_||"bevel"===t)return 2*f;const m=o*Math.sin(s),_=Math.sqrt(o*o-m*m),b=n-_,x=Math.sqrt(m*m+b*b),v=x/m;if(v<=i){const t=v*e/2-n-o;return 2*Math.max(f,t)}return 2*f}createRenderOptions(){let t,e=ai,i=0,o=null,n=0,r=0;this.stroke_&&(t=this.stroke_.getColor(),null===t&&(t=hi),t=Ia(t),r=this.stroke_.getWidth(),void 0===r&&(r=gi),o=this.stroke_.getLineDash(),n=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=ai),i=this.stroke_.getMiterLimit(),void 0===i&&(i=li));const s=this.calculateLineJoinSize_(e,r,i),a=Math.max(this.radius_,this.radius2_||0),l=Math.ceil(2*a+s);return{strokeStyle:t,strokeWidth:r,size:l,lineDash:o,lineDashOffset:n,lineJoin:e,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=oi),e.fillStyle=Ia(t),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if("string"===typeof e&&(e=be(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){const e=qe(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const o=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);const n=this.angle_-Math.PI/2,r=2*Math.PI/e;for(let s=0;s<e;s++){const e=n+s*r,a=s%2===0?i:o;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=oi,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}var La=Ma;class Oa extends La{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new Oa({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}var Aa=Oa;class Pa{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null}clone(){const t=this.getColor();return new Pa({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}var Da=Pa;class Fa{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Fa({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}var ka=Fa;class Na{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Wa,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"===typeof t&&(t=t.clone()),new Na({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"===typeof t?this.geometryFunction_=t:"string"===typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Wa,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Ga(t){let e;if("function"===typeof t)e=t;else{let i;if(Array.isArray(t))i=t;else{rt("function"===typeof t.getZIndex,41);const e=t;i=[e]}e=function(){return i}}return e}let za=null;function ja(t,e){if(!za){const t=new Da({color:"rgba(255,255,255,0.4)"}),e=new ka({color:"#3399CC",width:1.25});za=[new Na({image:new Aa({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return za}function Wa(t){return t.getGeometry()}var Ya=Na;class Xa extends I{constructor(t,e,i,o){super(),this.extent=t,this.pixelRatio_=i,this.resolution=e,this.state=o}changed(){this.dispatchEvent(M.CHANGE)}getExtent(){return this.extent}getImage(){return k()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){k()}}var Ba=Xa;class Va extends Ba{constructor(t,e,i,o,n,r){super(t,e,i,wa.IDLE),this.src_=o,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.unlisten_=null,this.state=wa.IDLE,this.imageLoadFunction_=r}getImage(){return this.image_}handleImageError_(){this.state=wa.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){void 0===this.resolution&&(this.resolution=Bt(this.extent)/this.image_.height),this.state=wa.LOADED,this.unlistenImage_(),this.changed()}load(){this.state!=wa.IDLE&&this.state!=wa.ERROR||(this.state=wa.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Ua(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(t){this.image_=t,this.resolution=Bt(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Ua(t,e,i){const o=t;let n=!0,r=!1,s=!1;const a=[O(o,M.LOAD,(function(){s=!0,r||e()}))];return o.src&&ot?(r=!0,o.decode().then((function(){n&&e()})).catch((function(t){n&&(s?e():i())}))):a.push(O(o,M.ERROR,i)),function(){n=!1,a.forEach(A)}}var Za=Va;let Ka=null;class Ha extends I{constructor(t,e,i,o,n,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=o,this.canvas_={},this.color_=r,this.unlisten_=null,this.imageState_=n,this.size_=i,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===wa.LOADED){Ka||(Ka=qe(1,1)),Ka.drawImage(this.image_,0,0);try{Ka.getImageData(0,0,1,1),this.tainted_=!1}catch(t){Ka=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(M.CHANGE)}handleImageError_(){this.imageState_=wa.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=wa.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=qe(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===wa.IDLE){this.image_||this.initializeImage_(),this.imageState_=wa.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=Ua(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==wa.LOADED)return;const e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);const o=i.getContext("2d");o.scale(t,t),o.drawImage(e,0,0),o.globalCompositeOperation="multiply",o.fillStyle=fe(this.color_),o.fillRect(0,0,i.width/t,i.height/t),o.globalCompositeOperation="destination-in",o.drawImage(e,0,0),this.canvas_[t]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function qa(t,e,i,o,n,r){let s=Se.get(e,o,r);return s||(s=new Ha(t,e,i,o,n,r),Se.set(e,o,r,s)),s}class Ja extends Ta{constructor(t){t=t||{};const e=void 0!==t.opacity?t.opacity:1,i=void 0!==t.rotation?t.rotation:0,o=void 0!==t.scale?t.scale:1,n=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:i,scale:o,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:n,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const r=void 0!==t.img?t.img:null;this.imgSize_=t.imgSize;let s=t.src;rt(!(void 0!==s&&r),4),rt(!r||r&&this.imgSize_,5),void 0!==s&&0!==s.length||!r||(s=r.src||G(r)),rt(void 0!==s&&s.length>0,6);const a=void 0!==t.src?wa.IDLE:wa.LOADED;this.color_=void 0!==t.color?be(t.color):null,this.iconImage_=qa(r,s,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,a,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null}clone(){const t=this.getScale();return new Ja({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=i[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(t){this.iconImage_.addEventListener(M.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(M.CHANGE,t)}}var $a=Ja;const Qa="#333";class tl{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Ls(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new Da({color:Qa}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){const t=this.getScale();return new tl({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Ls(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}var el=tl;function il(t){const e=new Ya({fill:ol(t,""),stroke:nl(t,""),text:rl(t),image:sl(t)});return e}function ol(t,e){const i=t[e+"fill-color"];if(i)return new Da({color:i})}function nl(t,e){const i=t[e+"stroke-width"],o=t[e+"stroke-color"];if(i||o)return new ka({width:i,color:o,lineCap:t[e+"stroke-line-cap"],lineJoin:t[e+"stroke-line-join"],lineDash:t[e+"stroke-line-dash"],lineDashOffset:t[e+"stroke-line-dash-offset"],miterLimit:t[e+"stroke-miter-limit"]})}function rl(t){const e=t["text-value"];if(!e)return;const i=new el({text:e,font:t["text-font"],maxAngle:t["text-max-angle"],offsetX:t["text-offset-x"],offsetY:t["text-offset-y"],overflow:t["text-overflow"],placement:t["text-placement"],scale:t["text-scale"],rotateWithView:t["text-rotate-with-view"],rotation:t["text-rotation"],textAlign:t["text-align"],justify:t["text-justify"],textBaseline:t["text-baseline"],padding:t["text-padding"],fill:ol(t,"text-"),backgroundFill:ol(t,"text-background-"),stroke:nl(t,"text-"),backgroundStroke:nl(t,"text-background-")});return i}function sl(t){const e=t["icon-src"],i=t["icon-img"];if(e||i){const o=new $a({src:e,img:i,imgSize:t["icon-img-size"],anchor:t["icon-anchor"],anchorOrigin:t["icon-anchor-origin"],anchorXUnits:t["icon-anchor-x-units"],anchorYUnits:t["icon-anchor-y-units"],color:t["icon-color"],crossOrigin:t["icon-cross-origin"],offset:t["icon-offset"],displacement:t["icon-displacement"],opacity:t["icon-opacity"],scale:t["icon-scale"],rotation:t["icon-rotation"],rotateWithView:t["icon-rotate-with-view"],size:t["icon-size"],declutterMode:t["icon-declutter-mode"]});return o}const o=t["shape-points"];if(o){const e="shape-",i=new La({points:o,fill:ol(t,e),stroke:nl(t,e),radius:t["shape-radius"],radius1:t["shape-radius1"],radius2:t["shape-radius2"],angle:t["shape-angle"],displacement:t["shape-displacement"],rotation:t["shape-rotation"],rotateWithView:t["shape-rotate-with-view"],scale:t["shape-scale"],declutterMode:t["shape-declutter-mode"]});return i}const n=t["circle-radius"];if(n){const e="circle-",i=new Aa({radius:n,fill:ol(t,e),stroke:nl(t,e),displacement:t["circle-displacement"],scale:t["circle-scale"],rotation:t["circle-rotation"],rotateWithView:t["circle-rotate-with-view"],declutterMode:t["circle-declutter-mode"]});return i}}const al={RENDER_ORDER:"renderOrder"};class ll extends Oe{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(al.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new Sa(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(al.RENDER_ORDER,t)}setStyle(t){let e;if(void 0===t)e=ja;else if(null===t)e=null;else if("function"===typeof t)e=t;else if(t instanceof Ya)e=t;else if(Array.isArray(t)){const i=t.length,o=new Array(i);for(let e=0;e<i;++e){const i=t[e];o[e]=i instanceof Ya?i:il(i)}e=o}else e=il(t);this.style_=e,this.styleFunction_=null===t?void 0:Ga(this.style_),this.changed()}}var hl=ll;const dl={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},cl=[dl.FILL],ul=[dl.STROKE],gl=[dl.BEGIN_PATH],pl=[dl.CLOSE_PATH];var fl=dl;class ml{drawCustom(t,e,i,o){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}var _l=ml;class bl extends _l{constructor(t,e,i,o){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=o,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,n=this.coordinates;let r=n.length;for(let s=0,a=t.length;s<a;s+=e)o[0]=t[s],o[1]=t[s+1],Et(i,o)&&(n[r++]=o[0],n[r++]=o[1]);return r}appendFlatLineCoordinates(t,e,i,o,n,r){const s=this.coordinates;let a=s.length;const l=this.getBufferedMaxExtent();r&&(e+=o);let h=t[e],d=t[e+1];const c=this.tmpCoordinate_;let u,g,p,f=!0;for(u=e+o;u<i;u+=o)c[0]=t[u],c[1]=t[u+1],p=wt(l,c),p!==g?(f&&(s[a++]=h,s[a++]=d,f=!1),s[a++]=c[0],s[a++]=c[1]):p===mt.INTERSECTING?(s[a++]=c[0],s[a++]=c[1],f=!1):f=!0,h=c[0],d=c[1],g=p;return(n&&f||u===e+o)&&(s[a++]=h,s[a++]=d),a}drawCustomCoordinates_(t,e,i,o,n){for(let r=0,s=i.length;r<s;++r){const s=i[r],a=this.appendFlatLineCoordinates(t,e,s,o,!1,!1);n.push(a),e=s}return e}drawCustom(t,e,i,o){this.beginGeometry(t,e);const n=t.getType(),r=t.getStride(),s=this.coordinates.length;let a,l,h,d,c;switch(n){case"MultiPolygon":a=t.getOrientedFlatCoordinates(),d=[];const e=t.getEndss();c=0;for(let t=0,i=e.length;t<i;++t){const i=[];c=this.drawCustomCoordinates_(a,c,e[t],r,i),d.push(i)}this.instructions.push([fl.CUSTOM,s,d,t,i,Yn]),this.hitDetectionInstructions.push([fl.CUSTOM,s,d,t,o||i,Yn]);break;case"Polygon":case"MultiLineString":h=[],a="Polygon"==n?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),c=this.drawCustomCoordinates_(a,0,t.getEnds(),r,h),this.instructions.push([fl.CUSTOM,s,h,t,i,Wn]),this.hitDetectionInstructions.push([fl.CUSTOM,s,h,t,o||i,Wn]);break;case"LineString":case"Circle":a=t.getFlatCoordinates(),l=this.appendFlatLineCoordinates(a,0,a.length,r,!1,!1),this.instructions.push([fl.CUSTOM,s,l,t,i,jn]),this.hitDetectionInstructions.push([fl.CUSTOM,s,l,t,o||i,jn]);break;case"MultiPoint":a=t.getFlatCoordinates(),l=this.appendFlatPointCoordinates(a,r),l>s&&(this.instructions.push([fl.CUSTOM,s,l,t,i,jn]),this.hitDetectionInstructions.push([fl.CUSTOM,s,l,t,o||i,jn]));break;case"Point":a=t.getFlatCoordinates(),this.coordinates.push(a[0],a[1]),l=this.coordinates.length,this.instructions.push([fl.CUSTOM,s,l,t,i]),this.hitDetectionInstructions.push([fl.CUSTOM,s,l,t,o||i]);break;default:}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[fl.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[fl.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const i=t.length;let o,n,r=-1;for(e=0;e<i;++e)o=t[e],n=o[0],n==fl.END_GEOMETRY?r=e:n==fl.BEGIN_GEOMETRY&&(o[2]=e,_(this.hitDetectionInstructions,r,e),r=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const e=t.getColor();i.fillStyle=Ia(e||oi)}else i.fillStyle=void 0;if(e){const t=e.getColor();i.strokeStyle=Ia(t||hi);const o=e.getLineCap();i.lineCap=void 0!==o?o:ni;const n=e.getLineDash();i.lineDash=n?n.slice():ri;const r=e.getLineDashOffset();i.lineDashOffset=r||si;const s=e.getLineJoin();i.lineJoin=void 0!==s?s:ai;const a=e.getWidth();i.lineWidth=void 0!==a?a:gi;const l=e.getMiterLimit();i.miterLimit=void 0!==l?l:li,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[fl.SET_FILL_STYLE,e];return"string"!==typeof e&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[fl.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;"string"===typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,o=t.lineCap,n=t.lineDash,r=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=o||n!=t.currentLineDash&&!x(t.currentLineDash,n)||t.currentLineDashOffset!=r||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=o,t.currentLineDash=n,t.currentLineDashOffset=r,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[fl.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=vt(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;xt(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}var xl=bl;class vl extends xl{constructor(t,e,i,o){super(t,e,i,o),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),o=t.getStride(),n=this.coordinates.length,r=this.appendFlatPointCoordinates(i,o);this.instructions.push([fl.DRAW_IMAGE,n,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fl.DRAW_IMAGE,n,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),o=t.getStride(),n=this.coordinates.length,r=this.appendFlatPointCoordinates(i,o);this.instructions.push([fl.DRAW_IMAGE,n,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fl.DRAW_IMAGE,n,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),o=t.getSize(),n=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=n[0],this.originY_=n[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}var yl=vl;class El extends xl{constructor(t,e,i,o){super(t,e,i,o)}drawFlatCoordinates_(t,e,i,o){const n=this.coordinates.length,r=this.appendFlatLineCoordinates(t,e,i,o,!1,!1),s=[fl.MOVE_TO_LINE_TO,n,r];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i}drawLineString(t,e){const i=this.state,o=i.strokeStyle,n=i.lineWidth;if(void 0===o||void 0===n)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([fl.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ri,si],gl);const r=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(r,0,r.length,s),this.hitDetectionInstructions.push(ul),this.endGeometry(e)}drawMultiLineString(t,e){const i=this.state,o=i.strokeStyle,n=i.lineWidth;if(void 0===o||void 0===n)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([fl.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],gl);const r=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride();let l=0;for(let h=0,d=r.length;h<d;++h)l=this.drawFlatCoordinates_(s,l,r[h],a);this.hitDetectionInstructions.push(ul),this.endGeometry(e)}finish(){const t=this.state;return void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(ul),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(ul),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(gl)}}var Cl=El;class Sl extends xl{constructor(t,e,i,o){super(t,e,i,o)}drawFlatCoordinatess_(t,e,i,o){const n=this.state,r=void 0!==n.fillStyle,s=void 0!==n.strokeStyle,a=i.length;this.instructions.push(gl),this.hitDetectionInstructions.push(gl);for(let l=0;l<a;++l){const n=i[l],r=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,n,o,!0,!s),h=[fl.MOVE_TO_LINE_TO,r,a];this.instructions.push(h),this.hitDetectionInstructions.push(h),s&&(this.instructions.push(pl),this.hitDetectionInstructions.push(pl)),e=n}return r&&(this.instructions.push(cl),this.hitDetectionInstructions.push(cl)),s&&(this.instructions.push(ul),this.hitDetectionInstructions.push(ul)),e}drawCircle(t,e){const i=this.state,o=i.fillStyle,n=i.strokeStyle;if(void 0===o&&void 0===n)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([fl.SET_FILL_STYLE,oi]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([fl.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const r=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatLineCoordinates(r,0,r.length,s,!1,!1);const l=[fl.CIRCLE,a];this.instructions.push(gl,l),this.hitDetectionInstructions.push(gl,l),void 0!==i.fillStyle&&(this.instructions.push(cl),this.hitDetectionInstructions.push(cl)),void 0!==i.strokeStyle&&(this.instructions.push(ul),this.hitDetectionInstructions.push(ul)),this.endGeometry(e)}drawPolygon(t,e){const i=this.state,o=i.fillStyle,n=i.strokeStyle;if(void 0===o&&void 0===n)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([fl.SET_FILL_STYLE,oi]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([fl.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const r=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,r,a),this.endGeometry(e)}drawMultiPolygon(t,e){const i=this.state,o=i.fillStyle,n=i.strokeStyle;if(void 0===o&&void 0===n)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([fl.SET_FILL_STYLE,oi]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([fl.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const r=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride();let l=0;for(let h=0,d=r.length;h<d;++h)l=this.drawFlatCoordinatess_(s,l,r[h],a);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let i=0,o=e.length;i<o;++i)e[i]=kn(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state,e=t.fillStyle;void 0!==e&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}var wl=Sl;function Rl(t,e,i,o,n){let r,s,a,l,h,d,c,u,g,p,f=i,m=i,_=0,b=0,x=i;for(s=i;s<o;s+=n){const i=e[s],o=e[s+1];void 0!==h&&(g=i-h,p=o-d,l=Math.sqrt(g*g+p*p),void 0!==c&&(b+=a,r=Math.acos((c*g+u*p)/(a*l)),r>t&&(b>_&&(_=b,f=x,m=s),b=0,x=s-n)),a=l,c=g,u=p),h=i,d=o}return b+=l,b>_?[x,s]:[f,m]}const Tl={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Il extends xl{constructor(t,e,i,o){super(t,e,i,o),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const i=this.textFillState_,o=this.textStrokeState_,n=this.textState_;if(""===this.text_||!n||!i&&!o)return;const r=this.coordinates;let s=r.length;const a=t.getType();let l=null,h=t.getStride();if("line"!==n.placement||"LineString"!=a&&"MultiLineString"!=a&&"Polygon"!=a&&"MultiPolygon"!=a){let i=n.overflow?null:[];switch(a){case"Point":case"MultiPoint":l=t.getFlatCoordinates();break;case"LineString":l=t.getFlatMidpoint();break;case"Circle":l=t.getCenter();break;case"MultiLineString":l=t.getFlatMidpoints(),h=2;break;case"Polygon":l=t.getFlatInteriorPoint(),n.overflow||i.push(l[2]/this.resolution),h=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();l=[];for(let t=0,o=e.length;t<o;t+=3)n.overflow||i.push(e[t+2]/this.resolution),l.push(e[t],e[t+1]);if(0===l.length)return;h=2;break;default:}const o=this.appendFlatPointCoordinates(l,h);if(o===s)return;if(i&&(o-s)/2!==l.length/h){let t=s/2;i=i.filter(((e,i)=>{const o=r[2*(t+i)]===l[i*h]&&r[2*(t+i)+1]===l[i*h+1];return o||--t,o}))}this.saveTextStates_(),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),n.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),n.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let d=n.padding;if(d!=ui&&(n.scale[0]<0||n.scale[1]<0)){let t=n.padding[0],e=n.padding[1],i=n.padding[2],o=n.padding[3];n.scale[0]<0&&(e=-e,o=-o),n.scale[1]<0&&(t=-t,i=-i),d=[t,e,i,o]}const c=this.pixelRatio;this.instructions.push([fl.DRAW_IMAGE,s,o,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,d==ui?ui:d.map((function(t){return t*c})),!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]);const u=1/c;this.hitDetectionInstructions.push([fl.DRAW_IMAGE,s,o,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[u,u],NaN,void 0,this.declutterImageWithText_,d,!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),this.endGeometry(e)}else{if(!Ht(this.getBufferedMaxExtent(),t.getExtent()))return;let i;if(l=t.getFlatCoordinates(),"LineString"==a)i=[l.length];else if("MultiLineString"==a)i=t.getEnds();else if("Polygon"==a)i=t.getEnds().slice(0,1);else if("MultiPolygon"==a){const e=t.getEndss();i=[];for(let t=0,o=e.length;t<o;++t)i.push(e[t][0])}this.beginGeometry(t,e);const o=n.textAlign;let d,c=0;for(let t=0,e=i.length;t<e;++t){if(void 0==o){const e=Rl(n.maxAngle,l,c,i[t],h);c=e[0],d=e[1]}else d=i[t];for(let t=c;t<d;t+=h)r.push(l[t],l[t+1]);const e=r.length;c=i[t],this.drawChars_(s,e),s=e}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,o=this.strokeKey_;t&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const n=this.textKey_;n in this.textStates||(this.textStates[n]={font:e.font,textAlign:e.textAlign||di,justify:e.justify,textBaseline:e.textBaseline||ci,scale:e.scale});const r=this.fillKey_;i&&(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,o=this.textState_,n=this.strokeKey_,r=this.textKey_,s=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,l=Tl[o.textBaseline],h=this.textOffsetY_*a,d=this.text_,c=i?i.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([fl.DRAW_CHARS,t,e,l,o.overflow,s,o.maxAngle,a,h,n,c*a,d,r,1]),this.hitDetectionInstructions.push([fl.DRAW_CHARS,t,e,l,o.overflow,s,o.maxAngle,1,h,n,c,d,r,1/a])}setTextStyle(t,e){let i,o,n;if(t){const e=t.getFill();e?(o=this.textFillState_,o||(o={},this.textFillState_=o),o.fillStyle=Ia(e.getColor()||oi)):(o=null,this.textFillState_=o);const r=t.getStroke();if(r){n=this.textStrokeState_,n||(n={},this.textStrokeState_=n);const t=r.getLineDash(),e=r.getLineDashOffset(),i=r.getWidth(),o=r.getMiterLimit();n.lineCap=r.getLineCap()||ni,n.lineDash=t?t.slice():ri,n.lineDashOffset=void 0===e?si:e,n.lineJoin=r.getLineJoin()||ai,n.lineWidth=void 0===i?gi:i,n.miterLimit=void 0===o?li:o,n.strokeStyle=Ia(r.getColor()||hi)}else n=null,this.textStrokeState_=n;i=this.textState_;const s=t.getFont()||ii;bi(s);const a=t.getScaleArray();i.overflow=t.getOverflow(),i.font=s,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||ci,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||ui,i.scale=void 0===a?[1,1]:a;const l=t.getOffsetX(),h=t.getOffsetY(),d=t.getRotateWithView(),c=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===l?0:l,this.textOffsetY_=void 0===h?0:h,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0===c?0:c,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:G(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=o?"string"==typeof o.fillStyle?o.fillStyle:"|"+G(o.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}var Ml=Il;const Ll={Circle:wl,Default:xl,Image:yl,LineString:Cl,Polygon:wl,Text:Ml};class Ol{constructor(t,e,i,o){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=o,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const o in i){const n=i[o].finish();t[e][o]=n}}return t}getBuilder(t,e){const i=void 0!==t?t.toString():"0";let o=this.buildersByZIndex_[i];void 0===o&&(o={},this.buildersByZIndex_[i]=o);let n=o[e];if(void 0===n){const t=Ll[e];n=new t(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),o[e]=n}return n}}var Al=Ol;class Pl extends F{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return k()}getData(t){return null}prepareFrame(t){return k()}renderFrame(t,e){return k()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return function(o,n){const r=this.loadedTileCallback.bind(this,i,o);return t.forEachLoadedTile(e,o,n,r)}.bind(this)}forEachFeatureAtCoordinate(t,e,i,o,n){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;e.getState()===wa.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=wa.LOADED&&e!=wa.ERROR&&t.addEventListener(M.CHANGE,this.boundHandleImageChange_),e==wa.IDLE&&(t.load(),e=t.getState()),e==wa.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}var Dl=Pl;const Fl=[];let kl=null;function Nl(){const t=document.createElement("canvas");t.width=1,t.height=1,kl=t.getContext("2d")}class Gl extends Dl{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=st(),this.pixelTransform=st(),this.inversePixelTransform=st(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){let o;kl||Nl(),kl.clearRect(0,0,1,1);try{kl.drawImage(t,e,i,1,1,0,0,1,1),o=kl.getImageData(0,0,1,1).data}catch(n){return kl=null,null}return o}getBackground(t){const e=this.getLayer();let i=e.getBackground();return"function"===typeof i&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,e,i){const o=this.getLayer().getClassName();let n,r;if(t&&t.className===o&&(!i||t&&t.style.backgroundColor&&x(be(t.style.backgroundColor),be(i)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(r=e.getContext("2d"))}if(r&&r.canvas.style.transform===e?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){n=document.createElement("div"),n.className=o;let t=n.style;t.position="absolute",t.width="100%",t.height="100%",r=qe();const e=r.canvas;n.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=n,this.context=r}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const o=Ut(i),n=Zt(i),r=zt(i),s=Gt(i);ht(e.coordinateToPixelTransform,o),ht(e.coordinateToPixelTransform,n),ht(e.coordinateToPixelTransform,r),ht(e.coordinateToPixelTransform,s);const a=this.inversePixelTransform;ht(a,o),ht(a,n),ht(a,r),ht(a,s),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()}dispatchRenderEvent_(t,e,i){const o=this.getLayer();if(o.hasListener(t)){const n=new Ye(t,this.inversePixelTransform,i,e);o.dispatchEvent(n)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(Ie.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(Ie.POSTRENDER,t,e)}getRenderTransform(t,e,i,o,n,r,s){const a=n/2,l=r/2,h=o/e,d=-h,c=-t[0]+s,u=-t[1];return ct(this.tempTransform,a,l,h,d,-i,c,u)}disposeInternal(){delete this.frameState,super.disposeInternal()}}var zl=Gl;function jl(t,e,i,o,n,r,s,a,l,h,d,c){let u=t[e],g=t[e+1],p=0,f=0,m=0,_=0;function b(){p=u,f=g,e+=o,u=t[e],g=t[e+1],_+=m,m=Math.sqrt((u-p)*(u-p)+(g-f)*(g-f))}do{b()}while(e<i-o&&_+m<r);let x=0===m?0:(r-_)/m;const v=le(p,u,x),y=le(f,g,x),E=e-o,C=_,S=r+a*l(h,n,d);while(e<i-o&&_+m<S)b();x=0===m?0:(S-_)/m;const w=le(p,u,x),R=le(f,g,x);let T;if(c){const t=[v,y,w,R];un(t,0,4,2,c,t,t),T=t[0]>t[2]}else T=v>w;const I=Math.PI,M=[],L=E+o===e;let O;if(e=E,m=0,_=C,u=t[e],g=t[e+1],L){b(),O=Math.atan2(g-f,u-p),T&&(O+=O>0?-I:I);const t=(w+v)/2,e=(R+y)/2;return M[0]=[t,e,(S-r)/2,O,n],M}n=n.replace(/\n/g," ");for(let A=0,P=n.length;A<P;){b();let t=Math.atan2(g-f,u-p);if(T&&(t+=t>0?-I:I),void 0!==O){let e=t-O;if(e+=e>I?-2*I:e<-I?2*I:0,Math.abs(e)>s)return null}O=t;const c=A;let v=0;for(;A<P;++A){const t=T?P-A-1:A,s=a*l(h,n[t],d);if(e+o<i&&_+m<r+v+s/2)break;v+=s}if(A===c)continue;const y=T?n.substring(P-c,P-A):n.substring(c,A);x=0===m?0:(r+v/2-_)/m;const E=le(p,u,x),C=le(f,g,x);M.push([E,C,v/2,t,y]),r+=v}return M}function Wl(t,e,i,o){let n=t[e],r=t[e+1],s=0;for(let a=e+o;a<i;a+=o){const e=t[a],i=t[a+1];s+=Math.sqrt((e-n)*(e-n)+(i-r)*(i-r)),n=e,r=i}return s}const Yl=Rt(),Xl=[],Bl=[],Vl=[],Ul=[];function Zl(t){return t[3].declutterBox}const Kl=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Hl(t,e){return"start"!==e&&"end"!==e||Kl.test(t)||(e="start"===e?"left":"right"),Tl[e]}function ql(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}class Jl{constructor(t,e,i,o){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=o.instructions,this.coordinates=o.coordinates,this.coordinateCache_={},this.renderedTransform_=st(),this.hitDetectionInstructions=o.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=o.fillStates||{},this.strokeStates=o.strokeStates||{},this.textStates=o.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,o){const n=t+e+i+o;if(this.labels_[n])return this.labels_[n];const r=o?this.strokeStates[o]:null,s=i?this.fillStates[i]:null,a=this.textStates[e],l=this.pixelRatio,h=[a.scale[0]*l,a.scale[1]*l],d=Array.isArray(t),c=a.justify?Tl[a.justify]:Hl(Array.isArray(t)?t[0]:t,a.textAlign||di),u=o&&r.lineWidth?r.lineWidth:0,g=d?t:t.split("\n").reduce(ql,[]),{width:p,height:f,widths:m,heights:_,lineWidths:b}=Ci(a,g),x=p+u,v=[],y=(x+2)*h[0],E=(f+u)*h[1],C={width:y<0?Math.floor(y):Math.ceil(y),height:E<0?Math.floor(E):Math.ceil(E),contextInstructions:v};1==h[0]&&1==h[1]||v.push("scale",h),o&&(v.push("strokeStyle",r.strokeStyle),v.push("lineWidth",u),v.push("lineCap",r.lineCap),v.push("lineJoin",r.lineJoin),v.push("miterLimit",r.miterLimit),v.push("setLineDash",[r.lineDash]),v.push("lineDashOffset",r.lineDashOffset)),i&&v.push("fillStyle",s.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");const S=.5-c;let w=c*x+S*u;const R=[],T=[];let I,M=0,L=0,O=0,A=0;for(let P=0,D=g.length;P<D;P+=2){const t=g[P];if("\n"===t){L+=M,M=0,w=c*x+S*u,++A;continue}const e=g[P+1]||a.font;e!==I&&(o&&R.push("font",e),i&&T.push("font",e),I=e),M=Math.max(M,_[O]);const n=[t,w+S*m[O]+c*(m[O]-b[A]),.5*(u+M)+L];w+=m[O],o&&R.push("strokeText",n),i&&T.push("fillText",n),++O}return Array.prototype.push.apply(v,R),Array.prototype.push.apply(v,T),this.labels_[n]=C,C}replayTextBackground_(t,e,i,o,n,r,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,o),t.lineTo.apply(t,n),t.lineTo.apply(t,e),r&&(this.alignFill_=r[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,o,n,r,s,a,l,h,d,c,u,g,p,f){s*=c[0],a*=c[1];let m=i-s,_=o-a;const b=n+l>t?t-l:n,x=r+h>e?e-h:r,v=g[3]+b*c[0]+g[1],y=g[0]+x*c[1]+g[2],E=m-g[3],C=_-g[0];let S;return(p||0!==d)&&(Xl[0]=E,Ul[0]=E,Xl[1]=C,Bl[1]=C,Bl[0]=E+v,Vl[0]=Bl[0],Vl[1]=C+y,Ul[1]=Vl[1]),0!==d?(S=ct(st(),i,o,1,1,d,-i,-o),ht(S,Xl),ht(S,Bl),ht(S,Vl),ht(S,Ul),Tt(Math.min(Xl[0],Bl[0],Vl[0],Ul[0]),Math.min(Xl[1],Bl[1],Vl[1],Ul[1]),Math.max(Xl[0],Bl[0],Vl[0],Ul[0]),Math.max(Xl[1],Bl[1],Vl[1],Ul[1]),Yl)):Tt(Math.min(E,E+v),Math.min(C,C+y),Math.max(E,E+v),Math.max(C,C+y),Yl),u&&(m=Math.round(m),_=Math.round(_)),{drawImageX:m,drawImageY:_,drawImageW:b,drawImageH:x,originX:l,originY:h,declutterBox:{minX:Yl[0],minY:Yl[1],maxX:Yl[2],maxY:Yl[3],value:f},canvasTransform:S,scale:c}}replayImageOrLabel_(t,e,i,o,n,r,s){const a=!(!r&&!s),l=o.declutterBox,h=t.canvas,d=s?s[2]*o.scale[0]/2:0,c=l.minX-d<=h.width/e&&l.maxX+d>=0&&l.minY-d<=h.height/e&&l.maxY+d>=0;return c&&(a&&this.replayTextBackground_(t,Xl,Bl,Vl,Ul,r,s),Si(t,o.canvasTransform,n,i,o.originX,o.originY,o.drawImageW,o.drawImageH,o.drawImageX,o.drawImageY,o.scale)),!0}fill_(t){if(this.alignFill_){const e=ht(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t["strokeStyle"]=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,o){const n=this.textStates[e],r=this.createLabel(t,e,o,i),s=this.strokeStates[i],a=this.pixelRatio,l=Hl(Array.isArray(t)?t[0]:t,n.textAlign||di),h=Tl[n.textBaseline||ci],d=s&&s.lineWidth?s.lineWidth:0,c=r.width/a-2*n.scale[0],u=l*c+2*(.5-l)*d,g=h*r.height/a+2*(.5-h)*d;return{label:r,anchorX:u,anchorY:g}}execute_(t,e,i,o,n,r,s,a){let l;this.pixelCoordinates_&&x(i,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=cn(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),lt(this.renderedTransform_,i));let h=0;const d=o.length;let c,u,g,p,f,m,_,b,v,y,E,C,S=0,w=0,R=0,T=null,I=null;const M=this.coordinateCache_,L=this.viewRotation_,O=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,A={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:L},P=this.instructions!=o||this.overlaps?0:200;let D,F,k,N;while(h<d){const i=o[h],d=i[0];switch(d){case fl.BEGIN_GEOMETRY:D=i[1],N=i[3],D.getGeometry()?void 0===s||Ht(s,N.getExtent())?++h:h=i[2]+1:h=i[2];break;case fl.BEGIN_PATH:w>P&&(this.fill_(t),w=0),R>P&&(t.stroke(),R=0),w||R||(t.beginPath(),p=NaN,f=NaN),++h;break;case fl.CIRCLE:S=i[1];const o=l[S],d=l[S+1],x=l[S+2],G=l[S+3],z=x-o,j=G-d,W=Math.sqrt(z*z+j*j);t.moveTo(o+W,d),t.arc(o,d,W,0,2*Math.PI,!0),++h;break;case fl.CLOSE_PATH:t.closePath(),++h;break;case fl.CUSTOM:S=i[1],c=i[2];const Y=i[3],X=i[4],B=6==i.length?i[5]:void 0;A.geometry=Y,A.feature=D,h in M||(M[h]=[]);const V=M[h];B?B(l,S,c,2,V):(V[0]=l[S],V[1]=l[S+1],V.length=2),X(V,A),++h;break;case fl.DRAW_IMAGE:S=i[1],c=i[2],b=i[3],u=i[4],g=i[5];let U=i[6];const Z=i[7],K=i[8],H=i[9],q=i[10];let J=i[11];const $=i[12];let Q=i[13];const tt=i[14],et=i[15];if(!b&&i.length>=20){v=i[19],y=i[20],E=i[21],C=i[22];const t=this.drawLabelWithPointPlacement_(v,y,E,C);b=t.label,i[3]=b;const e=i[23];u=(t.anchorX-e)*this.pixelRatio,i[4]=u;const o=i[24];g=(t.anchorY-o)*this.pixelRatio,i[5]=g,U=b.height,i[6]=U,Q=b.width,i[13]=Q}let it,ot,nt,rt;i.length>25&&(it=i[25]),i.length>17?(ot=i[16],nt=i[17],rt=i[18]):(ot=ui,nt=!1,rt=!1),q&&O?J+=L:q||O||(J-=L);let st=0;for(;S<c;S+=2){if(it&&it[st++]<Q/this.pixelRatio)continue;const i=this.calculateImageOrLabelDimensions_(b.width,b.height,l[S],l[S+1],Q,U,u,g,K,H,J,$,n,ot,nt||rt,D),o=[t,e,b,i,Z,nt?T:null,rt?I:null];if(a){if("none"===tt)continue;if("obstacle"===tt){a.insert(i.declutterBox);continue}{let t,e;if(et){const i=c-S;if(!et[i]){et[i]=o;continue}if(t=et[i],delete et[i],e=Zl(t),a.collides(e))continue}if(a.collides(i.declutterBox))continue;t&&(a.insert(e),this.replayImageOrLabel_.apply(this,t)),a.insert(i.declutterBox)}}this.replayImageOrLabel_.apply(this,o)}++h;break;case fl.DRAW_CHARS:const at=i[1],lt=i[2],ht=i[3],dt=i[4];C=i[5];const ct=i[6],ut=i[7],gt=i[8];E=i[9];const pt=i[10];v=i[11],y=i[12];const ft=[i[13],i[13]],mt=this.textStates[y],_t=mt.font,bt=[mt.scale[0]*ut,mt.scale[1]*ut];let xt;_t in this.widths_?xt=this.widths_[_t]:(xt={},this.widths_[_t]=xt);const vt=Wl(l,at,lt,2),yt=Math.abs(bt[0])*Ei(_t,v,xt);if(dt||yt<=vt){const i=this.textStates[y].textAlign,o=(vt-yt)*Tl[i],n=jl(l,at,lt,2,v,o,ct,Math.abs(bt[0]),Ei,_t,xt,O?0:this.viewRotation_);t:if(n){const i=[];let o,r,s,l,h;if(E)for(o=0,r=n.length;o<r;++o){h=n[o],s=h[4],l=this.createLabel(s,y,"",E),u=h[2]+(bt[0]<0?-pt:pt),g=ht*l.height+2*(.5-ht)*pt*bt[1]/bt[0]-gt;const r=this.calculateImageOrLabelDimensions_(l.width,l.height,h[0],h[1],l.width,l.height,u,g,0,0,h[3],ft,!1,ui,!1,D);if(a&&a.collides(r.declutterBox))break t;i.push([t,e,l,r,1,null,null])}if(C)for(o=0,r=n.length;o<r;++o){h=n[o],s=h[4],l=this.createLabel(s,y,C,""),u=h[2],g=ht*l.height-gt;const r=this.calculateImageOrLabelDimensions_(l.width,l.height,h[0],h[1],l.width,l.height,u,g,0,0,h[3],ft,!1,ui,!1,D);if(a&&a.collides(r.declutterBox))break t;i.push([t,e,l,r,1,null,null])}a&&a.load(i.map(Zl));for(let t=0,e=i.length;t<e;++t)this.replayImageOrLabel_.apply(this,i[t])}}++h;break;case fl.END_GEOMETRY:if(void 0!==r){D=i[1];const t=r(D,N);if(t)return t}++h;break;case fl.FILL:P?w++:this.fill_(t),++h;break;case fl.MOVE_TO_LINE_TO:for(S=i[1],c=i[2],F=l[S],k=l[S+1],m=F+.5|0,_=k+.5|0,m===p&&_===f||(t.moveTo(F,k),p=m,f=_),S+=2;S<c;S+=2)F=l[S],k=l[S+1],m=F+.5|0,_=k+.5|0,S!=c-2&&m===p&&_===f||(t.lineTo(F,k),p=m,f=_);++h;break;case fl.SET_FILL_STYLE:T=i,this.alignFill_=i[2],w&&(this.fill_(t),w=0,R&&(t.stroke(),R=0)),t.fillStyle=i[1],++h;break;case fl.SET_STROKE_STYLE:I=i,R&&(t.stroke(),R=0),this.setStrokeStyle_(t,i),++h;break;case fl.STROKE:P?R++:t.stroke(),++h;break;default:++h;break}}w&&this.fill_(t),R&&t.stroke()}execute(t,e,i,o,n,r){this.viewRotation_=o,this.execute_(t,e,i,this.instructions,n,void 0,void 0,r)}executeHitDetection(t,e,i,o,n){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,o,n)}}var $l=Jl;const Ql=["Polygon","Circle","LineString","Image","Text","Default"];class th{constructor(t,e,i,o,n,r){this.maxExtent_=t,this.overlaps_=o,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=st(),this.createExecutors_(n)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const e in t){let i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);const o=t[e];for(const t in o){const e=o[t];i[t]=new $l(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let e=0,o=t.length;e<o;++e)if(t[e]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,o,n,r){o=Math.round(o);const s=2*o+1,a=ct(this.hitDetectionTransform_,o+.5,o+.5,1/e,-1/e,-i,-t[0],-t[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=qe(s,s));const h=this.hitDetectionContext_;let d;h.canvas.width!==s||h.canvas.height!==s?(h.canvas.width=s,h.canvas.height=s):l||h.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(d=Rt(),Pt(d,t),xt(d,e*(this.renderBuffer_+o),d));const c=ih(o);let u;function g(t,e){const i=h.getImageData(0,0,s,s).data;for(let a=0,l=c.length;a<l;a++)if(i[c[a]]>0){if(!r||"Image"!==u&&"Text"!==u||r.includes(t)){const i=(c[a]-3)/4,r=o-i%s,l=o-(i/s|0),h=n(t,e,r*r+l*l);if(h)return h}h.clearRect(0,0,s,s);break}}const p=Object.keys(this.executorsByZIndex_).map(Number);let m,_,b,x,v;for(p.sort(f),m=p.length-1;m>=0;--m){const t=p[m].toString();for(b=this.executorsByZIndex_[t],_=Ql.length-1;_>=0;--_)if(u=Ql[_],x=b[u],void 0!==x&&(v=x.executeHitDetection(h,a,i,g,d),v))return v}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],o=e[1],n=e[2],r=e[3],s=[i,o,i,r,n,r,n,o];return cn(s,0,8,2,t,s),s}isEmpty(){return R(this.executorsByZIndex_)}execute(t,e,i,o,n,r,s){const a=Object.keys(this.executorsByZIndex_).map(Number);let l,h,d,c,u,g;for(a.sort(f),this.maxExtent_&&(t.save(),this.clip(t,i)),r=r||Ql,s&&a.reverse(),l=0,h=a.length;l<h;++l){const h=a[l].toString();for(u=this.executorsByZIndex_[h],d=0,c=r.length;d<c;++d){const a=r[d];g=u[a],void 0!==g&&g.execute(t,e,i,o,n,s)}}this.maxExtent_&&t.restore()}}const eh={};function ih(t){if(void 0!==eh[t])return eh[t];const e=2*t+1,i=t*t,o=new Array(i+1);for(let r=0;r<=t;++r)for(let n=0;n<=t;++n){const s=r*r+n*n;if(s>i)break;let a=o[s];a||(a=[],o[s]=a),a.push(4*((t+r)*e+(t+n))+3),r>0&&a.push(4*((t-r)*e+(t+n))+3),n>0&&(a.push(4*((t+r)*e+(t-n))+3),r>0&&a.push(4*((t-r)*e+(t-n))+3))}const n=[];for(let r=0,s=o.length;r<s;++r)o[r]&&n.push(...o[r]);return eh[t]=n,n}var oh=th;class nh extends _l{constructor(t,e,i,o,n,r,s){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=o,this.viewRotation_=n,this.squaredTolerance_=r,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=st()}drawImages_(t,e,i,o){if(!this.image_)return;const n=cn(t,e,i,o,this.transform_,this.pixelCoordinates_),r=this.context_,s=this.tmpLocalTransform_,a=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=a*this.imageOpacity_);let l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(let h=0,d=n.length;h<d;h+=2){const t=n[h]-this.imageAnchorX_,e=n[h+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const i=t+this.imageAnchorX_,o=e+this.imageAnchorY_;ct(s,i,o,1,1,l,-i,-o),r.setTransform.apply(r,s),r.translate(i,o),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.setTransform(1,0,0,1,0,0)}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,e,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(r.globalAlpha=a)}drawText_(t,e,i,o){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const n=cn(t,e,i,o,this.transform_,this.pixelCoordinates_),r=this.context_;let s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=o){const t=n[e]+this.textOffsetX_,i=n[e+1]+this.textOffsetY_;0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]?(r.translate(t-this.textOffsetX_,i-this.textOffsetY_),r.rotate(s),r.translate(this.textOffsetX_,this.textOffsetY_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&r.strokeText(this.text_,t,i),this.textFillState_&&r.fillText(this.text_,t,i))}}moveToLineTo_(t,e,i,o,n){const r=this.context_,s=cn(t,e,i,o,this.transform_,this.pixelCoordinates_);r.moveTo(s[0],s[1]);let a=s.length;n&&(a-=2);for(let l=2;l<a;l+=2)r.lineTo(s[l],s[l+1]);return n&&r.closePath(),i}drawRings_(t,e,i,o){for(let n=0,r=i.length;n<r;++n)e=this.moveToLineTo_(t,e,i[n],o,!0);return e}drawCircle(t){if(Ht(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=yn(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],o=e[3]-e[1],n=Math.sqrt(i*i+o*o),r=this.context_;r.beginPath(),r.arc(e[0],e[1],n,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){const e=t.getType();switch(e){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break;default:}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&Ht(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,o=e.length;i<o;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ht(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(Ht(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();let o=0;const n=t.getEnds(),r=t.getStride();e.beginPath();for(let t=0,s=n.length;t<s;++t)o=this.moveToLineTo_(i,o,n[t],r,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ht(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ht(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let o=0;const n=t.getEndss(),r=t.getStride();e.beginPath();for(let t=0,s=n.length;t<s;++t){const e=n[t];o=this.drawRings_(i,o,e,r)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),x(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,o=t.textAlign?t.textAlign:di;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=o&&(i.textAlign=o,e.textAlign=o),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=o,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:o,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:Ia(e||oi)}}else this.fillState_=null;if(e){const t=e.getColor(),i=e.getLineCap(),o=e.getLineDash(),n=e.getLineDashOffset(),r=e.getLineJoin(),s=e.getWidth(),a=e.getMiterLimit(),l=o||ri;this.strokeState_={lineCap:void 0!==i?i:ni,lineDash:1===this.pixelRatio_?l:l.map((t=>t*this.pixelRatio_)),lineDashOffset:(n||si)*this.pixelRatio_,lineJoin:void 0!==r?r:ai,lineWidth:(void 0!==s?s:gi)*this.pixelRatio_,miterLimit:void 0!==a?a:li,strokeStyle:Ia(t||hi)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const i=t.getPixelRatio(this.pixelRatio_),o=t.getAnchor(),n=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=o[0]*i,this.imageAnchorY_=o[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const r=t.getScaleArray();this.imageScale_=[r[0]*this.pixelRatio_/i,r[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:Ia(t||oi)}}else this.textFillState_=null;const i=t.getStroke();if(i){const t=i.getColor(),e=i.getLineCap(),o=i.getLineDash(),n=i.getLineDashOffset(),r=i.getLineJoin(),s=i.getWidth(),a=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:ni,lineDash:o||ri,lineDashOffset:n||si,lineJoin:void 0!==r?r:ai,lineWidth:void 0!==s?s:gi,miterLimit:void 0!==a?a:li,strokeStyle:Ia(t||hi)}}else this.textStrokeState_=null;const o=t.getFont(),n=t.getOffsetX(),r=t.getOffsetY(),s=t.getRotateWithView(),a=t.getRotation(),l=t.getScaleArray(),h=t.getText(),d=t.getTextAlign(),c=t.getTextBaseline();this.textState_={font:void 0!==o?o:ii,textAlign:void 0!==d?d:di,textBaseline:void 0!==c?c:ci},this.text_=void 0!==h?Array.isArray(h)?h.reduce(((t,e,i)=>t+(i%2?" ":e)),""):h:"",this.textOffsetX_=void 0!==n?this.pixelRatio_*n:0,this.textOffsetY_=void 0!==r?this.pixelRatio_*r:0,this.textRotateWithView_=void 0!==s&&s,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}}var rh=nh;const sh=.5;function ah(t,e,i,o,n,r,s){const a=t[0]*sh,l=t[1]*sh,h=qe(a,l);h.imageSmoothingEnabled=!1;const d=h.canvas,c=new rh(h,sh,n,null,s),u=i.length,g=Math.floor(16777215/u),p={};for(let f=1;f<=u;++f){const t=i[f-1],e=t.getStyleFunction()||o;if(!o)continue;let s=e(t,r);if(!s)continue;Array.isArray(s)||(s=[s]);const a=f*g,l="#"+("000000"+a.toString(16)).slice(-6);for(let i=0,o=s.length;i<o;++i){const e=s[i],o=e.getGeometryFunction()(t);if(!o||!Ht(n,o.getExtent()))continue;const r=e.clone(),a=r.getFill();a&&a.setColor(l);const h=r.getStroke();h&&(h.setColor(l),h.setLineDash(null)),r.setText(void 0);const d=e.getImage();if(d&&0!==d.getOpacity()){const t=d.getImageSize();if(!t)continue;const e=qe(t[0],t[1],void 0,{alpha:!1}),i=e.canvas;e.fillStyle=l,e.fillRect(0,0,i.width,i.height),r.setImage(new $a({img:i,imgSize:t,anchor:d.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:d.getOrigin(),opacity:1,size:d.getSize(),scale:d.getScale(),rotation:d.getRotation(),rotateWithView:d.getRotateWithView()}))}const c=r.getZIndex()||0;let u=p[c];u||(u={},p[c]=u,u["Polygon"]=[],u["Circle"]=[],u["LineString"]=[],u["Point"]=[]),u[o.getType().replace("Multi","")].push(o,r)}}const m=Object.keys(p).map(Number).sort(f);for(let f=0,_=m.length;f<_;++f){const t=p[m[f]];for(const i in t){const o=t[i];for(let t=0,i=o.length;t<i;t+=2){c.setStyle(o[t+1]);for(let i=0,n=e.length;i<n;++i)c.setTransform(e[i]),c.drawGeometry(o[t])}}}return h.getImageData(0,0,d.width,d.height)}function lh(t,e,i){const o=[];if(i){const n=Math.floor(Math.round(t[0])*sh),r=Math.floor(Math.round(t[1])*sh),s=4*(ie(n,0,i.width-1)+ie(r,0,i.height-1)*i.width),a=i.data[s],l=i.data[s+1],h=i.data[s+2],d=h+256*(l+256*a),c=Math.floor(16777215/e.length);d&&d%c===0&&o.push(e[d/c-1])}return o}const hh=.5,dh={Point:Eh,LineString:xh,Polygon:Sh,MultiPoint:Ch,MultiLineString:vh,MultiPolygon:yh,GeometryCollection:bh,Circle:ph};function ch(t,e){return parseInt(G(t),10)-parseInt(G(e),10)}function uh(t,e){const i=gh(t,e);return i*i}function gh(t,e){return hh*t/e}function ph(t,e,i,o,n){const r=i.getFill(),s=i.getStroke();if(r||s){const n=t.getBuilder(i.getZIndex(),"Circle");n.setFillStrokeStyle(r,s),n.drawCircle(e,o)}const a=i.getText();if(a&&a.getText()){const r=(n||t).getBuilder(i.getZIndex(),"Text");r.setTextStyle(a),r.drawText(e,o)}}function fh(t,e,i,o,n,r,s){let a=!1;const l=i.getImage();if(l){const t=l.getImageState();t==wa.LOADED||t==wa.ERROR?l.unlistenImageChange(n):(t==wa.IDLE&&l.load(),l.listenImageChange(n),a=!0)}return mh(t,e,i,o,r,s),a}function mh(t,e,i,o,n,r){const s=i.getGeometryFunction()(e);if(!s)return;const a=s.simplifyTransformed(o,n),l=i.getRenderer();if(l)_h(t,a,i,e);else{const o=dh[a.getType()];o(t,a,i,e,r)}}function _h(t,e,i,o){if("GeometryCollection"==e.getType()){const n=e.getGeometries();for(let e=0,r=n.length;e<r;++e)_h(t,n[e],i,o);return}const n=t.getBuilder(i.getZIndex(),"Default");n.drawCustom(e,o,i.getRenderer(),i.getHitDetectionRenderer())}function bh(t,e,i,o,n){const r=e.getGeometriesArray();let s,a;for(s=0,a=r.length;s<a;++s){const e=dh[r[s].getType()];e(t,r[s],i,o,n)}}function xh(t,e,i,o,n){const r=i.getStroke();if(r){const n=t.getBuilder(i.getZIndex(),"LineString");n.setFillStrokeStyle(null,r),n.drawLineString(e,o)}const s=i.getText();if(s&&s.getText()){const r=(n||t).getBuilder(i.getZIndex(),"Text");r.setTextStyle(s),r.drawText(e,o)}}function vh(t,e,i,o,n){const r=i.getStroke();if(r){const n=t.getBuilder(i.getZIndex(),"LineString");n.setFillStrokeStyle(null,r),n.drawMultiLineString(e,o)}const s=i.getText();if(s&&s.getText()){const r=(n||t).getBuilder(i.getZIndex(),"Text");r.setTextStyle(s),r.drawText(e,o)}}function yh(t,e,i,o,n){const r=i.getFill(),s=i.getStroke();if(s||r){const n=t.getBuilder(i.getZIndex(),"Polygon");n.setFillStrokeStyle(r,s),n.drawMultiPolygon(e,o)}const a=i.getText();if(a&&a.getText()){const r=(n||t).getBuilder(i.getZIndex(),"Text");r.setTextStyle(a),r.drawText(e,o)}}function Eh(t,e,i,o,n){const r=i.getImage(),s=i.getText();let a;if(r){if(r.getImageState()!=wa.LOADED)return;let l=t;if(n){const h=r.getDeclutterMode();if("none"!==h)if(l=n,"obstacle"===h){const n=t.getBuilder(i.getZIndex(),"Image");n.setImageStyle(r,a),n.drawPoint(e,o)}else s&&s.getText()&&(a={})}const h=l.getBuilder(i.getZIndex(),"Image");h.setImageStyle(r,a),h.drawPoint(e,o)}if(s&&s.getText()){let r=t;n&&(r=n);const l=r.getBuilder(i.getZIndex(),"Text");l.setTextStyle(s,a),l.drawText(e,o)}}function Ch(t,e,i,o,n){const r=i.getImage(),s=i.getText();let a;if(r){if(r.getImageState()!=wa.LOADED)return;let l=t;if(n){const h=r.getDeclutterMode();if("none"!==h)if(l=n,"obstacle"===h){const n=t.getBuilder(i.getZIndex(),"Image");n.setImageStyle(r,a),n.drawMultiPoint(e,o)}else s&&s.getText()&&(a={})}const h=l.getBuilder(i.getZIndex(),"Image");h.setImageStyle(r,a),h.drawMultiPoint(e,o)}if(s&&s.getText()){let r=t;n&&(r=n);const l=r.getBuilder(i.getZIndex(),"Text");l.setTextStyle(s,a),l.drawText(e,o)}}function Sh(t,e,i,o,n){const r=i.getFill(),s=i.getStroke();if(r||s){const n=t.getBuilder(i.getZIndex(),"Polygon");n.setFillStrokeStyle(r,s),n.drawPolygon(e,o)}const a=i.getText();if(a&&a.getText()){const r=(n||t).getBuilder(i.getZIndex(),"Text");r.setTextStyle(a),r.drawText(e,o)}}class wh extends zl{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Rt(),this.wrappedRenderedExtent_=Rt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){const o=e.extent,n=e.viewState,r=n.center,s=n.resolution,a=n.projection,l=n.rotation,h=a.getExtent(),d=this.getLayer().getSource(),c=e.pixelRatio,u=e.viewHints,g=!(u[Hi.ANIMATING]||u[Hi.INTERACTING]),p=this.compositionContext_,f=Math.round(e.size[0]*c),m=Math.round(e.size[1]*c),_=d.getWrapX()&&a.canWrapX(),b=_?Kt(h):null,x=_?Math.ceil((o[2]-h[2])/b)+1:1;let v=_?Math.floor((o[0]-h[0])/b):0;do{const e=this.getRenderTransform(r,s,l,c,f,m,v*b);t.execute(p,1,e,l,g,void 0,i)}while(++v<x)}setupCompositionContext_(){if(1!==this.opacity_){const t=qe(this.context.canvas.width,this.context.canvas.height,Fl);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,Je(this.compositionContext_),Fl.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const i=t.pixelRatio,o=t.layerStatesArray[t.layerIndex];dt(this.pixelTransform,1/i,1/i),ut(this.inversePixelTransform,this.pixelTransform);const n=ft(this.pixelTransform);this.useContainer(e,n,this.getBackground(t));const r=this.context,s=r.canvas,a=this.replayGroup_,l=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!l||l.isEmpty()))return null;const h=Math.round(t.size[0]*i),d=Math.round(t.size[1]*i);s.width!=h||s.height!=d?(s.width=h,s.height=d,s.style.transform!==n&&(s.style.transform=n)):this.containerReused||r.clearRect(0,0,h,d),this.preRender(r,t);const c=t.viewState,u=c.projection;this.opacity_=o.opacity,this.setupCompositionContext_();let g=!1,p=!0;if(o.extent&&this.clipping){const e=Uo(o.extent,u);p=Ht(e,t.extent),g=p&&!Ct(e,t.extent),g&&this.clipUnrotated(this.compositionContext_,t,e)}return p&&this.renderWorlds(a,t),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(r,t),this.renderedRotation_!==c.rotation&&(this.renderedRotation_=c.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];ht(this.pixelTransform,t);const e=this.renderedCenter_,i=this.renderedResolution_,o=this.renderedRotation_,n=this.renderedProjection_,r=this.wrappedRenderedExtent_,s=this.getLayer(),a=[],l=t[0]*sh,h=t[1]*sh;a.push(this.getRenderTransform(e,i,o,sh,l,h,0).slice());const d=s.getSource(),c=n.getExtent();if(d.getWrapX()&&n.canWrapX()&&!Ct(c,r)){let t=r[0];const n=Kt(c);let s,d=0;while(t<c[0])--d,s=n*d,a.push(this.getRenderTransform(e,i,o,sh,l,h,s).slice()),t+=n;d=0,t=r[2];while(t>c[2])++d,s=n*d,a.push(this.getRenderTransform(e,i,o,sh,l,h,s).slice()),t-=n}this.hitDetectionImageData_=ah(t,a,this.renderedFeatures_,s.getStyleFunction(),r,i,o)}e(lh(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(t,e,i,o,n){if(!this.replayGroup_)return;const r=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),l={},h=function(t,e,i){const r=G(t),s=l[r];if(s){if(!0!==s&&i<s.distanceSq){if(0===i)return l[r]=!0,n.splice(n.lastIndexOf(s),1),o(t,a,e);s.geometry=e,s.distanceSq=i}}else{if(0===i)return l[r]=!0,o(t,a,e);n.push(l[r]={feature:t,layer:a,geometry:e,distanceSq:i,callback:o})}};let d;const c=[this.replayGroup_];return this.declutterExecutorGroup&&c.push(this.declutterExecutorGroup),c.some((o=>d=o.forEachFeatureAtCoordinate(t,r,s,i,h,o===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((t=>t.value)):null))),d}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const o=t.viewHints[Hi.ANIMATING],n=t.viewHints[Hi.INTERACTING],r=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting();if(this.ready&&!r&&o||!s&&n)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const a=t.extent,l=t.viewState,h=l.projection,d=l.resolution,c=t.pixelRatio,u=e.getRevision(),g=e.getRenderBuffer();let p=e.getRenderOrder();void 0===p&&(p=ch);const f=l.center.slice(),m=xt(a,g*d),_=m.slice(),b=[m.slice()],v=h.getExtent();if(i.getWrapX()&&h.canWrapX()&&!Ct(v,t.extent)){const t=Kt(v),e=Math.max(Kt(m)/2,t);m[0]=v[0]-e,m[2]=v[2]+e,ke(f,h);const i=te(b[0],h);i[0]<v[0]&&i[2]<v[2]?b.push([i[0]+t,i[1],i[2]+t,i[3]]):i[0]>v[0]&&i[2]>v[2]&&b.push([i[0]-t,i[1],i[2]-t,i[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==u&&this.renderedRenderOrder_==p&&Ct(this.wrappedRenderedExtent_,m))return x(this.renderedExtent_,_)||(this.hitDetectionImageData_=null,this.renderedExtent_=_),this.renderedCenter_=f,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const y=new Al(gh(d,c),m,d,c);let E;this.getLayer().getDeclutter()&&(E=new Al(gh(d,c),m,d,c));const C=Yo();let S;if(C){for(let t=0,e=b.length;t<e;++t){const e=b[t],o=Vo(e,h);i.loadFeatures(o,Zo(d,h),C)}S=No(C,h)}else for(let x=0,A=b.length;x<A;++x)i.loadFeatures(b[x],d,h);const w=uh(d,c);let R=!0;const T=function(t){let i;const o=t.getStyleFunction()||e.getStyleFunction();if(o&&(i=o(t,d)),i){const e=this.renderFeature(t,w,i,y,S,E);R=R&&!e}}.bind(this),I=Vo(m,h),M=i.getFeaturesInExtent(I);p&&M.sort(p);for(let x=0,A=M.length;x<A;++x)T(M[x]);this.renderedFeatures_=M,this.ready=R;const L=y.finish(),O=new oh(m,d,c,i.getOverlaps(),L,e.getRenderBuffer());return E&&(this.declutterExecutorGroup=new oh(m,d,c,i.getOverlaps(),E.finish(),e.getRenderBuffer())),this.renderedResolution_=d,this.renderedRevision_=u,this.renderedRenderOrder_=p,this.renderedExtent_=_,this.wrappedRenderedExtent_=m,this.renderedCenter_=f,this.renderedProjection_=h,this.replayGroup_=O,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,o,n,r){if(!i)return!1;let s=!1;if(Array.isArray(i))for(let a=0,l=i.length;a<l;++a)s=fh(o,t,i[a],e,this.boundHandleStyleImageChange_,n,r)||s;else s=fh(o,t,i,e,this.boundHandleStyleImageChange_,n,r);return s}}var Rh=wh;class Th extends hl{constructor(t){super(t)}createRenderer(){return new Rh(this)}}var Ih=Th;class Mh{constructor(t){this.rbush_=new Sa(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[G(e)]=i}load(t,e){const i=new Array(e.length);for(let o=0,n=e.length;o<n;o++){const n=t[o],r=e[o],s={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:r};i[o]=s,this.items_[G(r)]=s}this.rbush_.load(i)}remove(t){const e=G(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)}update(t,e){const i=this.items_[G(e)],o=[i.minX,i.minY,i.maxX,i.maxY];Ot(o,t)||(this.remove(e),this.insert(t,e))}getAll(){const t=this.rbush_.all();return t.map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]},i=this.rbush_.search(e);return i.map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let o=0,n=t.length;o<n;o++)if(i=e(t[o]),i)return i;return i}isEmpty(){return R(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return Tt(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}var Lh=Mh;class Oh extends W{constructor(t){super(),this.projection=Oo(t.projection),this.attributions_=Ah(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,i){e.viewResolver=t,e.viewRejector=i}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return k()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Ah(t),this.changed()}setState(t){this.state_=t,this.changed()}}function Ah(t){return t?Array.isArray(t)?function(e){return t}:"function"===typeof t?t:function(e){return[t]}:null}var Ph=Oh,Dh={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Fh(t,e){return[[-1/0,-1/0,1/0,1/0]]}let kh=!1;function Nh(t,e,i,o,n,r,s){const a=new XMLHttpRequest;a.open("GET","function"===typeof t?t(i,o,n):t,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=kh,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){const t=e.getType();let o;"json"==t||"text"==t?o=a.responseText:"xml"==t?(o=a.responseXML,o||(o=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==t&&(o=a.response),o?r(e.readFeatures(o,{extent:i,featureProjection:n}),e.readProjection(o)):s()}else s()},a.onerror=s,a.send()}function Gh(t,e){return function(i,o,n,r,s){const a=this;Nh(t,e,i,o,n,(function(t,e){a.addFeatures(t),void 0!==r&&r(t)}),s||C)}}class zh extends d{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class jh extends Ph{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=C,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&(rt(this.format_,7),this.loader_=Gh(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:Fh;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let i,o;this.featuresRtree_=e?new Lh:null,this.loadedExtentsRtree_=new Lh,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?o=t.features:t.features&&(i=t.features,o=i.getArray()),e||void 0!==i||(i=new H(o)),void 0!==o&&this.addFeaturesInternal(o),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=G(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const e=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new zh(Dh.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[L(e,M.CHANGE,this.handleFeatureChange_,this),L(e,c.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0;const o=e.getId();return void 0!==o&&(o.toString()in this.idIndex_?i=!1:this.idIndex_[o.toString()]=e),i&&(rt(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],o=[];for(let n=0,r=t.length;n<r;n++){const e=t[n],o=G(e);this.addToIndex_(o,e)&&i.push(e)}for(let n=0,r=i.length;n<r;n++){const t=i[n],r=G(t);this.setupChangeEvents_(r,t);const s=t.getGeometry();if(s){const i=s.getExtent();e.push(i),o.push(t)}else this.nullGeometryFeatures_[r]=t}if(this.featuresRtree_&&this.featuresRtree_.load(e,o),this.hasListener(Dh.ADDFEATURE))for(let n=0,r=i.length;n<r;n++)this.dispatchEvent(new zh(Dh.ADDFEATURE,i[n]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(Dh.ADDFEATURE,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(Dh.REMOVEFEATURE,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(V.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(V.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_){const e=this.featureChangeKeys_[t];e.forEach(A)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=function(t){this.removeFeatureInternal(t)}.bind(this);this.featuresRtree_.forEach(t);for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new zh(Dh.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){const o=i.getGeometry();return o.intersectsCoordinate(t)?e(i):void 0}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(i){const o=i.getGeometry();if(o.intersectsExtent(t)){const t=e(i);if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),R(this.nullGeometryFeatures_)||b(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){const i=e&&e.canWrapX()&&this.getWrapX();if(!i)return this.featuresRtree_.getInExtent(t);const o=ee(t,e);return[].concat(...o.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],o=t[1];let n=null;const r=[NaN,NaN];let s=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||y,this.featuresRtree_.forEachInExtent(a,(function(t){if(e(t)){const e=t.getGeometry(),l=s;if(s=e.closestPointXY(i,o,r,s),s<l){n=t;const e=Math.sqrt(s);a[0]=i-e,a[1]=o-e,a[2]=i+e,a[3]=o+e}}})),n}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=G(e),o=e.getGeometry();if(o){const t=o.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);const n=e.getId();if(void 0!==n){const t=n.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new zh(Dh.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:G(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&R(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){const o=this.loadedExtentsRtree_,n=this.strategy_(t,e,i);for(let r=0,s=n.length;r<s;++r){const t=n[r],s=o.forEachInExtent(t,(function(e){return Ct(e.extent,t)}));s||(++this.loadingExtentsCount_,this.dispatchEvent(new zh(Dh.FEATURESLOADSTART)),this.loader_.call(this,t,e,i,function(t){--this.loadingExtentsCount_,this.dispatchEvent(new zh(Dh.FEATURESLOADEND,void 0,t))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new zh(Dh.FEATURESLOADERROR))}.bind(this)),o.insert(t,{extent:t.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,(function(e){if(Ot(e.extent,t))return i=e,!0})),i&&e.remove(i)}removeFeature(t){if(!t)return;const e=G(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const i=this.removeFeatureInternal(t);i&&this.changed()}removeFeatureInternal(t){const e=G(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(A),delete this.featureChangeKeys_[e];const o=t.getId();return void 0!==o&&delete this.idIndex_[o.toString()],delete this.uidIndex_[e],this.dispatchEvent(new zh(Dh.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){rt(this.format_,7),this.url_=t,this.setLoader(Gh(t,this.format_))}}var Wh=jh;class Yh extends W{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"===typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Yh(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(A(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=L(t,M.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?Xh(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Xh(t){if("function"===typeof t)return t;{let e;if(Array.isArray(t))e=t;else{rt("function"===typeof t.getZIndex,41);const i=t;e=[i]}return function(){return e}}}var Bh=Yh;class Vh extends _n{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(A),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(L(this.geometries_[t],M.CHANGE,this.changed,this))}clone(){const t=new Vh(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,i,o){if(o<yt(this.getExtent(),t,e))return o;const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)o=n[r].closestPointXY(t,e,i,o);return o}containsXY(t,e){const i=this.geometries_;for(let o=0,n=i.length;o<n;++o)if(i[o].containsXY(t,e))return!0;return!1}computeExtent(t){It(t);const e=this.geometries_;for(let i=0,o=e.length;i<o;++i)At(t,e[i].getExtent());return t}getGeometries(){return Uh(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,o=e.length;i<o;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let o=!1;for(let n=0,r=i.length;n<r;++n){const r=i[n],s=r.getSimplifiedGeometry(t);e.push(s),s!==r&&(o=!0)}if(o){const t=new Vh(null);return t.setGeometriesArray(e),t}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,o=e.length;i<o;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const i=this.geometries_;for(let o=0,n=i.length;o<n;++o)i[o].rotate(t,e);this.changed()}scale(t,e,i){i||(i=jt(this.getExtent()));const o=this.geometries_;for(let n=0,r=o.length;n<r;++n)o[n].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(Uh(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,o=e.length;i<o;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let o=0,n=i.length;o<n;++o)i[o].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Uh(t){const e=[];for(let i=0,o=t.length;i<o;++i)e.push(t[i].clone());return e}var Zh=Vh;class Kh{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?Oo(e.dataProjection):this.readProjection(t);e.extent&&i&&"tile-pixels"===i.getUnits()&&(i=Oo(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return k()}readFeature(t,e){return k()}readFeatures(t,e){return k()}readGeometry(t,e){return k()}readProjection(t){return k()}writeFeature(t,e){return k()}writeFeatures(t,e){return k()}writeGeometry(t,e){return k()}}var Hh=Kh;function qh(t,e,i){const o=i?Oo(i.featureProjection):null,n=i?Oo(i.dataProjection):null;let r;if(r=o&&n&&!ko(o,n)?(e?t.clone():t).transform(e?o:n,e?n:o):t,e&&i&&void 0!==i.decimals){const e=Math.pow(10,i.decimals),o=function(t){for(let i=0,o=t.length;i<o;++i)t[i]=Math.round(t[i]*e)/e;return t};r===t&&(r=t.clone()),r.applyTransform(o)}return r}class Jh extends Hh{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject($h(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject($h(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return k()}readFeaturesFromObject(t,e){return k()}readGeometry(t,e){return this.readGeometryFromObject($h(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return k()}readProjection(t){return this.readProjectionFromObject($h(t))}readProjectionFromObject(t){return k()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return k()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return k()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return k()}}function $h(t){if("string"===typeof t){const e=JSON.parse(t);return e||null}return null!==t?t:null}var Qh=Jh;function td(t,e,i,o,n,r,s){let a,l;const h=(i-e)/o;if(1===h)a=e;else if(2===h)a=e,l=n;else if(0!==h){let r=t[e],s=t[e+1],h=0;const d=[0];for(let n=e+o;n<i;n+=o){const e=t[n],i=t[n+1];h+=Math.sqrt((e-r)*(e-r)+(i-s)*(i-s)),d.push(h),r=e,s=i}const c=n*h,u=p(d,c);u<0?(l=(c-d[-u-2])/(d[-u-1]-d[-u-2]),a=e+(-u-2)*o):a=e+u*o}s=s>1?s:2,r=r||new Array(s);for(let d=0;d<s;++d)r[d]=void 0===a?NaN:void 0===l?t[a+d]:le(t[a+d],t[a+o+d],l);return r}function ed(t,e,i,o,n,r){if(i==e)return null;let s;if(n<t[e+o-1])return r?(s=t.slice(e,e+o),s[o-1]=n,s):null;if(t[i-1]<n)return r?(s=t.slice(i-o,i),s[o-1]=n,s):null;if(n==t[e+o-1])return t.slice(e,e+o);let a=e/o,l=i/o;while(a<l){const e=a+l>>1;n<t[(e+1)*o-1]?l=e:a=e+1}const h=t[a*o-1];if(n==h)return t.slice((a-1)*o,(a-1)*o+o);const d=t[(a+1)*o-1],c=(n-h)/(d-h);s=[];for(let u=0;u<o-1;++u)s.push(le(t[(a-1)*o+u],t[a*o+u],c));return s.push(n),s}function id(t,e,i,o,n,r,s){if(s)return ed(t,e,i[i.length-1],o,n,r);let a;if(n<t[o-1])return r?(a=t.slice(0,o),a[o-1]=n,a):null;if(t[t.length-1]<n)return r?(a=t.slice(t.length-o),a[o-1]=n,a):null;for(let l=0,h=i.length;l<h;++l){const r=i[l];if(e!=r){if(n<t[e+o-1])return null;if(n<=t[r-1])return ed(t,e,r,o,n,!1);e=r}}return null}class od extends En{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){this.flatCoordinates?b(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new od(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,o){return o<yt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Sn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Tn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,o))}forEachSegment(t){return ir(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,ed(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return jn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return td(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return Wl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Dn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new od(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return or(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=On(this.flatCoordinates,0,t,this.stride),this.changed()}}var nd=od;class rd extends En{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{let e=this.getLayout();const i=t,o=[],n=[];for(let t=0,r=i.length;t<r;++t){const r=i[t];0===t&&(e=r.getLayout()),b(o,r.getFlatCoordinates()),n.push(o.length)}this.setFlatCoordinates(e,o),this.ends_=n}}appendLineString(t){this.flatCoordinates?b(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new rd(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,o){return o<yt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wn(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),In(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,o))}getCoordinateAtM(t,e,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,i=void 0!==i&&i,id(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return Wn(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new nd(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,o=[];let n=0;for(let r=0,s=e.length;r<s;++r){const s=e[r],a=new nd(t.slice(n,s),i);o.push(a),n=s}return o}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const o=this.ends_,n=this.stride;for(let r=0,s=o.length;r<s;++r){const s=o[r],a=td(e,i,s,n,.5);b(t,a),i=s}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Fn(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new rd(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return nr(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=An(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}var sd=rd;class ad extends En{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?b(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new ad(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,o){if(o<yt(this.getExtent(),t,e))return o;const n=this.flatCoordinates,r=this.stride;for(let s=0,a=n.length;s<a;s+=r){const a=ne(t,e,n[s],n[s+1]);if(a<o){o=a;for(let t=0;t<r;++t)i[t]=n[s+t];i.length=r}}return o}getCoordinates(){return jn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Hn(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,o=[];for(let n=0,r=t.length;n<r;n+=i){const r=new Hn(t.slice(n,n+i),e);o.push(r)}return o}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let o=0,n=e.length;o<n;o+=i){const i=e[o],n=e[o+1];if(St(t,i,n))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=On(this.flatCoordinates,0,t,this.stride),this.changed()}}var ld=ad;function hd(t,e,i,o){const n=[];let r=Rt();for(let s=0,a=i.length;s<a;++s){const a=i[s];r=Lt(t,e,a[0],o),n.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=a[a.length-1]}return n}class dd extends En{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let o=this.getLayout();const n=t,r=[],s=[];for(let t=0,e=n.length;t<e;++t){const e=n[t];0===t&&(o=e.getLayout());const i=r.length,a=e.getEnds();for(let t=0,o=a.length;t<o;++t)a[t]+=i;b(r,e.getFlatCoordinates()),s.push(a)}e=o,t=r,i=s}void 0!==e&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const i=this.flatCoordinates.length;b(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,o=e.length;t<o;++t)e[t]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let o=0;o<t;++o)e[o]=this.endss_[o].slice();const i=new dd(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,o){return o<yt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Rn(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Mn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,o))}containsXY(t,e){return Qn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return Vn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),gr(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Yn(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=hd(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=er(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new ld(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;cr(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=gr(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=zn(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new dd(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const i=this.endss_[t-1];e=i[i.length-1]}const i=this.endss_[t].slice(),o=i[i.length-1];if(0!==e)for(let n=0,r=i.length;n<r;++n)i[n]-=e;return new fr(this.flatCoordinates.slice(e,o),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,o=[];let n=0;for(let r=0,s=i.length;r<s;++r){const s=i[r].slice(),a=s[s.length-1];if(0!==n)for(let t=0,e=s.length;t<e;++t)s[t]-=n;const l=new fr(e.slice(n,a),t,s);o.push(l),n=a}return o}getType(){return"MultiPolygon"}intersectsExtent(t){return ar(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=Pn(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const t=i[i.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}var cd=dd;class ud extends Qh{constructor(t){t=t||{},super(),this.dataProjection=Oo(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=Oo(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;i="Feature"===t["type"]?t:{type:"Feature",geometry:t,properties:null};const o=gd(i["geometry"],e),n=new Bh;return this.geometryName_?n.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&n.setGeometryName(i["geometry_name"]),n.setGeometry(o),"id"in i&&n.setId(i["id"]),i["properties"]&&n.setProperties(i["properties"],!0),n}readFeaturesFromObject(t,e){const i=t;let o=null;if("FeatureCollection"===i["type"]){const i=t;o=[];const n=i["features"];for(let t=0,r=n.length;t<r;++t)o.push(this.readFeatureFromObject(n[t],e))}else o=[this.readFeatureFromObject(t,e)];return o}readGeometryFromObject(t,e){return gd(t,e)}readProjectionFromObject(t){const e=t["crs"];let i;return e?"name"==e["type"]?i=Oo(e["properties"]["name"]):"EPSG"===e["type"]?i=Oo("EPSG:"+e["properties"]["code"]):rt(!1,36):i=this.dataProjection,i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},o=t.getId();if(void 0!==o&&(i.id=o),!t.hasProperties())return i;const n=t.getProperties(),r=t.getGeometry();return r&&(i.geometry=yd(r,e),delete n[t.getGeometryName()]),R(n)||(i.properties=n),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let o=0,n=t.length;o<n;++o)i.push(this.writeFeatureObject(t[o],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return yd(t,this.adaptOptions(e))}}function gd(t,e){if(!t)return null;let i;switch(t["type"]){case"Point":i=fd(t);break;case"LineString":i=md(t);break;case"Polygon":i=vd(t);break;case"MultiPoint":i=bd(t);break;case"MultiLineString":i=_d(t);break;case"MultiPolygon":i=xd(t);break;case"GeometryCollection":i=pd(t);break;default:throw new Error("Unsupported GeoJSON type: "+t["type"])}return qh(i,!1,e)}function pd(t,e){const i=t["geometries"].map((function(t){return gd(t,e)}));return new Zh(i)}function fd(t){return new Hn(t["coordinates"])}function md(t){return new nd(t["coordinates"])}function _d(t){return new sd(t["coordinates"])}function bd(t){return new ld(t["coordinates"])}function xd(t){return new cd(t["coordinates"])}function vd(t){return new fr(t["coordinates"])}function yd(t,e){t=qh(t,!0,e);const i=t.getType();let o;switch(i){case"Point":o=Td(t,e);break;case"LineString":o=Cd(t,e);break;case"Polygon":o=Id(t,e);break;case"MultiPoint":o=wd(t,e);break;case"MultiLineString":o=Sd(t,e);break;case"MultiPolygon":o=Rd(t,e);break;case"GeometryCollection":o=Ed(t,e);break;case"Circle":o={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+i)}return o}function Ed(t,e){e=Object.assign({},e),delete e.featureProjection;const i=t.getGeometriesArray().map((function(t){return yd(t,e)}));return{type:"GeometryCollection",geometries:i}}function Cd(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function Sd(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function wd(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function Rd(t,e){let i;return e&&(i=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}function Td(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function Id(t,e){let i;return e&&(i=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(i)}}var Md=ud;const Ld="gray",Od="white",Ad=7;function Pd(){return Math.random().toString(36).substring(7)}const Dd={id:{type:String,default:"_default_"},nombre:{type:String,default:"Nombre no asignado"},verCargador:{type:Boolean,default:!1},visible:{type:Boolean,default:!0},zIndex:{type:Number,default:void 0}},Fd={alCambiarVisibilidad:"alCambiarVisibilidad",alIniciarCarga:"alIniciarCarga",alFinalizarCarga:"alFinalizarCarga"},kd=Object.values(Fd);function Nd(t,e){const{registrarNuevaCapa:i,vincularCapa:o}=ea(),{nombre:n,verCargador:r,visible:s,zIndex:a}=(0,l.toRefs)(t),h=(0,l.ref)($s.no),d="_default_"===t.id?Pd():t.id;function c(t){t.set("estatusCarga",h.value),t.set("id",d),t.set("nombre",n.value),t.set("verCargador",r.value),t.setVisible(s.value),t.setZIndex(a.value)}function u(t){c(t),i(t);const{visibilidad:r,alternarVisibilidad:a,cambiarNombre:u,cambiarEstatusCarga:g}=o(d);(0,l.watch)(s,a),(0,l.watch)(r,(t=>e(Fd.alCambiarVisibilidad,t))),(0,l.watch)(n,u),(0,l.watch)(h,g)}return{registrar:u,estatusCarga:h}}const Gd={url:{type:String,default:""},datos:{type:[Array,Object],default:void 0},estilo:{type:Object,default:()=>({fill:{color:Ld},stroke:{width:1,color:Od},circle:{fill:{color:Ld},stroke:{color:Od,width:1},radius:Ad}})},...Dd},zd=[...kd];function jd(t,e){return{...Nd(t,e)}}var Wd={__name:"SisdaiCapaGeojson",props:Gd,emits:zd,setup(t,{emit:e}){const i=t,{registrar:o,estatusCarga:n}=jd(i,e),r=new Wh({features:(new Md).readFeatures({...i.datos})});return r.on(Dh.FEATURESLOADSTART,(({target:t})=>{e("alIniciarCarga"),n.value=$s.ini,void 0===t.getUrl()&&(e("alFinalizarCarga",!0),n.value=$s.fin)})),r.on([Dh.FEATURESLOADEND,Dh.FEATURESLOADERROR],(({type:t})=>{e("alFinalizarCarga",t===Dh.FEATURESLOADEND)})),o(new Ih({source:r})),{__sfc:!0,propsSetup:i,emitsSetup:e,registrar:o,estatusCarga:n,source:r}}},Yd=Wd,Xd=ha(Yd,Ea,Ca,!1,null,null,null),Bd=Xd.exports,Vd=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("span")},Ud=[],Zd={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Kd extends Oe{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(Zd.PRELOAD)}setPreload(t){this.set(Zd.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(Zd.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(Zd.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}var Hd=Kd;class qd extends I{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(M.CHANGE)}release(){this.state===Vi.ERROR&&this.setState(Vi.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==Vi.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==Vi.LOADED){t.interimTile=null;break}t.getState()==Vi.LOADING?e=t:t.getState()==Vi.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==Vi.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){k()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;const o=e-i+1e3/60;return o>=this.transition_?1:an(o/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}var Jd=qd;class $d extends Jd{constructor(t,e,i,o,n,r){super(t,e,r),this.crossOrigin_=o,this.src_=i,this.key=i,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.unlisten_=null,this.tileLoadFunction_=n}getImage(){return this.image_}setImage(t){this.image_=t,this.state=Vi.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Vi.ERROR,this.unlistenImage_(),this.image_=Qd(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Vi.LOADED:this.state=Vi.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Vi.ERROR&&(this.state=Vi.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Vi.IDLE&&(this.state=Vi.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Ua(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Qd(){const t=qe(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var tc=$d;const ec=.5,ic=10,oc=.25;class nc{constructor(t,e,i,o,n,r){this.sourceProj_=t,this.targetProj_=e;let s={};const a=Go(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return s[e]||(s[e]=a(t)),s[e]},this.maxSourceExtent_=o,this.errorThresholdSquared_=n*n,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&Kt(o)==Kt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Kt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Kt(this.targetProj_.getExtent()):null;const l=Ut(i),h=Zt(i),d=zt(i),c=Gt(i),u=this.transformInv_(l),g=this.transformInv_(h),p=this.transformInv_(d),f=this.transformInv_(c),m=ic+(r?Math.max(0,Math.ceil(Math.log2(Nt(i)/(r*r*256*256)))):0);if(this.addQuad_(l,h,d,c,u,g,p,f,m),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,i,o){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach(function(e){if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const i=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];i[0][0]-t>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-t>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-t>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);const o=Math.min(i[0][0],i[1][0],i[2][0]),n=Math.max(i[0][0],i[1][0],i[2][0]);n-o<this.sourceWorldWidth_/2&&(e.source=i)}}.bind(this))}s={}}addTriangle_(t,e,i,o,n,r){this.triangles_.push({source:[o,n,r],target:[t,e,i]})}addQuad_(t,e,i,o,n,r,s,a,l){const h=_t([n,r,s,a]),d=this.sourceWorldWidth_?Kt(h)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,u=this.sourceProj_.canWrapX()&&d>.5&&d<1;let g=!1;if(l>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const n=_t([t,e,i,o]),r=Kt(n)/this.targetWorldWidth_;g=r>oc||g}!u&&this.sourceProj_.isGlobal()&&d&&(g=d>oc||g)}if(!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Ht(h,this.maxSourceExtent_))return;let p=0;if(!g&&(!isFinite(n[0])||!isFinite(n[1])||!isFinite(r[0])||!isFinite(r[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])))if(l>0)g=!0;else if(p=(isFinite(n[0])&&isFinite(n[1])?0:8)+(isFinite(r[0])&&isFinite(r[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1),1!=p&&2!=p&&4!=p&&8!=p)return;if(l>0){if(!g){const e=[(t[0]+i[0])/2,(t[1]+i[1])/2],o=this.transformInv_(e);let r;if(u){const t=(ae(n[0],c)+ae(s[0],c))/2;r=t-ae(o[0],c)}else r=(n[0]+s[0])/2-o[0];const a=(n[1]+s[1])/2-o[1],l=r*r+a*a;g=l>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const h=[(e[0]+i[0])/2,(e[1]+i[1])/2],d=this.transformInv_(h),c=[(o[0]+t[0])/2,(o[1]+t[1])/2],u=this.transformInv_(c);this.addQuad_(t,e,h,c,n,r,d,u,l-1),this.addQuad_(c,h,i,o,u,d,s,a,l-1)}else{const h=[(t[0]+e[0])/2,(t[1]+e[1])/2],d=this.transformInv_(h),c=[(i[0]+o[0])/2,(i[1]+o[1])/2],u=this.transformInv_(c);this.addQuad_(t,h,c,o,n,d,u,a,l-1),this.addQuad_(h,e,i,c,d,r,s,u,l-1)}return}}if(u){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&p)&&this.addTriangle_(t,i,o,n,s,a),0==(14&p)&&this.addTriangle_(t,i,e,n,s,r),p&&(0==(13&p)&&this.addTriangle_(e,o,t,r,a,n),0==(7&p)&&this.addTriangle_(e,o,i,r,a,s))}calculateSourceExtent(){const t=Rt();return this.triangles_.forEach((function(e,i,o){const n=e.source;Pt(t,n[0]),Pt(t,n[1]),Pt(t,n[2])})),t}getTriangles(){return this.triangles_}}var rc=nc;let sc;const ac=[];function lc(t,e,i,o,n){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(o,n),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,o)+1,Math.max(i,n)),t.restore()}function hc(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function dc(){if(void 0===sc){const t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",lc(t,4,5,4,0),lc(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;sc=hc(e,0)||hc(e,4)||hc(e,8)}return sc}function cc(t,e,i,o){const n=zo(i,e,t);let r=Ao(e,o,i);const s=e.getMetersPerUnit();void 0!==s&&(r*=s);const a=t.getMetersPerUnit();void 0!==a&&(r/=a);const l=t.getExtent();if(!l||Et(l,n)){const e=Ao(t,r,n)/r;isFinite(e)&&e>0&&(r/=e)}return r}function uc(t,e,i,o){const n=jt(i);let r=cc(t,e,n,o);return(!isFinite(r)||r<=0)&&kt(i,(function(i){return r=cc(t,e,i,o),isFinite(r)&&r>0})),r}function gc(t,e,i,o,n,r,s,a,l,h,d,c){const u=qe(Math.round(i*t),Math.round(i*e),ac);if(c||(u.imageSmoothingEnabled=!1),0===l.length)return u.canvas;function g(t){return Math.round(t*i)/i}u.scale(i,i),u.globalCompositeOperation="lighter";const p=Rt();l.forEach((function(t,e,i){At(p,t.extent)}));const f=Kt(p),m=Bt(p),_=qe(Math.round(i*f/o),Math.round(i*m/o));c||(_.imageSmoothingEnabled=!1);const b=i/o;l.forEach((function(t,e,i){const o=t.extent[0]-p[0],n=-(t.extent[3]-p[3]),r=Kt(t.extent),s=Bt(t.extent);t.image.width>0&&t.image.height>0&&_.drawImage(t.image,h,h,t.image.width-2*h,t.image.height-2*h,o*b,n*b,r*b,s*b)}));const x=Ut(s);return a.getTriangles().forEach((function(t,e,n){const s=t.source,a=t.target;let l=s[0][0],h=s[0][1],d=s[1][0],f=s[1][1],m=s[2][0],b=s[2][1];const v=g((a[0][0]-x[0])/r),y=g(-(a[0][1]-x[1])/r),E=g((a[1][0]-x[0])/r),C=g(-(a[1][1]-x[1])/r),S=g((a[2][0]-x[0])/r),w=g(-(a[2][1]-x[1])/r),R=l,T=h;l=0,h=0,d-=R,f-=T,m-=R,b-=T;const I=[[d,f,0,0,E-v],[m,b,0,0,S-v],[0,0,d,f,C-y],[0,0,m,b,w-y]],M=re(I);if(M){if(u.save(),u.beginPath(),dc()||!c){u.moveTo(E,C);const t=4,e=v-E,i=y-C;for(let o=0;o<t;o++)u.lineTo(E+g((o+1)*e/t),C+g(o*i/(t-1))),o!=t-1&&u.lineTo(E+g((o+1)*e/t),C+g((o+1)*i/(t-1)));u.lineTo(S,w)}else u.moveTo(E,C),u.lineTo(v,y),u.lineTo(S,w);u.clip(),u.transform(M[0],M[2],M[1],M[3],v,y),u.translate(p[0]-R,p[3]-T),u.scale(o/i,-o/i),u.drawImage(_.canvas,0,0),u.restore()}})),d&&(u.save(),u.globalCompositeOperation="source-over",u.strokeStyle="black",u.lineWidth=1,a.getTriangles().forEach((function(t,e,i){const o=t.target,n=(o[0][0]-x[0])/r,s=-(o[0][1]-x[1])/r,a=(o[1][0]-x[0])/r,l=-(o[1][1]-x[1])/r,h=(o[2][0]-x[0])/r,d=-(o[2][1]-x[1])/r;u.beginPath(),u.moveTo(a,l),u.lineTo(n,s),u.lineTo(h,d),u.closePath(),u.stroke()})),u.restore()),u.canvas}class pc extends Jd{constructor(t,e,i,o,n,r,s,a,l,h,d,c){super(n,Vi.IDLE,{interpolate:!!c}),this.renderEdges_=void 0!==d&&d,this.pixelRatio_=s,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=o,this.wrappedTileCoord_=r||n,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const u=o.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const f=g?Vt(u,g):u;if(0===Nt(f))return void(this.state=Vi.EMPTY);const m=t.getExtent();m&&(p=p?Vt(p,m):m);const _=o.getResolution(this.wrappedTileCoord_[0]),b=uc(t,i,f,_);if(!isFinite(b)||b<=0)return void(this.state=Vi.EMPTY);const x=void 0!==h?h:ec;if(this.triangulation_=new rc(t,i,f,p,b*x,_),0===this.triangulation_.getTriangles().length)return void(this.state=Vi.EMPTY);this.sourceZ_=e.getZForResolution(b);let v=this.triangulation_.calculateSourceExtent();if(p&&(t.canWrapX()?(v[1]=ie(v[1],p[1],p[3]),v[3]=ie(v[3],p[1],p[3])):v=Vt(v,p)),Nt(v)){const t=e.getTileRangeForExtentAndZ(v,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let i=t.minY;i<=t.maxY;i++){const t=l(this.sourceZ_,e,i,s);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=Vi.EMPTY)}else this.state=Vi.EMPTY}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(function(e,i,o){e&&e.getState()==Vi.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=Vi.ERROR;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),o="number"===typeof i?i:i[0],n="number"===typeof i?i:i[1],r=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=gc(o,n,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),r,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=Vi.LOADED}this.changed()}load(){if(this.state==Vi.IDLE){this.state=Vi.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,o){const n=e.getState();if(n==Vi.IDLE||n==Vi.LOADING){t++;const i=L(e,M.CHANGE,(function(o){const n=e.getState();n!=Vi.LOADED&&n!=Vi.ERROR&&n!=Vi.EMPTY||(A(i),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(i)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,i){const o=t.getState();o==Vi.IDLE&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(A),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Je(this.canvas_.getContext("2d")),ac.push(this.canvas_),this.canvas_=null),super.release()}}var fc=pc;class mc{constructor(t,e,i,o){this.minX=t,this.maxX=e,this.minY=i,this.maxY=o}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function _c(t,e,i,o,n){return void 0!==n?(n.minX=t,n.maxX=e,n.minY=i,n.maxY=o,n):new mc(t,e,i,o)}var bc=mc;class xc extends zl{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Rt(),this.tmpTileRange_=new bc(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),i=t.getState(),o=e.getUseInterimTilesOnError();return i==Vi.LOADED||i==Vi.EMPTY||i==Vi.ERROR&&!o}getTile(t,e,i,o){const n=o.pixelRatio,r=o.viewState.projection,s=this.getLayer(),a=s.getSource();let l=a.getTile(t,e,i,n,r);return l.getState()==Vi.ERROR&&s.getUseInterimTilesOnError()&&s.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(l)||(l=l.getInterimTile()),l}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),o=ht(e.pixelToCoordinateTransform,t.slice()),n=i.getExtent();if(n&&!Et(n,o))return null;const r=e.pixelRatio,s=e.viewState.projection,a=e.viewState,l=i.getRenderSource(),h=l.getTileGridForProjection(a.projection),d=l.getTilePixelRatio(e.pixelRatio);for(let c=h.getZForResolution(a.resolution);c>=h.getMinZoom();--c){const t=h.getTileCoordForCoordAndZ(o,c),e=l.getTile(c,t[1],t[2],r,s);if(!(e instanceof tc||e instanceof fc)||e instanceof fc&&e.getState()===Vi.EMPTY)return null;if(e.getState()!==Vi.LOADED)continue;const i=h.getOrigin(c),n=Ls(h.getTileSize(c)),u=h.getResolution(c),g=Math.floor(d*((o[0]-i[0])/u-t[1]*n[0])),p=Math.floor(d*((i[1]-o[1])/u-t[2]*n[1])),f=Math.round(d*l.getGutterForProjection(a.projection));return this.getImageData(e.getImage(),g+f,p+f)}return null}loadedTileCallback(t,e,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(t,e,i)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex],o=t.viewState,n=o.projection,r=o.resolution,s=o.center,a=o.rotation,l=t.pixelRatio,h=this.getLayer(),d=h.getSource(),c=d.getRevision(),u=d.getTileGridForProjection(n),g=u.getZForResolution(r,d.zDirection),p=u.getResolution(g);let m=t.extent;const _=t.viewState.resolution,b=d.getTilePixelRatio(l),x=Math.round(Kt(m)/_*l),v=Math.round(Bt(m)/_*l),y=i.extent&&Uo(i.extent,n);y&&(m=Vt(m,Uo(i.extent,n)));const E=p*x/2/b,C=p*v/2/b,S=[s[0]-E,s[1]-C,s[0]+E,s[1]+C],w=u.getTileRangeForExtentAndZ(m,g),R={};R[g]={};const T=this.createLoadedTileFinder(d,n,R),I=this.tmpExtent,M=this.tmpTileRange_;this.newTiles_=!1;const L=a?Xt(o.center,_,a,t.size):void 0;for(let f=w.minX;f<=w.maxX;++f)for(let e=w.minY;e<=w.maxY;++e){if(a&&!u.tileCoordIntersectsViewport([g,f,e],L))continue;const o=this.getTile(g,f,e,t);if(this.isDrawableTile(o)){const e=G(this);if(o.getState()==Vi.LOADED){R[g][o.tileCoord.toString()]=o;let t=o.inTransition(e);t&&1!==i.opacity&&(o.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(o)||(this.newTiles_=!0)}if(1===o.getAlpha(e,t.time))continue}const n=u.getTileCoordChildTileRange(o.tileCoord,M,I);let r=!1;n&&(r=T(g+1,n)),r||u.forEachTileCoordParentTileRange(o.tileCoord,T,M,I)}const O=p/r*l/b;ct(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/l,1/l,a,-x/2,-v/2);const A=ft(this.pixelTransform);this.useContainer(e,A,this.getBackground(t));const P=this.context,D=P.canvas;ut(this.inversePixelTransform,this.pixelTransform),ct(this.tempTransform,x/2,v/2,O,O,0,-x/2,-v/2),D.width!=x||D.height!=v?(D.width=x,D.height=v):this.containerReused||P.clearRect(0,0,x,v),y&&this.clipUnrotated(P,t,y),d.getInterpolate()||(P.imageSmoothingEnabled=!1),this.preRender(P,t),this.renderedTiles.length=0;let F,k,N,z=Object.keys(R).map(Number);z.sort(f),1!==i.opacity||this.containerReused&&!d.getOpaque(t.viewState.projection)?(F=[],k=[]):z=z.reverse();for(let f=z.length-1;f>=0;--f){const e=z[f],i=d.getTilePixelSize(e,l,n),o=u.getResolution(e),r=o/p,s=i[0]*r*O,a=i[1]*r*O,h=u.getTileCoordForCoordAndZ(Ut(S),e),c=u.getTileCoordExtent(h),m=ht(this.tempTransform,[b*(c[0]-S[0])/p,b*(S[3]-c[3])/p]),_=b*d.getGutterForProjection(n),x=R[e];for(const n in x){const i=x[n],o=i.tileCoord,r=h[1]-o[1],l=Math.round(m[0]-(r-1)*s),c=h[2]-o[2],u=Math.round(m[1]-(c-1)*a),p=Math.round(m[0]-r*s),f=Math.round(m[1]-c*a),b=l-p,v=u-f,y=g===e,E=y&&1!==i.getAlpha(G(this),t.time);let C=!1;if(!E)if(F){N=[p,f,p+b,f,p+b,f+v,p,f+v];for(let t=0,i=F.length;t<i;++t)if(g!==e&&e<k[t]){const e=F[t];Ht([p,f,p+b,f+v],[e[0],e[3],e[4],e[7]])&&(C||(P.save(),C=!0),P.beginPath(),P.moveTo(N[0],N[1]),P.lineTo(N[2],N[3]),P.lineTo(N[4],N[5]),P.lineTo(N[6],N[7]),P.moveTo(e[6],e[7]),P.lineTo(e[4],e[5]),P.lineTo(e[2],e[3]),P.lineTo(e[0],e[1]),P.clip())}F.push(N),k.push(e)}else P.clearRect(p,f,b,v);this.drawTileImage(i,t,p,f,b,v,_,y),F&&!E?(C&&P.restore(),this.renderedTiles.unshift(i)):this.renderedTiles.push(i),this.updateUsedTiles(t.usedTiles,d,i)}}return this.renderedRevision=c,this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!Ot(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=l,this.renderedProjection=n,this.manageTilePyramid(t,d,u,l,n,m,g,h.getPreload()),this.scheduleExpireCache(t,d),this.postRender(P,t),i.extent&&P.restore(),P.imageSmoothingEnabled=!0,A!==D.style.transform&&(D.style.transform=A),this.container}drawTileImage(t,e,i,o,n,r,s,a){const l=this.getTileImage(t);if(!l)return;const h=G(this),d=e.layerStatesArray[e.layerIndex],c=d.opacity*(a?t.getAlpha(h,e.time):1),u=c!==this.context.globalAlpha;u&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(l,s,s,l.width-2*s,l.height-2*s,i,o,n,r),u&&this.context.restore(),c!==d.opacity?e.animate=!0:a&&t.endTransition(h)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const i=function(t,e,i){const o=G(t);o in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[o])}.bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){const o=G(e);o in t||(t[o]={}),t[o][i.getKey()]=!0}manageTilePyramid(t,e,i,o,n,r,s,a,l){const h=G(e);h in t.wantedTiles||(t.wantedTiles[h]={});const d=t.wantedTiles[h],c=t.tileQueue,u=i.getMinZoom(),g=t.viewState.rotation,p=g?Xt(t.viewState.center,t.viewState.resolution,g,t.size):void 0;let f,m,_,b,x,v,y=0;for(v=u;v<=s;++v)for(m=i.getTileRangeForExtentAndZ(r,v,m),_=i.getResolution(v),b=m.minX;b<=m.maxX;++b)for(x=m.minY;x<=m.maxY;++x)g&&!i.tileCoordIntersectsViewport([v,b,x],p)||(s-v<=a?(++y,f=e.getTile(v,b,x,o,n),f.getState()==Vi.IDLE&&(d[f.getKey()]=!0,c.isKeyQueued(f.getKey())||c.enqueue([f,h,i.getTileCoordCenter(f.tileCoord),_])),void 0!==l&&l(f)):e.useTile(v,b,x,n));e.updateCacheSize(y,n)}}var vc=xc;class yc extends Hd{constructor(t){super(t)}createRenderer(){return new vc(this)}}var Ec=yc;class Cc{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){while(this.canExpireCache())this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;while(e)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return rt(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return rt(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){rt(!(t in this.entries_),16);const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}var Sc=Cc;function wc(t,e,i,o){return void 0!==o?(o[0]=t,o[1]=e,o[2]=i,o):[t,e,i]}function Rc(t,e,i){return t+"/"+e+"/"+i}function Tc(t){return Rc(t[0],t[1],t[2])}function Ic(t){return t.split("/").map(Number)}function Mc(t){return(t[1]<<t[0])+t[2]}function Lc(t,e){const i=t[0],o=t[1],n=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;const r=e.getFullTileRange(i);return!r||r.containsXY(o,n)}class Oc extends Sc{clear(){while(this.getCount()>0)this.pop().release();super.clear()}expireCache(t){while(this.canExpireCache()){const e=this.peekLast();if(e.getKey()in t)break;this.pop().release()}}pruneExceptNewestZ(){if(0===this.getCount())return;const t=this.peekFirstKey(),e=Ic(t),i=e[0];this.forEach(function(t){t.tileCoord[0]!==i&&(this.remove(Tc(t.tileCoord)),t.release())}.bind(this))}}var Ac=Oc,Pc={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};const Dc=[0,0,0],Fc=5;class kc{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,rt(v(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(let o=0,n=this.resolutions_.length-1;o<n;++o)if(e){if(this.resolutions_[o]/this.resolutions_[o+1]!==e){e=void 0;break}}else e=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,rt(this.origins_.length==this.resolutions_.length,20));const i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=Ut(i)),rt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,rt(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:$i,rt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){const o=new bc(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(i){const t=this.getTileRangeForExtentAndZ(i,e);o.minX=Math.max(t.minX,o.minX),o.maxX=Math.min(t.maxX,o.maxX),o.minY=Math.max(t.minY,o.minY),o.maxY=Math.min(t.maxY,o.maxY)}return o}),this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const o=this.getTileRangeForExtentAndZ(t,e);for(let n=o.minX,r=o.maxX;n<=r;++n)for(let t=o.minY,s=o.maxY;t<=s;++t)i([e,n,t])}forEachTileCoordParentTileRange(t,e,i,o){let n,r,s,a=null,l=t[0]-1;2===this.zoomFactor_?(r=t[1],s=t[2]):a=this.getTileCoordExtent(t,o);while(l>=this.minZoom){if(2===this.zoomFactor_?(r=Math.floor(r/2),s=Math.floor(s/2),n=_c(r,r,s,s,i)):n=this.getTileRangeForExtentAndZ(a,l,i),e(l,n))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const i=2*t[1],o=2*t[2];return _c(i,i+1,o,o+1,e)}const o=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const o=t[0],n=t[1],r=t[2];if(e===o)return _c(n,r,n,r,i);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-o),s=Math.floor(n*t),a=Math.floor(r*t);if(e<o)return _c(s,s,a,a,i);const l=Math.floor(t*(n+1))-1,h=Math.floor(t*(r+1))-1;return _c(s,l,a,h,i)}const s=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e,i)}getTileRangeExtent(t,e,i){const o=this.getOrigin(t),n=this.getResolution(t),r=Ls(this.getTileSize(t),this.tmpSize_),s=o[0]+e.minX*r[0]*n,a=o[0]+(e.maxX+1)*r[0]*n,l=o[1]+e.minY*r[1]*n,h=o[1]+(e.maxY+1)*r[1]*n;return Tt(s,l,a,h,i)}getTileRangeForExtentAndZ(t,e,i){const o=Dc;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,o);const n=o[1],r=o[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,o),_c(n,o[1],r,o[2],i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),o=Ls(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*o[0]*i,e[1]-(t[2]+.5)*o[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),o=this.getResolution(t[0]),n=Ls(this.getTileSize(t[0]),this.tmpSize_),r=i[0]+t[1]*n[0]*o,s=i[1]-(t[2]+1)*n[1]*o,a=r+n[0]*o,l=s+n[1]*o;return Tt(r,s,a,l,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,o,n){const r=this.getZForResolution(i),s=i/this.getResolution(r),a=this.getOrigin(r),l=Ls(this.getTileSize(r),this.tmpSize_);let h=s*(t-a[0])/i/l[0],d=s*(a[1]-e)/i/l[1];return o?(h=ue(h,Fc)-1,d=ue(d,Fc)-1):(h=ce(h,Fc),d=ce(d,Fc)),wc(r,h,d,n)}getTileCoordForXYAndZ_(t,e,i,o,n){const r=this.getOrigin(i),s=this.getResolution(i),a=Ls(this.getTileSize(i),this.tmpSize_);let l=(t-r[0])/s/a[0],h=(r[1]-e)/s/a[1];return o?(l=ue(l,Fc)-1,h=ue(h,Fc)-1):(l=ce(l,Fc),h=ce(h,Fc)),wc(i,l,h,n)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const i=m(this.resolutions_,t,e||0);return ie(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return rr(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let o=this.minZoom;o<e;++o)i[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=i}}var Nc=kc;function Gc(t){let e=t.getDefaultTileGrid();return e||(e=Xc(t),t.setDefaultTileGrid(e)),e}function zc(t,e,i){const o=e[0],n=t.getTileCoordCenter(e),r=Bc(i);if(Et(r,n))return e;{const e=Kt(r),i=Math.ceil((r[0]-n[0])/e);return n[0]+=e*i,t.getTileCoordForCoordAndZ(n,o)}}function jc(t,e,i,o){o=void 0!==o?o:"top-left";const n=Yc(t,e,i);return new Nc({extent:t,origin:Wt(t,o),resolutions:n,tileSize:i})}function Wc(t){const e=t||{},i=e.extent||Oo("EPSG:3857").getExtent(),o={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Yc(i,e.maxZoom,e.tileSize,e.maxResolution)};return new Nc(o)}function Yc(t,e,i,o){e=void 0!==e?e:Ji,i=Ls(void 0!==i?i:$i);const n=Bt(t),r=Kt(t);o=o>0?o:Math.max(r/i[0],n/i[1]);const s=e+1,a=new Array(s);for(let l=0;l<s;++l)a[l]=o/Math.pow(2,l);return a}function Xc(t,e,i,o){const n=Bc(t);return jc(n,e,i,o)}function Bc(t){t=Oo(t);let e=t.getExtent();if(!e){const i=180*Qi.degrees/t.getMetersPerUnit();e=Tt(-i,-i,i,i)}return e}class Vc extends Ph{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;const e=[256,256];this.tileGrid&&Ls(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new Ac(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,o){const n=this.getTileCacheForProjection(t);if(!n)return!1;let r,s,a,l=!0;for(let h=i.minX;h<=i.maxX;++h)for(let t=i.minY;t<=i.maxY;++t)s=Rc(e,h,t),a=!1,n.containsKey(s)&&(r=n.get(s),a=r.getState()===Vi.LOADED,a&&(a=!1!==o(r))),a||(l=!1);return l}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(t,e,i,o,n){return k()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Gc(t)}getTileCacheForProjection(t){const e=this.getProjection();return rt(null===e||ko(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const o=this.getTileGridForProjection(i),n=this.getTilePixelRatio(e),r=Ls(o.getTileSize(t),this.tmpSize);return 1==n?r:Ms(r,n,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=zc(i,t,e)),Lc(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,o){}}class Uc extends d{constructor(t,e){super(t),this.tile=e}}var Zc=Vc;function Kc(t,e){const i=/\{z\}/g,o=/\{x\}/g,n=/\{y\}/g,r=/\{-y\}/g;return function(s,a,l){return s?t.replace(i,s[0].toString()).replace(o,s[1].toString()).replace(n,s[2].toString()).replace(r,(function(){const t=s[0],i=e.getFullTileRange(t);rt(i,55);const o=i.getHeight()-s[2]-1;return o.toString()})):void 0}}function Hc(t,e){const i=t.length,o=new Array(i);for(let n=0;n<i;++n)o[n]=Kc(t[n],e);return qc(o)}function qc(t){return 1===t.length?t[0]:function(e,i,o){if(e){const n=Mc(e),r=ae(n,t.length);return t[r](e,i,o)}}}function Jc(t){const e=[];let i=/\{([a-z])-([a-z])\}/.exec(t);if(i){const o=i[1].charCodeAt(0),n=i[2].charCodeAt(0);let r;for(r=o;r<=n;++r)e.push(t.replace(i[0],String.fromCharCode(r)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t),i){const o=parseInt(i[2],10);for(let n=parseInt(i[1],10);n<=o;n++)e.push(t.replace(i[0],n.toString()));return e}return e.push(t),e}class $c extends Zc{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===$c.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=G(e),o=e.getState();let n;o==Vi.LOADING?(this.tileLoadingKeys_[i]=!0,n=Pc.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],n=o==Vi.ERROR?Pc.TILELOADERROR:o==Vi.LOADED?Pc.TILELOADEND:void 0),void 0!=n&&this.dispatchEvent(new Uc(n,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),"undefined"!==typeof e?this.setKey(e):this.changed()}setUrl(t){const e=Jc(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Hc(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){const o=Rc(t,e,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)}}var Qc=$c;class tu extends Qc{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:eu,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:tc,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(const o in this.tileCacheForProjection){const t=this.tileCacheForProjection[o];t.expireCache(t==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!ko(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!ko(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(!this.tileGrid||e&&!ko(e,t)){const e=G(t);return e in this.tileGridForProjection||(this.tileGridForProjection[e]=Gc(t)),this.tileGridForProjection[e]}return this.tileGrid}getTileCacheForProjection(t){const e=this.getProjection();if(!e||ko(e,t))return this.tileCache;{const e=G(t);return e in this.tileCacheForProjection||(this.tileCacheForProjection[e]=new Ac(this.tileCache.highWaterMark)),this.tileCacheForProjection[e]}}createTile_(t,e,i,o,n,r){const s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,n),l=a?this.tileUrlFunction(a,o,n):void 0,h=new this.tileClass(s,void 0!==l?Vi.IDLE:Vi.EMPTY,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=r,h.addEventListener(M.CHANGE,this.handleTileChange.bind(this)),h}getTile(t,e,i,o,n){const r=this.getProjection();if(r&&n&&!ko(r,n)){const s=this.getTileCacheForProjection(n),a=[t,e,i];let l;const h=Tc(a);s.containsKey(h)&&(l=s.get(h));const d=this.getKey();if(l&&l.key==d)return l;{const t=this.getTileGridForProjection(r),e=this.getTileGridForProjection(n),i=this.getTileCoordForTileUrlFunction(a,n),c=new fc(r,t,n,e,a,i,this.getTilePixelRatio(o),this.getGutter(),function(t,e,i,o){return this.getTileInternal(t,e,i,o,r)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return c.key=d,l?(c.interimTile=l,c.refreshInterimChain(),s.replace(h,c)):s.set(h,c),c}}return this.getTileInternal(t,e,i,o,r||n)}getTileInternal(t,e,i,o,n){let r=null;const s=Rc(t,e,i),a=this.getKey();if(this.tileCache.containsKey(s)){if(r=this.tileCache.get(s),r.key!=a){const l=r;r=this.createTile_(t,e,i,o,n,a),l.getState()==Vi.IDLE?r.interimTile=l.interimTile:r.interimTile=l,r.refreshInterimChain(),this.tileCache.replace(s,r)}}else r=this.createTile_(t,e,i,o,n,a),this.tileCache.set(s,r);return r}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(t,e){const i=Oo(t);if(i){const t=G(i);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function eu(t,e){t.getImage().src=e}var iu=tu;class ou extends iu{constructor(t){t=t||{};const e=void 0!==t.projection?t.projection:"EPSG:3857",i=void 0!==t.tileGrid?t.tileGrid:Wc({extent:Bc(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}}var nu=ou;const ru='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class su extends nu{constructor(t){let e;t=t||{},e=void 0!==t.attributions?t.attributions:[ru];const i=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",o=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,opaque:void 0===t.opaque||t.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:o,wrapX:t.wrapX,zDirection:t.zDirection})}}var au=su;const lu={url:{type:String,default:"https://{a-c}.basemaps.cartocdn.com/rastertiles/light_nolabels/{z}/{x}/{y}.png"},...Dd},hu={alIniciarCargaTesela:"alIniciarCargaTesela",alFinalizarCargaTesela:"alFinalizarCargaTesela",...Fd},du=Object.values(hu);function cu(t,e){const{estatusCarga:i,registrar:o}=Nd(t,e),n=(0,l.ref)({inicio:0,fin:0,error:0});function r(){n.value.inicio=0,n.value.fin=0,n.value.error=0}function s(){i.value=n.value.error===n.value.inicio?$s.error:$s.fin}function a(t){t.getSource().on(Pc.TILELOADSTART,(()=>{e(hu.alIniciarCargaTesela),n.value.inicio++})),t.getSource().on(Pc.TILELOADEND,(()=>{e(hu.alFinalizarCargaTesela,!0),n.value.fin++})),t.getSource().on(Pc.TILELOADERROR,(()=>{e(hu.alFinalizarCargaTesela,!1),n.value.fin++,n.value.error++}))}function h(t){a(t),o(t)}return(0,l.watch)((()=>n.value.fin===n.value.inicio),(t=>{t?(s(),e(hu.alFinalizarCarga,!0),r()):(i.value=$s.ini,e(hu.alIniciarCarga))})),{registrar:h}}var uu={__name:"SisdaiCapaOsm",props:lu,emits:du,setup(t,{emit:e}){const i=t;return cu(i,e).registrar(new Ec({source:new au})),{__sfc:!0,propsSetup:i,emit:e}}},gu=uu,pu=ha(gu,Vd,Ud,!1,null,null,null),fu=pu.exports,mu=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("span")},_u=[],bu={__name:"SisdaiCapaXyz",props:lu,emits:du,setup(t,{emit:e}){const i=t;return cu(i,e).registrar(new Ec({source:new nu({url:i.url,crossOrigin:"Anonymous"})})),{__sfc:!0,propsSetup:i,emit:e}}},xu=bu,vu=ha(xu,mu,_u,!1,null,null,null),yu=vu.exports,Eu=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("span")},Cu=[];class Su extends Oe{constructor(t){t=t||{},super(t)}}var wu=Su;class Ru extends zl{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,o=t.viewState,n=o.resolution,r=this.getLayer().getSource(),s=t.viewHints;let a=t.extent;if(void 0!==e.extent&&(a=Vt(a,Uo(e.extent,o.projection))),!s[Hi.ANIMATING]&&!s[Hi.INTERACTING]&&!qt(a))if(r){const t=o.projection,e=r.getImage(a,n,i,t);e&&(this.loadImage(e)?this.image_=e:e.getState()===wa.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),o=ht(e.pixelToCoordinateTransform,t.slice()),n=i.getExtent();if(n&&!Et(n,o))return null;const r=this.image_.getExtent(),s=this.image_.getImage(),a=Kt(r),l=Math.floor(s.width*((o[0]-r[0])/a));if(l<0||l>=s.width)return null;const h=Bt(r),d=Math.floor(s.height*((r[3]-o[1])/h));return d<0||d>=s.height?null:this.getImageData(s,l,d)}renderFrame(t,e){const i=this.image_,o=i.getExtent(),n=i.getResolution(),r=i.getPixelRatio(),s=t.layerStatesArray[t.layerIndex],a=t.pixelRatio,l=t.viewState,h=l.center,d=l.resolution,c=a*n/(d*r),u=t.extent,g=l.resolution,p=l.rotation,f=Math.round(Kt(u)/g*a),m=Math.round(Bt(u)/g*a);ct(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/a,1/a,p,-f/2,-m/2),ut(this.inversePixelTransform,this.pixelTransform);const _=ft(this.pixelTransform);this.useContainer(e,_,this.getBackground(t));const b=this.context,x=b.canvas;x.width!=f||x.height!=m?(x.width=f,x.height=m):this.containerReused||b.clearRect(0,0,f,m);let v=!1,y=!0;if(s.extent){const e=Uo(s.extent,l.projection);y=Ht(e,t.extent),v=y&&!Ct(e,t.extent),v&&this.clipUnrotated(b,t,e)}const E=i.getImage(),C=ct(this.tempTransform,f/2,m/2,c,c,0,r*(o[0]-h[0])/n,r*(h[1]-o[3])/n);this.renderedResolution=n*a/r;const S=E.width*C[0],w=E.height*C[3];if(this.getLayer().getSource().getInterpolate()||(b.imageSmoothingEnabled=!1),this.preRender(b,t),y&&S>=.5&&w>=.5){const t=C[4],e=C[5],i=s.opacity;let o;1!==i&&(o=b.globalAlpha,b.globalAlpha=i),b.drawImage(E,0,0,+E.width,+E.height,t,e,S,w),1!==i&&(b.globalAlpha=o)}return this.postRender(b,t),v&&b.restore(),b.imageSmoothingEnabled=!0,_!==x.style.transform&&(x.style.transform=_),this.container}}var Tu=Ru;class Iu extends wu{constructor(t){super(t)}createRenderer(){return new Tu(this)}getData(t){return super.getData(t)}}var Mu=Iu;class Lu extends Ba{constructor(t,e,i,o,n,r,s){const a=t.getExtent(),l=e.getExtent(),h=l?Vt(i,l):i,d=jt(h),c=cc(t,e,d,o),u=ec,g=new rc(t,e,h,a,c*u,o),p=g.calculateSourceExtent(),f=r(p,c,n),m=f?wa.IDLE:wa.EMPTY,_=f?f.getPixelRatio():1;super(i,o,_,m),this.targetProj_=e,this.maxSourceExtent_=a,this.triangulation_=g,this.targetResolution_=o,this.targetExtent_=i,this.sourceImage_=f,this.sourcePixelRatio_=_,this.interpolate_=s,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==wa.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==wa.LOADED){const t=Kt(this.targetExtent_)/this.targetResolution_,e=Bt(this.targetExtent_)/this.targetResolution_;this.canvas_=gc(t,e,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()}load(){if(this.state==wa.IDLE){this.state=wa.LOADING,this.changed();const t=this.sourceImage_.getState();t==wa.LOADED||t==wa.ERROR?this.reproject_():(this.sourceListenerKey_=L(this.sourceImage_,M.CHANGE,(function(t){const e=this.sourceImage_.getState();e!=wa.LOADED&&e!=wa.ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}}unlistenSource_(){A(this.sourceListenerKey_),this.sourceListenerKey_=null}}var Ou=Lu;const Au={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class Pu extends d{constructor(t,e){super(t),this.image=e}}class Du extends Ph{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}findNearestResolution(t){if(this.resolutions_){const e=m(this.resolutions_,t,0);t=this.resolutions_[e]}return t}getImage(t,e,i,o){const n=this.getProjection();if(n&&o&&!ko(n,o)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&ko(this.reprojectedImage_.getProjection(),o)&&this.reprojectedImage_.getResolution()==e&&Ot(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Ou(n,o,t,e,i,function(t,e,i){return this.getImageInternal(t,e,i,n)}.bind(this),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return n&&(o=n),this.getImageInternal(t,e,i,o)}getImageInternal(t,e,i,o){return k()}handleImageChange(t){const e=t.target;let i;switch(e.getState()){case wa.LOADING:this.loading=!0,i=Au.IMAGELOADSTART;break;case wa.LOADED:this.loading=!1,i=Au.IMAGELOADEND;break;case wa.ERROR:this.loading=!1,i=Au.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new Pu(i,e))}}function Fu(t,e){t.getImage().src=e}var ku=Du;const Nu="1.3.0";function Gu(t,e){const i=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))}));const o=i.join("&");return t=t.replace(/[?&]$/,""),t+=t.includes("?")?"&":"?",t+o}function zu(t,e){const i=(""+t).split("."),o=(""+e).split(".");for(let n=0;n<Math.max(i.length,o.length);n++){const t=parseInt(i[n]||"0",10),e=parseInt(o[n]||"0",10);if(t>e)return 1;if(e>t)return-1}return 0}const ju=4,Wu=[101,101];class Yu extends ku{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:Fu,this.params_=Object.assign({},t.params),this.v13_=!0,this.updateV13_(),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5}getFeatureInfoUrl(t,e,i,o){if(void 0===this.url_)return;const n=Oo(i),r=this.getProjection();r&&r!==n&&(e=cc(r,n,t,e),t=zo(t,n,r));const s=Yt(t,e,0,Wu),a={SERVICE:"WMS",VERSION:Nu,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_["LAYERS"]};Object.assign(a,this.params_,o);const l=ce((t[0]-s[0])/e,ju),h=ce((s[3]-t[1])/e,ju);return a[this.v13_?"I":"X"]=l,a[this.v13_?"J":"Y"]=h,this.getRequestUrl_(s,Wu,1,r||n,a)}getLegendUrl(t,e){if(void 0===this.url_)return;const i={SERVICE:"WMS",VERSION:Nu,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e["LAYER"]){const t=this.params_.LAYERS,e=!Array.isArray(t)||1===t.length;if(!e)return;i["LAYER"]=t}if(void 0!==t){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1,o=28e-5;i["SCALE"]=t*e/o}return Object.assign(i,e),Gu(this.url_,i)}getParams(){return this.params_}getImageInternal(t,e,i,o){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);const n=e/i,r=jt(t),s=ue(Kt(t)/n,ju),a=ue(Bt(t)/n,ju),l=Yt(r,n,0,[s,a]),h=ue(this.ratio_*Kt(t)/n,ju),d=ue(this.ratio_*Bt(t)/n,ju),c=Yt(r,n,0,[h,d]),u=this.image_;if(u&&this.renderedRevision_==this.getRevision()&&u.getResolution()==e&&u.getPixelRatio()==i&&Ct(u.getExtent(),l))return u;const g={SERVICE:"WMS",VERSION:Nu,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object.assign(g,this.params_),this.imageSize_[0]=de(Kt(c)/n,ju),this.imageSize_[1]=de(Bt(c)/n,ju);const p=this.getRequestUrl_(c,this.imageSize_,i,o,g);return this.image_=new Za(c,e,i,p,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(M.CHANGE,this.handleImageChange.bind(this)),this.image_}getImageLoadFunction(){return this.imageLoadFunction_}getRequestUrl_(t,e,i,o,n){if(rt(void 0!==this.url_,9),n[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(n["STYLES"]=""),1!=i)switch(this.serverType_){case"geoserver":const t=90*i+.5|0;"FORMAT_OPTIONS"in n?n["FORMAT_OPTIONS"]+=";dpi:"+t:n["FORMAT_OPTIONS"]="dpi:"+t;break;case"mapserver":n["MAP_RESOLUTION"]=90*i;break;case"carmentaserver":case"qgis":n["DPI"]=90*i;break;default:rt(!1,8);break}n["WIDTH"]=e[0],n["HEIGHT"]=e[1];const r=o.getAxisOrientation();let s;return s=this.v13_&&"ne"==r.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,n["BBOX"]=s.join(","),Gu(this.url_,n)}getUrl(){return this.url_}setImageLoadFunction(t){this.image_=null,this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.image_=null,this.changed()}updateV13_(){const t=this.params_["VERSION"]||Nu;this.v13_=zu(t,"1.3")>=0}}var Xu=Yu,Bu={__name:"SisdaiCapaWms",props:{url:{type:String,required:!0},parametros:{type:Object,default:function(){return{}}},servidor:{type:String,default:"geoserver"},extension:{type:Array,default:()=>[]},...Dd},emits:kd,setup(t,{emit:e}){const i=t,{estatusCarga:o,registrar:n}=Nd(i,e),r=new Xu({url:i.url,params:i.parametros,serverType:i.servidor,crossOrigin:"Anonymous"});return r.on(Au.IMAGELOADSTART,(()=>{e("alIniciarCarga"),o.value=$s.ini})),r.on(Au.IMAGELOADERROR,(()=>{e("alFinalizarCarga",!0),o.value=$s.error})),r.on(Au.IMAGELOADEND,(()=>{e("alFinalizarCarga",!0),o.value=$s.fin})),n(new Mu({source:r})),{__sfc:!0,propsSetup:i,emitsSetup:e,estatusCarga:o,registrar:n,source:r}}},Vu=Bu,Uu=ha(Vu,Eu,Cu,!1,null,null,null),Zu=Uu.exports,Ku=function(){var t=this,e=t._self._c,i=t._self._setupProxy;return e("span",{attrs:{nombre:i.nombre}},[t._t("default")],2)},Hu=[],qu={__name:"SisdaiMapaCapas",setup(t){const e="SisdaiMapaCapas";return{__sfc:!0,nombre:e}}},Ju=qu,$u=ha(Ju,Ku,Hu,!1,null,null,null),Qu=$u.exports,tg=function(){var t=this,e=t._self._c,i=t._self._setupProxy;return e("div",{staticClass:"sisdai-mapa-encabezado borde-b",attrs:{nombre:i.nombre}},[t._t("default")],2)},eg=[],ig={__name:"SisdaiMapaEncabezado",setup(t){const e="SisdaiMapaEncabezado";return{__sfc:!0,nombre:e}}},og=ig,ng=(o(132),ha(og,tg,eg,!1,null,"8615f578",null)),rg=ng.exports,sg=function(){var t=this,e=t._self._c,i=t._self._setupProxy;return e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:i.visibilidadCapa,expression:"visibilidadCapa"}],attrs:{type:"checkbox",id:i.idCheck},domProps:{checked:Array.isArray(i.visibilidadCapa)?t._i(i.visibilidadCapa,null)>-1:i.visibilidadCapa},on:{change:function(e){var o=i.visibilidadCapa,n=e.target,r=!!n.checked;if(Array.isArray(o)){var s=null,a=t._i(o,s);n.checked?a<0&&(i.visibilidadCapa=o.concat([s])):a>-1&&(i.visibilidadCapa=o.slice(0,a).concat(o.slice(a+1)))}else i.visibilidadCapa=r}}}),e("label",{attrs:{for:i.idCheck}},[t._v(t._s(i.nombreCapa))])])},ag=[];const lg={para:{type:String,required:!0}};function hg(t){const e=(0,l.ref)(!1),i=(0,l.ref)("Cargando...");function o(){const{alternarVisibilidad:o,visibilidad:n,nombre:r}=ea().vincularCapa(t.para);e.value=n.value,(0,l.watch)(n,(t=>e.value=t)),(0,l.watch)(e,o),i.value=r.value,(0,l.watch)(r,(t=>i.value=t))}return{vincularCapa:o,visibilidadCapa:e,nombreCapa:i}}var dg={__name:"SisdaiMapaLeyenda",props:lg,setup(t){const e=t,{vincularCapa:i,visibilidadCapa:o,nombreCapa:n}=hg(e);(0,l.onMounted)((()=>{i()}));const r=`${Pd()}-${lg.para}`;return{__sfc:!0,propsSetup:e,vincularCapa:i,visibilidadCapa:o,nombreCapa:n,idCheck:r}}},cg=dg,ug=ha(cg,sg,ag,!1,null,null,null),gg=ug.exports;function pg(i){function o(t){i.component(t.__name,t)}function n(t){Object.values(t).forEach((t=>o(t)))}pg.installed||(pg.installed=!0,o(ya),n(t),n(e))}var fg=pg}(),n}()}));